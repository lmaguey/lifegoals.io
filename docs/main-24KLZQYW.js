import{a as L,b as ce,c as up,d as N,e as lE,f as Vc,g as dE,h as hE,i as fE,j as cp,k as pE,l as Ea,m as lp,n as Lc,o as gE,p as mE,q as dp,r as ke,s as hi,t as _n,u as jc,v as Da,w as yE,x as vE,y as wr,z as Mt}from"./chunk-4ZHOUZTK.js";function _E(n,e){return Object.is(n,e)}var Ze=null,Bc=!1,Uc=1,qn=Symbol("SIGNAL");function ye(n){let e=Ze;return Ze=n,e}function wE(){return Ze}var ba={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function pp(n){if(Bc)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(n);let e=Ze.nextProducerIndex++;if(zc(Ze),e<Ze.producerNode.length&&Ze.producerNode[e]!==n&&Ca(Ze)){let t=Ze.producerNode[e];qc(t,Ze.producerIndexOfThis[e])}Ze.producerNode[e]!==n&&(Ze.producerNode[e]=n,Ze.producerIndexOfThis[e]=Ca(Ze)?CE(n,Ze,e):0),Ze.producerLastReadVersion[e]=n.version}function FR(){Uc++}function IE(n){if(!(Ca(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Uc)){if(!n.producerMustRecompute(n)&&!mp(n)){n.dirty=!1,n.lastCleanEpoch=Uc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Uc}}function EE(n){if(n.liveConsumerNode===void 0)return;let e=Bc;Bc=!0;try{for(let t of n.liveConsumerNode)t.dirty||VR(t)}finally{Bc=e}}function DE(){return Ze?.consumerAllowSignalWrites!==!1}function VR(n){n.dirty=!0,EE(n),n.consumerMarkedDirty?.(n)}function Hc(n){return n&&(n.nextProducerIndex=0),ye(n)}function gp(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ca(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function mp(n){zc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(IE(t),r!==t.version))return!0}return!1}function yp(n){if(zc(n),Ca(n))for(let e=0;e<n.producerNode.length;e++)qc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function CE(n,e,t){if(bE(n),n.liveConsumerNode.length===0&&TE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=CE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qc(n,e){if(bE(n),n.liveConsumerNode.length===1&&TE(n))for(let r=0;r<n.producerNode.length;r++)qc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];zc(i),i.producerIndexOfThis[r]=e}}function Ca(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function TE(n){return n.producerNode!==void 0}function SE(n){let e=Object.create(LR);e.computation=n;let t=()=>{if(IE(e),pp(e),e.value===$c)throw e.error;return e.value};return t[qn]=e,t}var hp=Symbol("UNSET"),fp=Symbol("COMPUTING"),$c=Symbol("ERRORED"),LR=ce(L({},ba),{value:hp,dirty:!0,error:null,equal:_E,producerMustRecompute(n){return n.value===hp||n.value===fp},producerRecomputeValue(n){if(n.value===fp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=fp;let t=Hc(n),r;try{r=n.computation()}catch(i){r=$c,n.error=i}finally{gp(n,t)}if(e!==hp&&e!==$c&&r!==$c&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function jR(){throw new Error}var AE=jR;function ME(){AE()}function xE(n){AE=n}var BR=null;function RE(n){let e=Object.create(PE);e.value=n;let t=()=>(pp(e),e.value);return t[qn]=e,t}function vp(n,e){DE()||ME(),n.equal(n.value,e)||(n.value=e,UR(n))}function NE(n,e){DE()||ME(),vp(n,e(n.value))}var PE=ce(L({},ba),{equal:_E,value:void 0});function UR(n){n.version++,FR(),EE(n),BR?.()}function te(n){return typeof n=="function"}function po(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Gc=po(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Le=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Gc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{kE(o)}catch(s){e=e??[],s instanceof Gc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Gc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fi(t,e)}remove(e){let{_finalizers:t}=this;t&&fi(t,e),e instanceof n&&e._removeParent(this)}};Le.EMPTY=(()=>{let n=new Le;return n.closed=!0,n})();var _p=Le.EMPTY;function Wc(n){return n instanceof Le||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function kE(n){te(n)?n():n.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var go={setTimeout(n,e,...t){let{delegate:r}=go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kc(n){go.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(n);else throw n})}function Ta(){}var OE=wp("C",void 0,void 0);function FE(n){return wp("E",void 0,n)}function VE(n){return wp("N",n,void 0)}function wp(n,e,t){return{kind:n,value:e,error:t}}var pi=null;function mo(n){if(on.useDeprecatedSynchronousErrorHandling){let e=!pi;if(e&&(pi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=pi;if(pi=null,t)throw r}}else n()}function LE(n){on.useDeprecatedSynchronousErrorHandling&&pi&&(pi.errorThrown=!0,pi.error=n)}var gi=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wc(e)&&e.add(this)):this.destination=qR}static create(e,t,r){return new zn(e,t,r)}next(e){this.isStopped?Ep(VE(e),this):this._next(e)}error(e){this.isStopped?Ep(FE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ep(OE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$R=Function.prototype.bind;function Ip(n,e){return $R.call(n,e)}var Dp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Qc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Qc(r)}else Qc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qc(t)}}},zn=class extends gi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ip(e.next,o),error:e.error&&Ip(e.error,o),complete:e.complete&&Ip(e.complete,o)}):i=e}this.destination=new Dp(i)}};function Qc(n){on.useDeprecatedSynchronousErrorHandling?LE(n):Kc(n)}function HR(n){throw n}function Ep(n,e){let{onStoppedNotification:t}=on;t&&go.setTimeout(()=>t(n,e))}var qR={closed:!0,next:Ta,error:HR,complete:Ta};var yo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Cp(...n){return bp(n)}function bp(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=GR(t)?t:new zn(t,r,i);return mo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jE(r),new r((i,o)=>{let s=new zn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[yo](){return this}pipe(...t){return bp(t)(this)}toPromise(t){return t=jE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function jE(n){var e;return(e=n??on.Promise)!==null&&e!==void 0?e:Promise}function zR(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function GR(n){return n&&n instanceof gi||zR(n)&&Wc(n)}function Tp(n){return te(n?.lift)}function se(n){return e=>{if(Tp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new Sp(n,e,t,r,i)}var Sp=class extends gi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vo(){return se((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _o=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return vo()(this)}};var BE=po(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Yc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new BE}next(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_p:(this.currentObservers=null,o.push(t),new Le(()=>{this.currentObservers=null,fi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new Yc(e,t),n})(),Yc=class extends Ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:_p}};var ut=class extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sa={now(){return(Sa.delegate||Date).now()},delegate:void 0};var Zc=class extends Ne{constructor(e=1/0,t=1/0,r=Sa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Jc=class extends Le{constructor(e,t){super()}schedule(e,t=0){return this}};var Aa={setInterval(n,e,...t){let{delegate:r}=Aa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Aa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wo=class extends Jc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Aa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Io=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Io.now=Sa.now;var Eo=class extends Io{constructor(e,t=Io.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ma=new Eo(wo);var Xc=class extends wo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var el=class extends Eo{};var Ap=new el(Xc);var Et=new le(n=>n.complete());function UE(n){return n&&te(n.schedule)}function Mp(n){return n[n.length-1]}function tl(n){return te(Mp(n))?n.pop():void 0}function wn(n){return UE(Mp(n))?n.pop():void 0}function $E(n,e){return typeof Mp(n)=="number"?n.pop():e}var nl=n=>n&&typeof n.length=="number"&&typeof n!="function";function rl(n){return te(n?.then)}function il(n){return te(n[yo])}function ol(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function sl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var al=WR();function ul(n){return te(n?.[al])}function cl(n){return dE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Vc(t.read());if(i)return yield Vc(void 0);yield yield Vc(r)}}finally{t.releaseLock()}})}function ll(n){return te(n?.getReader)}function Me(n){if(n instanceof le)return n;if(n!=null){if(il(n))return KR(n);if(nl(n))return QR(n);if(rl(n))return YR(n);if(ol(n))return HE(n);if(ul(n))return ZR(n);if(ll(n))return JR(n)}throw sl(n)}function KR(n){return new le(e=>{let t=n[yo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QR(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function YR(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Kc)})}function ZR(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function HE(n){return new le(e=>{XR(n,e).catch(t=>e.error(t))})}function JR(n){return HE(cl(n))}function XR(n,e){var t,r,i,o;return lE(this,void 0,void 0,function*(){try{for(t=hE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Gt(n,e=0){return se((t,r)=>{t.subscribe(ae(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function sn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function qE(n,e){return Me(n).pipe(sn(e),Gt(e))}function zE(n,e){return Me(n).pipe(sn(e),Gt(e))}function GE(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function WE(n,e){return new le(t=>{let r;return xt(t,e,()=>{r=n[al](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function dl(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function KE(n,e){return dl(cl(n),e)}function QE(n,e){if(n!=null){if(il(n))return qE(n,e);if(nl(n))return GE(n,e);if(rl(n))return zE(n,e);if(ol(n))return dl(n,e);if(ul(n))return WE(n,e);if(ll(n))return KE(n,e)}throw sl(n)}function ve(n,e){return e?QE(n,e):Me(n)}function X(...n){let e=wn(n);return ve(n,e)}function Do(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function xp(n){return!!n&&(n instanceof le||te(n.lift)&&te(n.subscribe))}var Gn=po(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:eN}=Array;function tN(n,e){return eN(e)?n(...e):n(e)}function hl(n){return Z(e=>tN(n,e))}var{isArray:nN}=Array,{getPrototypeOf:rN,prototype:iN,keys:oN}=Object;function fl(n){if(n.length===1){let e=n[0];if(nN(e))return{args:e,keys:null};if(sN(e)){let t=oN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sN(n){return n&&typeof n=="object"&&rN(n)===iN}function pl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xa(...n){let e=wn(n),t=tl(n),{args:r,keys:i}=fl(n);if(r.length===0)return ve([],e);let o=new le(aN(r,e,i?s=>pl(i,s):It));return t?o.pipe(hl(t)):o}function aN(n,e,t=It){return r=>{YE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)YE(e,()=>{let l=ve(n[u],e),h=!1;l.subscribe(ae(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function YE(n,e,t){n?xt(t,n,e):e()}function ZE(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let M=!1;Me(t(A,h++)).subscribe(ae(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let F=u.shift();s?xt(e,s,()=>b(F)):b(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(ae(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ze(n,e,t=1/0){return te(e)?ze((r,i)=>Z((o,s)=>e(r,o,i,s))(Me(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>ZE(r,i,n,t)))}function Ir(n=1/0){return ze(It,n)}function JE(){return Ir(1)}function Co(...n){return JE()(ve(n,wn(n)))}function gl(n){return new le(e=>{Me(n()).subscribe(e)})}function Rp(...n){let e=tl(n),{args:t,keys:r}=fl(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Me(t[h]).subscribe(ae(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?pl(r,a):a),o.complete())}))}});return e?i.pipe(hl(e)):i}function Np(...n){let e=wn(n),t=$E(n,1/0),r=n;return r.length?r.length===1?Me(r[0]):Ir(t)(ve(r,e)):Et}function ct(n,e){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Er(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ae(t,void 0,void 0,s=>{o=Me(n(s,Er(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function XE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ae(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function mi(n,e){return te(e)?ze(n,e,1):ze(n,1)}function Dr(n){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wn(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pp(n){return Z(()=>n)}function kp(n,e=It){return n=n??uN,se((t,r)=>{let i,o=!0;t.subscribe(ae(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function uN(n,e){return n===e}function ml(n=cN){return se((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cN(){return new Gn}function Ra(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):It,Wn(1),t?Dr(e):ml(()=>new Gn))}function bo(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Op(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):It,bo(1),t?Dr(e):ml(()=>new Gn))}function Na(){return se((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function yi(n,e){return se(XE(n,e,arguments.length>=2,!0))}function eD(n={}){let{connector:e=()=>new Ne,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return se((A,M)=>{l++,!p&&!h&&m();let F=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=Fp(b,i))}),F.subscribe(M),!s&&l>0&&(s=new zn({next:H=>F.next(H),error:H=>{p=!0,m(),a=Fp(y,t,H),F.error(H)},complete:()=>{h=!0,m(),a=Fp(y,r),F.complete()}}),Me(A).subscribe(s))})(o)}}function Fp(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new zn({next:()=>{r.unsubscribe(),n()}});return Me(e(...t)).subscribe(r)}function yl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,eD({connector:()=>new Zc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function vi(...n){let e=wn(n);return se((t,r)=>{(e?Co(n,t,e):Co(n,t)).subscribe(r)})}function je(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Me(n(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vl(n,e){return te(e)?je(()=>n,e):je(()=>n)}function Vp(n){return se((e,t)=>{Me(n).subscribe(ae(t,()=>t.complete(),Ta)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var UD="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(Lg(e,t)),this.code=e}};function Lg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function $a(n){return{toString:n}.toString()}var _l="__parameters__";function lN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function $D(n,e,t){return $a(()=>{let r=lN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(_l)?u[_l]:Object.defineProperty(u,_l,{value:[]})[_l];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var cn=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function dN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function tD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var hN=be({__forward_ref__:be});function Si(n){return n.__forward_ref__=Si,n.toString=function(){return Rt(this())},n}function Dt(n){return HD(n)?n():n}function HD(n){return typeof n=="function"&&n.hasOwnProperty(hN)&&n.__forward_ref__===Si}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function et(n){return{providers:n.providers||[],imports:n.imports||[]}}function rd(n){return nD(n,zD)||nD(n,GD)}function qD(n){return rd(n)!==null}function nD(n,e){return n.hasOwnProperty(e)?n[e]:null}function fN(n){let e=n&&(n[zD]||n[GD]);return e||null}function rD(n){return n&&(n.hasOwnProperty(iD)||n.hasOwnProperty(pN))?n[iD]:null}var zD=be({\u0275prov:be}),iD=be({\u0275inj:be}),GD=be({ngInjectableDef:be}),pN=be({ngInjectorDef:be}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function WD(n){return n&&!!n.\u0275providers}var gN=be({\u0275cmp:be}),mN=be({\u0275dir:be}),yN=be({\u0275pipe:be}),vN=be({\u0275mod:be}),Ml=be({\u0275fac:be}),ka=be({__NG_ELEMENT_ID__:be}),oD=be({__NG_ENV_ID__:be});function id(n){return typeof n=="string"?n:n==null?"":String(n)}function _N(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():id(n)}function wN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function jg(n,e){throw new Q(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Zp;function KD(){return Zp}function Kt(n){let e=Zp;return Zp=n,e}function QD(n,e,t){let r=rd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;jg(n,"Injector")}var IN={},Fa=IN,Jp="__NG_DI_FLAG__",xl="ngTempTokenPath",EN="ngTokenPath",DN=/\n/gm,CN="\u0275",sD="__source",xo;function bN(){return xo}function Cr(n){let e=xo;return xo=n,e}function TN(n,e=ue.Default){if(xo===void 0)throw new Q(-203,!1);return xo===null?QD(n,void 0,e):xo.get(n,e&ue.Optional?null:void 0,e)}function V(n,e=ue.Default){return(KD()||TN)(Dt(n),e)}function B(n,e=ue.Default){return V(n,od(e))}function od(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Xp(n){let e=[];for(let t=0;t<n.length;t++){let r=Dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=SN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(V(i,o))}else e.push(V(r))}return e}function YD(n,e){return n[Jp]=e,n.prototype[Jp]=e,n}function SN(n){return n[Jp]}function AN(n,e,t,r){let i=n[xl];throw e[sD]&&i.unshift(e[sD]),n.message=MN(`
`+n.message,i,t,r),n[EN]=i,n[xl]=null,n}function MN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==CN?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(DN,`
  `)}`}var zo=YD($D("Optional"),8);var Bg=YD($D("SkipSelf"),4);function No(n,e){let t=n.hasOwnProperty(Ml);return t?n[Ml]:null}function Ug(n,e){n.forEach(t=>Array.isArray(t)?Ug(t,e):e(t))}function ZD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function RN(n,e,t){let r=Ha(n,e);return r>=0?n[r|1]=t:(r=~r,xN(n,r,e,t)),r}function Lp(n,e){let t=Ha(n,e);if(t>=0)return n[t|1]}function Ha(n,e){return NN(n,e,1)}function NN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Po={},Qt=[],ko=new q(""),JD=new q("",-1),XD=new q(""),Nl=class{get(e,t=Fa){if(t===Fa){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}},eC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(eC||{}),Dn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dn||{}),Sr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Sr||{});function PN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function eg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];kN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function tC(n){return n===3||n===4||n===6}function kN(n){return n.charCodeAt(0)===64}function Va(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?aD(n,t,i,null,e[++r]):aD(n,t,i,null,null))}}return n}function aD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var nC="ng-template";function ON(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($g(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function $g(n){return n.type===4&&n.value!==nC}function FN(n,e,t){let r=n.type===4&&!t?nC:n.value;return e===r}function VN(n,e,t){let r=4,i=n.attrs,o=i!==null?BN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!an(r)&&!an(u))return!1;if(s&&an(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!FN(n,u,t)||u===""&&e.length===1){if(an(r))return!1;s=!0}}else if(r&8){if(i===null||!ON(n,i,u,t)){if(an(r))return!1;s=!0}}else{let l=e[++a],h=LN(u,i,$g(n),t);if(h===-1){if(an(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(an(r))return!1;s=!0}}}}return an(r)||s}function an(n){return(n&1)===0}function LN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return UN(e,n)}function jN(n,e,t=!1){for(let r=0;r<e.length;r++)if(VN(n,e[r],t))return!0;return!1}function BN(n){for(let e=0;e<n.length;e++){let t=n[e];if(tC(t))return e}return n.length}function UN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function uD(n,e){return n?":not("+e.trim()+")":e}function $N(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!an(s)&&(e+=uD(o,i),i=""),r=s,o=o||!an(r);t++}return i!==""&&(e+=uD(o,i)),e}function HN(n){return n.map($N).join(",")}function qN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!an(i))break;i=o}r++}return{attrs:e,classes:t}}function Nr(n){return $a(()=>{let e=aC(n),t=ce(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===eC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dn.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""});uC(t);let r=n.dependencies;return t.directiveDefs=lD(r,!1),t.pipeDefs=lD(r,!0),t.id=WN(t),t})}function zN(n){return Ar(n)||rC(n)}function GN(n){return n!==null}function tt(n){return $a(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function cD(n,e){if(n==null)return Po;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Sr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Sr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function mt(n){return $a(()=>{let e=aC(n);return uC(e),e})}function Ar(n){return n[gN]||null}function rC(n){return n[mN]||null}function iC(n){return n[yN]||null}function oC(n){let e=Ar(n)||rC(n)||iC(n);return e!==null?e.standalone:!1}function sC(n,e){let t=n[vN]||null;if(!t&&e===!0)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function aC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Po,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cD(n.inputs,e),outputs:cD(n.outputs),debugInfo:null}}function uC(n){n.features?.forEach(e=>e(n))}function lD(n,e){if(!n)return null;let t=e?iC:zN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(GN)}function WN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function KN(...n){return{\u0275providers:cC(!0,n),\u0275fromNgModule:!0}}function cC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ug(e,s=>{let a=s;tg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lC(i,o),t}function lC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Hg(i,o=>{e(o,r)})}}function tg(n,e,t,r){if(n=Dt(n),!n)return!1;let i=null,o=rD(n),s=!o&&Ar(n);if(!o&&!s){let u=n.ngModule;if(o=rD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)tg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ug(o.imports,h=>{tg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&lC(l,e)}if(!a){let l=No(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:XD,useValue:i,multi:!0},i),e({provide:ko,useValue:()=>V(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Hg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Hg(n,e){for(let t of n)WD(t)&&(t=t.\u0275providers),Array.isArray(t)?Hg(t,e):e(t)}var QN=be({provide:String,useValue:be});function dC(n){return n!==null&&typeof n=="object"&&QN in n}function YN(n){return!!(n&&n.useExisting)}function ZN(n){return!!(n&&n.useFactory)}function Oo(n){return typeof n=="function"}function JN(n){return!!n.useClass}var sd=new q(""),bl={},XN={},jp;function qg(){return jp===void 0&&(jp=new Nl),jp}var jt=class{},La=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rg(e,s=>this.processProvider(s)),this.records.set(JD,To(void 0,this)),i.has("environment")&&this.records.set(jt,To(void 0,this));let o=this.records.get(sd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(XD,Qt,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Cr(this),r=Kt(void 0),i;try{return e()}finally{Cr(t),Kt(r)}}get(e,t=Fa,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oD))return e[oD](this);r=od(r);let i,o=Cr(this),s=Kt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=iP(e)&&rd(e);l&&this.injectableDefInScope(l)?u=To(ng(e),bl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?qg():this.parent;return t=r&ue.Optional&&t===Fa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[xl]=a[xl]||[]).unshift(Rt(e)),o)throw a;return AN(a,e,"R3InjectorError",this.source)}else throw a}finally{Kt(s),Cr(o)}}resolveInjectorInitializers(){let e=ye(null),t=Cr(this),r=Kt(void 0),i;try{let o=this.get(ko,Qt,ue.Self);for(let s of o)s()}finally{Cr(t),Kt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Dt(e);let t=Oo(e)?e:Dt(e&&e.provide),r=tP(e);if(!Oo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=To(void 0,bl,!0),i.factory=()=>Xp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===bl&&(t.value=XN,t.value=t.factory()),typeof t.value=="object"&&t.value&&rP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ng(n){let e=rd(n),t=e!==null?e.factory:No(n);if(t!==null)return t;if(n instanceof q)throw new Q(204,!1);if(n instanceof Function)return eP(n);throw new Q(204,!1)}function eP(n){if(n.length>0)throw new Q(204,!1);let t=fN(n);return t!==null?()=>t.factory(n):()=>new n}function tP(n){if(dC(n))return To(void 0,n.useValue);{let e=hC(n);return To(e,bl)}}function hC(n,e,t){let r;if(Oo(n)){let i=Dt(n);return No(i)||ng(i)}else if(dC(n))r=()=>Dt(n.useValue);else if(ZN(n))r=()=>n.useFactory(...Xp(n.deps||[]));else if(YN(n))r=()=>V(Dt(n.useExisting));else{let i=Dt(n&&(n.useClass||n.provide));if(nP(n))r=()=>new i(...Xp(n.deps));else return No(i)||ng(i)}return r}function To(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nP(n){return!!n.deps}function rP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function iP(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function rg(n,e){for(let t of n)Array.isArray(t)?rg(t,e):t&&WD(t)?rg(t.\u0275providers,e):e(t)}function Sn(n,e){n instanceof La&&n.assertNotDestroyed();let t,r=Cr(n),i=Kt(void 0);try{return e()}finally{Cr(r),Kt(i)}}function fC(){return KD()!==void 0||bN()!=null}function oP(n){if(!fC())throw new Q(-203,!1)}function sP(n){let e=cn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function aP(n){return typeof n=="function"}var Zn=0,de=1,ne=2,Ct=3,un=4,dn=5,Pl=6,kl=7,ln=8,Fo=9,Cn=10,Xe=11,ja=12,dD=13,Go=14,bn=15,Vo=16,So=17,Lo=18,ad=19,pC=20,br=21,Bp=22,Yt=23,Mr=25,gC=1;var wi=7,Ol=8,Fl=9,Zt=10,Vl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vl||{});function Tr(n){return Array.isArray(n)&&typeof n[gC]=="object"}function Jn(n){return Array.isArray(n)&&n[gC]===!0}function mC(n){return(n.flags&4)!==0}function ud(n){return n.componentOffset>-1}function zg(n){return(n.flags&1)===1}function xr(n){return!!n.template}function ig(n){return(n[ne]&512)!==0}var og=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Pr(){return vC}function vC(n){return n.type.prototype.ngOnChanges&&(n.setInput=cP),uP}Pr.ngInherit=!0;function uP(){let n=wC(this),e=n?.current;if(e){let t=n.previous;if(t===Po)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function cP(n,e,t,r,i){let o=this.declaredInputs[r],s=wC(n)||lP(n,{previous:Po,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new og(l&&l.currentValue,t,u===Po),yC(n,e,i,t)}var _C="__ngSimpleChanges__";function wC(n){return n[_C]||null}function lP(n,e){return n[_C]=e}var hD=null;var In=function(n,e,t){hD?.(n,e,t)},dP="svg",hP="math";function Tn(n){for(;Array.isArray(n);)n=n[Zn];return n}function IC(n,e){return Tn(e[n])}function Jt(n,e){return Tn(e[n.index])}function EC(n,e){return n.data[e]}function kr(n,e){let t=e[n];return Tr(t)?t:t[Zn]}function Gg(n){return(n[ne]&128)===128}function fP(n){return Jn(n[Ct])}function Ll(n,e){return e==null?null:n[e]}function DC(n){n[So]=0}function CC(n){n[ne]&1024||(n[ne]|=1024,Gg(n)&&ld(n))}function pP(n,e){for(;n>0;)e=e[Go],n--;return e}function cd(n){return!!(n[ne]&9216||n[Yt]?.dirty)}function sg(n){n[Cn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),cd(n)&&ld(n)}function ld(n){n[Cn].changeDetectionScheduler?.notify(0);let e=Ii(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Gg(e)));)e=Ii(e)}function bC(n,e){if((n[ne]&256)===256)throw new Q(911,!1);n[br]===null&&(n[br]=[]),n[br].push(e)}function gP(n,e){if(n[br]===null)return;let t=n[br].indexOf(e);t!==-1&&n[br].splice(t,1)}function Ii(n){let e=n[Ct];return Jn(e)?e[Ct]:e}var he={lFrame:FC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TC=!1;function mP(){return he.lFrame.elementDepthCount}function yP(){he.lFrame.elementDepthCount++}function vP(){he.lFrame.elementDepthCount--}function SC(){return he.bindingsEnabled}function _P(){return he.skipHydrationRootTNode!==null}function wP(n){return he.skipHydrationRootTNode===n}function IP(){he.skipHydrationRootTNode=null}function xe(){return he.lFrame.lView}function Ut(){return he.lFrame.tView}function AC(n){return he.lFrame.contextLView=n,n[ln]}function MC(n){return he.lFrame.contextLView=null,n}function bt(){let n=xC();for(;n!==null&&n.type===64;)n=n.parent;return n}function xC(){return he.lFrame.currentTNode}function EP(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qa(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function RC(){return he.lFrame.isParent}function DP(){he.lFrame.isParent=!1}function NC(){return TC}function fD(n){TC=n}function CP(n){return he.lFrame.bindingIndex=n}function dd(){return he.lFrame.bindingIndex++}function bP(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TP(){return he.lFrame.inI18n}function SP(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,ag(e)}function AP(){return he.lFrame.currentDirectiveIndex}function ag(n){he.lFrame.currentDirectiveIndex=n}function MP(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function PC(n){he.lFrame.currentQueryIndex=n}function xP(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function kC(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=xP(o),i===null||(o=o[Go],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=OC();return r.currentTNode=e,r.lView=n,!0}function Wg(n){let e=OC(),t=n[de];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function OC(){let n=he.lFrame,e=n===null?null:n.child;return e===null?FC(n):e}function FC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function VC(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LC=VC;function Kg(){let n=VC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function RP(n){return(he.lFrame.contextLView=pP(n,he.lFrame.contextLView))[ln]}function Wo(){return he.lFrame.selectedIndex}function Ei(n){he.lFrame.selectedIndex=n}function Qg(){let n=he.lFrame;return EC(n.tView,n.selectedIndex)}function NP(){return he.lFrame.currentNamespace}var jC=!0;function Yg(){return jC}function Zg(n){jC=n}function PP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=vC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Tl(n,e,t){BC(n,e,3,t)}function Sl(n,e,t,r){(n[ne]&3)===t&&BC(n,e,t,r)}function Up(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function BC(n,e,t,r){let i=r!==void 0?n[So]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[So]+=65536),(a<o||o==-1)&&(kP(n,t,e,u),n[So]=(n[So]&4294901760)+u+2),u++}function pD(n,e){In(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),In(5,n,e)}}function kP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[So]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,pD(a,o)):pD(a,o)}var Ro=-1,Di=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function OP(n){return n instanceof Di}function FP(n){return(n.flags&8)!==0}function VP(n){return(n.flags&16)!==0}var $p={},ug=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=od(r);let i=this.injector.get(e,$p,r);return i!==$p||t===$p?i:this.parentInjector.get(e,t,r)}};function UC(n){return n!==Ro}function jl(n){return n&32767}function LP(n){return n>>16}function Bl(n,e){let t=LP(n),r=e;for(;t>0;)r=r[Go],t--;return r}var cg=!0;function gD(n){let e=cg;return cg=n,e}var jP=256,$C=jP-1,HC=5,BP=0,En={};function UP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ka)&&(r=t[ka]),r==null&&(r=t[ka]=BP++);let i=r&$C,o=1<<i;e.data[n+(i>>HC)]|=o}function Ul(n,e){let t=qC(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Hp(r.data,n),Hp(e,null),Hp(r.blueprint,null));let i=Xg(n,e),o=n.injectorIndex;if(UC(i)){let s=jl(i),a=Bl(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Hp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=QC(i),r===null)return Ro;if(t++,i=i[Go],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ro}function lg(n,e,t){UP(n,e,t)}function $P(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(tC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function zC(n,e,t){if(t&ue.Optional||n!==void 0)return n;jg(e,"NodeInjector")}function GC(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[Fo],o=Kt(void 0);try{return i?i.get(e,r,t&ue.Optional):QD(e,r,t&ue.Optional)}finally{Kt(o)}}return zC(r,e,t)}function WC(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=WP(n,e,t,r,En);if(s!==En)return s}let o=KC(n,e,t,r,En);if(o!==En)return o}return GC(e,t,r,i)}function KC(n,e,t,r,i){let o=zP(t);if(typeof o=="function"){if(!kC(e,n,r))return r&ue.Host?zC(i,t,r):GC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))jg(t);else return s}finally{LC()}}else if(typeof o=="number"){let s=null,a=qC(n,e),u=Ro,l=r&ue.Host?e[bn][dn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?Xg(n,e):e[a+8],u===Ro||!yD(r,!1)?a=-1:(s=e[de],a=jl(u),e=Bl(u,e)));a!==-1;){let h=e[de];if(mD(o,a,h.data)){let p=HP(a,e,t,s,r,l);if(p!==En)return p}u=e[a+8],u!==Ro&&yD(r,e[de].data[a+8]===l)&&mD(o,a,e)?(s=h,a=jl(u),e=Bl(u,e)):a=-1}}return i}function HP(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?ud(a)&&cg:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=qP(a,s,t,u,l);return h!==null?jo(e,s,h,a):En}function qP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&xr(y)&&y.type===t)return u}return null}function jo(n,e,t,r){let i=n[t],o=e.data;if(OP(i)){let s=i;s.resolving&&wN(_N(o[t]));let a=gD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Kt(s.injectImpl):null,h=kC(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&PP(t,o[t],e)}finally{l!==null&&Kt(l),gD(a),s.resolving=!1,LC()}}return i}function zP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ka)?n[ka]:void 0;return typeof e=="number"?e>=0?e&$C:GP:e}function mD(n,e,t){let r=1<<n;return!!(t[e+(n>>HC)]&r)}function yD(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var _i=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return WC(this._tNode,this._lView,e,od(r),t)}};function GP(){return new _i(bt(),xe())}function Ko(n){return $a(()=>{let e=n.prototype.constructor,t=e[Ml]||dg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ml]||dg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dg(n){return HD(n)?()=>{let e=dg(Dt(n));return e&&e()}:No(n)}function WP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=KC(o,s,t,r|ue.Self,En);if(a!==En)return a;let u=o.parent;if(!u){let l=s[pC];if(l){let h=l.get(t,En,r);if(h!==En)return h}u=QC(s),s=s[Go]}o=u}return i}function QC(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function em(n){return $P(bt(),n)}function vD(n,e=null,t=null,r){let i=YC(n,e,t,r);return i.resolveInjectorInitializers(),i}function YC(n,e=null,t=null,r,i=new Set){let o=[t||Qt,KN(n)];return r=r||(typeof n=="object"?void 0:Rt(n)),new La(o,e||qg(),r||null,i)}var Bt=class n{static{this.THROW_IF_NOT_FOUND=Fa}static{this.NULL=new Nl}static create(e,t){if(Array.isArray(e))return vD({name:""},t,e,"");{let r=e.name??"";return vD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=K({token:n,providedIn:"any",factory:()=>V(JD)})}static{this.__NG_ELEMENT_ID__=-1}};var KP=new q("");KP.__NG_ELEMENT_ID__=n=>{let e=bt();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new Q(204,!1)};var QP="ngOriginalError";function qp(n){return n[QP]}var ZC=!0,tm=(()=>{class n{static{this.__NG_ELEMENT_ID__=YP}static{this.__NG_ENV_ID__=t=>t}}return n})(),hg=class extends tm{constructor(e){super(),this._lView=e}onDestroy(e){return bC(this._lView,e),()=>gP(this._lView,e)}};function YP(){return new hg(xe())}var Qo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})();var fg=class extends Ne{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,fC()&&(this.destroyRef=B(tm,{optional:!0})??void 0,this.pendingTasks=B(Qo,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ge=fg;function $l(...n){}function JC(n){let e,t;function r(){n=$l;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _D(n){return queueMicrotask(()=>n()),()=>{n=$l}}var nm="isAngularZone",Hl=nm+"_ID",ZP=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ZC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ek(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(nm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JP,$l,$l);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JP={};function rm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){JC(()=>{n.callbackScheduled=!1,pg(n),n.isCheckStableRunning=!0,rm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pg(n)}function ek(n){let e=()=>{XP(n)},t=ZP++;n._inner=n._inner.fork({name:"angular",properties:{[nm]:!0,[Hl]:t,[Hl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(tk(u))return r.invokeTask(o,s,a,u);try{return wD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ID(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return wD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nk(u)&&e(),ID(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pg(n),rm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ID(n){n._nesting--,rm(n)}var ql=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ge,this.onMicrotaskEmpty=new Ge,this.onStable=new Ge,this.onError=new Ge}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tk(n){return XC(n,"__ignore_ng_zone__")}function nk(n){return XC(n,"__scheduler_tick__")}function XC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function rk(n="zone.js",e){return n==="noop"?new ql:n==="zone.js"?new pe(e):n}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&qp(e);for(;t&&qp(t);)t=qp(t);return t||null}},ik=new q("",{providedIn:"root",factory:()=>{let n=B(pe),e=B(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function ok(){return hd(bt(),xe())}function hd(n,e){return new Or(Jt(n,e))}var Or=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=ok}}return n})();function eb(n){return(n.flags&128)===128}var tb=new Map,sk=0;function ak(){return sk++}function uk(n){tb.set(n[ad],n)}function gg(n){tb.delete(n[ad])}var ED="__ngContext__";function Ci(n,e){Tr(e)?(n[ED]=e[ad],uk(e)):n[ED]=e}function nb(n){return ib(n[ja])}function rb(n){return ib(n[un])}function ib(n){for(;n!==null&&!Jn(n);)n=n[un];return n}var mg;function ob(n){mg=n}function ck(){if(mg!==void 0)return mg;if(typeof document<"u")return document;throw new Q(210,!1)}var fd=new q("",{providedIn:"root",factory:()=>lk}),lk="ng",im=new q(""),Nt=new q("",{providedIn:"platform",factory:()=>"unknown"});var om=new q("",{providedIn:"root",factory:()=>ck().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dk="h",hk="b";var fk=()=>null;function sm(n,e,t=!1){return fk(n,e,t)}var sb=!1,pk=new q("",{providedIn:"root",factory:()=>sb});var wl;function gk(){if(wl===void 0&&(wl=null,cn.trustedTypes))try{wl=cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wl}function DD(n){return gk()?.createScriptURL(n)||n}var zl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UD})`}};function za(n){return n instanceof zl?n.changingThisBreaksApplicationSecurity:n}function am(n,e){let t=mk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${UD})`)}return t===e}function mk(n){return n instanceof zl&&n.getTypeName()||null}var yk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ab(n){return n=String(n),n.match(yk)?n:"unsafe:"+n}var pd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(pd||{});function vk(n){let e=cb();return e?e.sanitize(pd.URL,n)||"":am(n,"URL")?za(n):ab(id(n))}function _k(n){let e=cb();if(e)return DD(e.sanitize(pd.RESOURCE_URL,n)||"");if(am(n,"ResourceURL"))return DD(za(n));throw new Q(904,!1)}function wk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?_k:vk}function ub(n,e,t){return wk(e,t)(n)}function cb(){let n=xe();return n&&n[Cn].sanitizer}function lb(n){return n instanceof Function?n():n}function Ik(n){return(n??B(Bt)).get(Nt)==="browser"}var Qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qn||{}),Ek;function um(n,e){return Ek(n,e)}function Ao(n,e,t,r,i){if(r!=null){let o,s=!1;Jn(r)?o=r:Tr(r)&&(s=!0,r=r[Zn]);let a=Tn(r);n===0&&t!==null?i==null?gb(e,t,a):Gl(e,t,a,i||null,!0):n===1&&t!==null?Gl(e,t,a,i||null,!0):n===2?Vk(e,a,s):n===3&&e.destroyNode(a),o!=null&&jk(e,n,o,t,i)}}function Dk(n,e){return n.createText(e)}function Ck(n,e,t){n.setValue(e,t)}function db(n,e,t){return n.createElement(e,t)}function bk(n,e){hb(n,e),e[Zn]=null,e[dn]=null}function Tk(n,e,t,r,i,o){r[Zn]=i,r[dn]=e,gd(n,r,t,1,i,o)}function hb(n,e){e[Cn].changeDetectionScheduler?.notify(9),gd(n,e,e[Xe],2,null,null)}function Sk(n){let e=n[ja];if(!e)return zp(n[de],n);for(;e;){let t=null;if(Tr(e))t=e[ja];else{let r=e[Zt];r&&(t=r)}if(!t){for(;e&&!e[un]&&e!==n;)Tr(e)&&zp(e[de],e),e=e[Ct];e===null&&(e=n),Tr(e)&&zp(e[de],e),t=e&&e[un]}e=t}}function Ak(n,e,t,r){let i=Zt+r,o=t.length;r>0&&(t[i-1][un]=e),r<o-Zt?(e[un]=t[i],ZD(t,Zt+r,e)):(t.push(e),e[un]=null),e[Ct]=t;let s=e[Vo];s!==null&&t!==s&&fb(s,e);let a=e[Lo];a!==null&&a.insertView(n),sg(e),e[ne]|=128}function fb(n,e){let t=n[Fl],r=e[Ct];if(Tr(r))n[ne]|=Vl.HasTransplantedViews;else{let i=r[Ct][bn];e[bn]!==i&&(n[ne]|=Vl.HasTransplantedViews)}t===null?n[Fl]=[e]:t.push(e)}function cm(n,e){let t=n[Fl],r=t.indexOf(e);t.splice(r,1)}function yg(n,e){if(n.length<=Zt)return;let t=Zt+e,r=n[t];if(r){let i=r[Vo];i!==null&&i!==n&&cm(i,r),e>0&&(n[t-1][un]=r[un]);let o=Rl(n,Zt+e);bk(r[de],r);let s=o[Lo];s!==null&&s.detachView(o[de]),r[Ct]=null,r[un]=null,r[ne]&=-129}return r}function pb(n,e){if(!(e[ne]&256)){let t=e[Xe];t.destroyNode&&gd(n,e,t,3,null,null),Sk(e)}}function zp(n,e){if(e[ne]&256)return;let t=ye(null);try{e[ne]&=-129,e[ne]|=256,e[Yt]&&yp(e[Yt]),xk(n,e),Mk(n,e),e[de].type===1&&e[Xe].destroy();let r=e[Vo];if(r!==null&&Jn(e[Ct])){r!==e[Ct]&&cm(r,e);let i=e[Lo];i!==null&&i.detachView(n)}gg(e)}finally{ye(t)}}function Mk(n,e){let t=n.cleanup,r=e[kl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[kl]=null);let i=e[br];if(i!==null){e[br]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function xk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Di)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];In(4,a,u);try{u.call(a)}finally{In(5,a,u)}}else{In(4,i,o);try{o.call(i)}finally{In(5,i,o)}}}}}function Rk(n,e,t){return Nk(n,e.parent,t)}function Nk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Dn.None||o===Dn.Emulated)return null}return Jt(r,t)}}function Gl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gb(n,e,t){n.appendChild(e,t)}function CD(n,e,t,r,i){r!==null?Gl(n,e,t,r,i):gb(n,e,t)}function mb(n,e){return n.parentNode(e)}function Pk(n,e){return n.nextSibling(e)}function kk(n,e,t){return Fk(n,e,t)}function Ok(n,e,t){return n.type&40?Jt(n,t):null}var Fk=Ok,bD;function lm(n,e,t,r){let i=Rk(n,r,e),o=e[Xe],s=r.parent||e[dn],a=kk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)CD(o,i,t[u],a,!1);else CD(o,i,t,a,!1);bD!==void 0&&bD(o,r,e,t,i)}function Pa(n,e){if(e!==null){let t=e.type;if(t&3)return Jt(e,n);if(t&4)return vg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pa(n,r);{let i=n[e.index];return Jn(i)?vg(-1,i):Tn(i)}}else{if(t&128)return Pa(n,e.next);if(t&32)return um(e,n)()||Tn(n[e.index]);{let r=yb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ii(n[bn]);return Pa(i,r)}else return Pa(n,e.next)}}}return null}function yb(n,e){if(e!==null){let r=n[bn][dn],i=e.projection;return r.projection[i]}return null}function vg(n,e){let t=Zt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Pa(r,i)}return e[wi]}function Vk(n,e,t){n.removeChild(null,e,t)}function dm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Ci(Tn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)dm(n,e,t.child,r,i,o,!1),Ao(e,n,i,a,o);else if(u&32){let l=um(t,r),h;for(;h=l();)Ao(e,n,i,h,o);Ao(e,n,i,a,o)}else u&16?Lk(n,e,r,t,i,o):Ao(e,n,i,a,o);t=s?t.projectionNext:t.next}}function gd(n,e,t,r,i,o){dm(t,r,n.firstChild,e,i,o,!1)}function Lk(n,e,t,r,i,o){let s=t[bn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ao(e,n,i,h,o)}else{let l=u,h=s[Ct];eb(r)&&(l.flags|=128),dm(n,e,l,h,i,o,!0)}}function jk(n,e,t,r,i){let o=t[wi],s=Tn(t);o!==s&&Ao(e,n,r,o,i);for(let a=Zt;a<t.length;a++){let u=t[a];gd(u[de],u,n,e,r,o)}}function Bk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qn.Important),n.setStyle(t,r,i,o))}}function Uk(n,e,t){n.setAttribute(e,"style",t)}function vb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _b(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&eg(n,e,r),i!==null&&vb(n,e,i),o!==null&&Uk(n,e,o)}var Yo={};function Ga(n=1){wb(Ut(),xe(),Wo()+n,!1)}function wb(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Tl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Sl(e,o,0,t)}Ei(t)}function Ie(n,e=ue.Default){let t=xe();if(t===null)return V(n,e);let r=bt();return WC(r,t,Dt(n),e)}function Ib(){let n="invalid";throw new Error(n)}function Eb(n,e,t,r,i,o){let s=ye(null);try{let a=null;i&Sr.SignalBased&&(a=e[r][qn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Sr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):yC(e,a,r,o)}finally{ye(s)}}function $k(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ei(~i);else{let o=i,s=t[++r],a=t[++r];SP(s,o);let u=e[o];a(2,u)}}}finally{Ei(-1)}}function md(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Zn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),DC(p),p[Ct]=p[Go]=n,p[ln]=t,p[Cn]=s||n&&n[Cn],p[Xe]=a||n&&n[Xe],p[Fo]=u||n&&n[Fo]||null,p[dn]=o,p[ad]=ak(),p[Pl]=h,p[pC]=l,p[bn]=e.type==2?n[bn]:p,p}function yd(n,e,t,r,i){let o=n.data[e];if(o===null)o=Hk(n,e,t,r,i),TP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=EP();o.injectorIndex=s===null?-1:s.injectorIndex}return qa(o,!0),o}function Hk(n,e,t,r,i){let o=xC(),s=RC(),a=s?o:o&&o.parent,u=n.data[e]=Kk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Db(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Cb(n,e,t,r,i){let o=Wo(),s=r&2;try{Ei(-1),s&&e.length>Mr&&wb(n,e,Mr,!1),In(s?2:0,i),t(r,i)}finally{Ei(o),In(s?3:1,i)}}function bb(n,e,t){if(mC(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}function Tb(n,e,t){SC()&&(eO(n,e,t,Jt(t,e)),(t.flags&64)===64&&Nb(n,e,t))}function Sb(n,e,t=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Ab(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=hm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hm(n,e,t,r,i,o,s,a,u,l,h){let p=Mr+r,m=p+i,y=qk(p,m),b=typeof l=="function"?l():l;return y[de]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function qk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Yo);return t}function zk(n,e,t,r){let o=r.get(pk,sb)||t===Dn.ShadowDom,s=n.selectRootElement(e,o);return Gk(s),s}function Gk(n){Wk(n)}var Wk=()=>null;function Kk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return _P()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Sr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?SD(r,t,l,a,u):SD(r,t,l,a)}return r}function SD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Qk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=TD(0,p.inputs,h,u,y),l=TD(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!$g(e)?dO(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Yk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Mb(n,e,t,r,i,o,s,a){let u=Jt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(fm(n,t,h,r,i),ud(e)&&Zk(t,e.index)):e.type&3?(r=Yk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Zk(n,e){let t=kr(e,n);t[ne]&16||(t[ne]|=64)}function xb(n,e,t,r){if(SC()){let i=r===null?null:{"":-1},o=nO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Rb(n,e,t,s,i,a),i&&rO(t,r,i)}t.mergedAttrs=Va(t.mergedAttrs,t.attrs)}function Rb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)lg(Ul(t,e),n,r[l].type);oO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Db(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Va(t.mergedAttrs,h.hostAttrs),sO(n,t,e,u,h),iO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Qk(n,t,o)}function Jk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Xk(s)!=a&&s.push(a),s.push(t,r,o)}}function Xk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ud(t)&&aO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ul(t,e),Ci(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=jo(e,n,a,t);if(Ci(l,e),s!==null&&lO(e,a-i,l,u,t,s),xr(u)){let h=kr(t.index,e);h[ln]=jo(e,n,a,t)}}}function Nb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=AP();try{Ei(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];ag(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tO(u,l)}}finally{Ei(-1),ag(s)}}function tO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(jN(e,s.selectors,!1))if(r||(r=[]),xr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;_g(n,e,u)}else r.unshift(s),_g(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _g(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function iO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xr(e)&&(t[""]=n)}}function oO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=No(i.type,!0)),s=new Di(o,xr(i),Ie);n.blueprint[r]=s,t[r]=s,Jk(n,e,r,Db(n,t,i.hostVars,Yo),i)}function aO(n,e,t){let r=Jt(e,n),i=Ab(t),o=n[Cn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=vd(n,md(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function uO(n,e,t,r,i,o){let s=Jt(n,e);cO(e[Xe],s,o,n.value,t,r,i)}function cO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?id(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];Eb(r,t,u,l,h,p)}}function dO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Pb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function kb(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];PC(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function vd(n,e){return n[ja]?n[dD][un]=e:n[ja]=e,n[dD]=e,e}function wg(n,e,t){PC(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function hO(n){return n[kl]??=[]}function fO(n){return n.cleanup??=[]}function Ob(n,e){let t=n[Fo],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function fm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];Eb(h,l,r,a,u,i)}}function pO(n,e,t){let r=IC(e,n);Ck(n[Xe],r,t)}function gO(n,e){let t=kr(e,n),r=t[de];mO(r,t);let i=t[Zn];i!==null&&t[Pl]===null&&(t[Pl]=sm(i,t[Fo])),pm(r,t,t[ln])}function mO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pm(n,e,t){Wg(e);try{let r=n.viewQuery;r!==null&&wg(1,r,t);let i=n.template;i!==null&&Cb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Lo]?.finishViewCreation(n),n.staticContentQueries&&kb(n,e),n.staticViewQueries&&wg(2,n.viewQuery,t);let o=n.components;o!==null&&yO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Kg()}}function yO(n,e){for(let t=0;t<e.length;t++)gO(n,e[t])}function vO(n,e,t,r){let i=ye(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=md(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Vo]=l;let h=n[Lo];return h!==null&&(u[Lo]=h.createEmbeddedView(o)),pm(o,u,t),u}finally{ye(i)}}function AD(n,e){return!e||e.firstChild===null||eb(n)}function _O(n,e,t,r=!0){let i=e[de];if(Ak(i,e,n,t),r){let s=vg(t,n),a=e[Xe],u=mb(a,n[wi]);u!==null&&Tk(i,n[dn],a,e,u,s)}let o=e[Pl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Wl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Tn(o)),Jn(o)&&wO(o,r);let s=t.type;if(s&8)Wl(n,e,t.child,r);else if(s&32){let a=um(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=yb(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ii(e[bn]);Wl(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function wO(n,e){for(let t=Zt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&Wl(r[de],r,i,e)}n[wi]!==n[Zn]&&e.push(n[wi])}var Fb=[];function IO(n){return n[Yt]??EO(n)}function EO(n){let e=Fb.pop()??Object.create(CO);return e.lView=n,e}function DO(n){n.lView[Yt]!==n&&(n.lView=null,Fb.push(n))}var CO=ce(L({},ba),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ld(n.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function bO(n){let e=n[Yt]??Object.create(TO);return e.lView=n,e}var TO=ce(L({},ba),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ii(n.lView);for(;e&&!Vb(e[de]);)e=Ii(e);e&&CC(e)},consumerOnSignalRead(){this.lView[Yt]=this}});function Vb(n){return n.type!==2}var SO=100;function Lb(n,e=!0,t=0){let r=n[Cn],i=r.rendererFactory,o=!1;o||i.begin?.();try{AO(n,t)}catch(s){throw e&&Ob(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function AO(n,e){let t=NC();try{fD(!0),Ig(n,e);let r=0;for(;cd(n);){if(r===SO)throw new Q(103,!1);r++,Ig(n,1)}}finally{fD(t)}}function MO(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Cn].inlineEffectRunner?.flush(),Wg(e);let a=!0,u=null,l=null;o||(Vb(n)?(l=IO(e),u=Hc(l)):wE()===null?(a=!1,l=bO(e),u=Hc(l)):e[Yt]&&(yp(e[Yt]),e[Yt]=null));try{DC(e),CP(n.bindingStartIndex),t!==null&&Cb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Tl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Sl(e,y,0,null),Up(e,0)}if(s||xO(e),jb(e,0),n.contentQueries!==null&&kb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Tl(e,y)}else{let y=n.contentHooks;y!==null&&Sl(e,y,1),Up(e,1)}$k(n,e);let p=n.components;p!==null&&Ub(e,p,0);let m=n.viewQuery;if(m!==null&&wg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Tl(e,y)}else{let y=n.viewHooks;y!==null&&Sl(e,y,2),Up(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Bp]){for(let y of e[Bp])y();e[Bp]=null}o||(e[ne]&=-73)}catch(h){throw o||ld(e),h}finally{l!==null&&(gp(l,u),a&&DO(l)),Kg()}}function jb(n,e){for(let t=nb(n);t!==null;t=rb(t))for(let r=Zt;r<t.length;r++){let i=t[r];Bb(i,e)}}function xO(n){for(let e=nb(n);e!==null;e=rb(e)){if(!(e[ne]&Vl.HasTransplantedViews))continue;let t=e[Fl];for(let r=0;r<t.length;r++){let i=t[r];CC(i)}}}function RO(n,e,t){let r=kr(e,n);Bb(r,t)}function Bb(n,e){Gg(n)&&Ig(n,e)}function Ig(n,e){let r=n[de],i=n[ne],o=n[Yt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&mp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)MO(r,n,r.template,n[ln]);else if(i&8192){jb(n,1);let a=r.components;a!==null&&Ub(n,a,1)}}function Ub(n,e,t){for(let r=0;r<e.length;r++)RO(n,e[r],t)}function gm(n,e){let t=NC()?64:1088;for(n[Cn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Ii(n);if(ig(n)&&!r)return n;n=r}return null}var bi=class{get rootNodes(){let e=this._lView,t=e[de];return Wl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Jn(e)){let t=e[Ol],r=t?t.indexOf(this):-1;r>-1&&(yg(e,r),Rl(t,r))}this._attachedToViewContainer=!1}pb(this._lView[de],this._lView)}onDestroy(e){bC(this._lView,e)}markForCheck(){gm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){sg(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Lb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ig(this._lView),t=this._lView[Vo];t!==null&&!e&&cm(t,this._lView),hb(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=ig(this._lView),r=this._lView[Vo];r!==null&&!t&&fb(r,this._lView),sg(this._lView)}},mm=(()=>{class n{static{this.__NG_ELEMENT_ID__=kO}}return n})(),NO=mm,PO=class extends NO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=vO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new bi(i)}};function kO(){return OO(bt(),xe())}function OO(n,e){return n.type&4?new PO(e,n,hd(n,e)):null}var S9=new RegExp(`^(\\d+)*(${hk}|${dk})*(.*)`);var FO=()=>null;function MD(n,e){return FO(n,e)}var Bo=class{},ym=new q("",{providedIn:"root",factory:()=>!1});var $b=new q(""),Hb=new q(""),Eg=class{},Kl=class{};function VO(n){let e=Error(`No component factory found for ${Rt(n)}.`);return e[LO]=n,e}var LO="ngComponent";var Dg=class{resolveComponentFactory(e){throw VO(e)}},Uo=class{static{this.NULL=new Dg}},$o=class{},Ai=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>jO()}}return n})();function jO(){let n=xe(),e=bt(),t=kr(e.index,n);return(Tr(t)?t:n)[Xe]}var BO=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>null})}}return n})();function Cg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tD(i,a);else if(o==2){let u=a,l=e[++s];r=tD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ql=class extends Uo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ar(e);return new Ho(t,this.ngModule)}};function xD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Sr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Sr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function UO(n){let e=n.toLowerCase();return e==="svg"?dP:e==="math"?hP:null}var Ho=class extends Kl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=xD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return xD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=HN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ug(e,s):e,u=a.get($o,null);if(u===null)throw new Q(407,!1);let l=a.get(BO,null),h=a.get(Bo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?zk(m,r,this.componentDef.encapsulation,a):db(m,y,UO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;b!==null&&(M=sm(b,a,!0));let F=hm(0,null,null,1,0,null,null,null,null,null,null),H=md(null,F,null,A,null,null,p,m,a,null,M);Wg(H);let O,W,ee=null;try{let Y=this.componentDef,I,v=null;Y.findHostDirectiveDefs?(I=[],v=new Map,Y.findHostDirectiveDefs(Y,I,v),I.push(Y)):I=[Y];let w=$O(H,b);ee=HO(w,b,Y,I,H,p,m),W=EC(F,Mr),b&&GO(m,Y,b,r),t!==void 0&&WO(W,this.ngContentSelectors,t),O=zO(ee,Y,I,v,H,[KO]),pm(F,H,null)}catch(Y){throw ee!==null&&gg(ee),gg(H),Y}finally{Kg()}return new bg(this.componentType,O,hd(W,H),H,W)}finally{ye(o)}}},bg=class extends Eg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new bi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;fm(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=kr(this._tNode.index,o);gm(s,1)}}get injector(){return new _i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $O(n,e){let t=n[de],r=Mr;return n[r]=e,yd(t,r,2,"#host",null)}function HO(n,e,t,r,i,o,s){let a=i[de];qO(r,n,e,s);let u=null;e!==null&&(u=sm(e,i[Fo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=md(i,Ab(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&_g(a,n,r.length-1),vd(i,p),i[n.index]=p}function qO(n,e,t,r){for(let i of n)e.mergedAttrs=Va(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cg(e,e.mergedAttrs,!0),t!==null&&_b(r,t,e))}function zO(n,e,t,r,i,o){let s=bt(),a=i[de],u=Jt(s,i);Rb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=jo(i,a,p,s);Ci(m,i)}Nb(a,i,s),u&&Ci(u,i);let l=jo(i,a,s.directiveStart+s.componentOffset,s);if(n[ln]=i[ln]=l,o!==null)for(let h of o)h(l,e);return bb(a,s,i),l}function GO(n,e,t,r){if(r)eg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=qN(e.selectors[0]);i&&eg(n,t,i),o&&o.length>0&&vb(n,t,o.join(" "))}}function WO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function KO(){let n=bt();Jg(xe()[de],n)}var Wa=(()=>{class n{static{this.__NG_ELEMENT_ID__=QO}}return n})();function QO(){let n=bt();return ZO(n,xe())}var YO=Wa,qb=class extends YO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hd(this._hostTNode,this._hostLView)}get injector(){return new _i(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xg(this._hostTNode,this._hostLView);if(UC(e)){let t=Bl(e,this._hostLView),r=jl(e),i=t[de].data[r+8];return new _i(i,t)}else return new _i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=MD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,AD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!aP(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new Ho(Ar(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(jt,null);A&&(o=A)}let h=Ar(u.componentType??{}),p=MD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,AD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(fP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ct],l=new qb(u,u[dn],u[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return _O(s,i,o,r),e.attachToViewContainerRef(),ZD(Gp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=yg(this._lContainer,t);r&&(Rl(Gp(this._lContainer),t),pb(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=yg(this._lContainer,t);return r&&Rl(Gp(this._lContainer),t)!=null?new bi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RD(n){return n[Ol]}function Gp(n){return n[Ol]||(n[Ol]=[])}function ZO(n,e){let t,r=e[n.index];return Jn(r)?t=r:(t=Pb(r,e,null,n),e[n.index]=t,vd(e,t)),XO(t,e,n,r),new qb(t,n,e)}function JO(n,e){let t=n[Xe],r=t.createComment(""),i=Jt(e,n),o=mb(t,i);return Gl(t,o,r,Pk(t,i),!1),r}var XO=n1,e1=()=>!1;function t1(n,e,t){return e1(n,e,t)}function n1(n,e,t,r){if(n[wi])return;let i;t.type&8?i=Tn(r):i=JO(e,t),n[wi]=i}var ND=new Set;function Ka(n){ND.has(n)||(ND.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function r1(n){return typeof n=="function"&&n[qn]!==void 0}function Qa(n,e){Ka("NgSignals");let t=RE(n),r=t[qn];return e?.equal&&(r.equal=e.equal),t.set=i=>vp(r,i),t.update=i=>NE(r,i),t.asReadonly=i1.bind(t),t}function i1(){let n=this[qn];if(n.readonlyFn===void 0){let e=()=>this();e[qn]=n,n.readonlyFn=e}return n.readonlyFn}function zb(n){return r1(n)&&typeof n.set=="function"}function o1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(c1))}return o}return Yl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>l1(o));e.push(u)}),a1(),Promise.all(e).then(()=>{})}var Yl=new Map,s1=new Set;function a1(){let n=Yl;return Yl=new Map,n}function u1(){return Yl.size===0}function c1(n){return typeof n=="string"?n:n.text()}function l1(n){s1.delete(n)}function d1(n){return Object.getPrototypeOf(n.prototype).constructor}function Xn(n){let e=d1(n.type),t=!0,r=[n];for(;e;){let i;if(xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Il(n.inputs),s.inputTransforms=Il(n.inputTransforms),s.declaredInputs=Il(n.declaredInputs),s.outputs=Il(n.outputs);let a=i.hostBindings;a&&m1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&p1(n,u),l&&g1(n,l),h1(n,i),dN(n.outputs,i.outputs),xr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Xn&&(t=!1)}}e=Object.getPrototypeOf(e)}f1(r)}function h1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function f1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Va(i.hostAttrs,t=Va(t,i.hostAttrs))}}function Il(n){return n===Po?{}:n===Qt?[]:n}function p1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function g1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function m1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function vm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Rr=class{},Ba=class{};var Zl=class extends Rr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ql(this);let o=sC(e);this._bootstrapComponents=lb(o.bootstrap),this._r3Injector=YC(e,t,[{provide:Rr,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jl=class extends Ba{constructor(e){super(),this.moduleType=e}create(e){return new Zl(this.moduleType,e,[])}};function y1(n,e,t){return new Zl(n,e,t,!1)}var Tg=class extends Rr{constructor(e){super(),this.componentFactoryResolver=new Ql(this),this.instance=null;let t=new La([...e.providers,{provide:Rr,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],e.parent||qg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _d(n,e,t=null){return new Tg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Gb(n){return _1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function v1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function _1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ya(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function w1(n){return(n.flags&32)===32}function I1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=yd(e,n,4,s||null,a||null);xb(e,t,h,Ll(l,u)),Jg(e,h);let p=h.tView=hm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function E1(n,e,t,r,i,o,s,a,u,l){let h=t+Mr,p=e.firstCreatePass?I1(h,e,n,r,i,o,s,a,u):e.data[h];qa(p,!1);let m=D1(e,n,p,t);Yg()&&lm(e,n,m,p),Ci(m,n);let y=Pb(m,n,m,p);return n[h]=y,vd(n,y),t1(y,p,n),zg(p)&&Tb(e,n,p),u!=null&&Sb(n,p,l),p}function _m(n,e,t,r,i,o,s,a){let u=xe(),l=Ut(),h=Ll(l.consts,o);return E1(u,l,n,e,t,r,i,h,s,a),_m}var D1=C1;function C1(n,e,t,r){return Zg(!0),e[Xe].createComment("")}var Mo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Mo||{}),Wb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Sg=class n{constructor(){this.ngZone=B(pe),this.scheduler=B(Bo),this.errorHandler=B(Kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Mo.EarlyRead,Mo.Write,Mo.MixedReadWrite,Mo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}},Ag=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function wm(n,e){!e?.injector&&oP(wm);let t=e?.injector??B(Bt);return Ik(t)?(Ka("NgAfterNextRender"),T1(n,t,e,!0)):S1}function b1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function T1(n,e,t,r){let i=e.get(Wb);i.impl??=e.get(Sg);let o=t?.phase??Mo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(tm):null,a=new Ag(i.impl,b1(n,o),r,s);return i.impl.register(a),a}var S1={destroy(){}};function Za(n,e,t,r){let i=xe(),o=dd();if(Ya(i,o,e)){let s=Ut(),a=Qg();uO(a,i,n,e,t,r)}return Za}function A1(n,e,t,r){return Ya(n,dd(),t)?e+id(t)+r:Yo}function El(n,e){return n<<17|e<<2}function Ti(n){return n>>17&32767}function M1(n){return(n&2)==2}function x1(n,e){return n&131071|e<<17}function Mg(n){return n|2}function qo(n){return(n&131068)>>2}function Wp(n,e){return n&-131069|e<<2}function R1(n){return(n&1)===1}function xg(n){return n|1}function N1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ti(s),u=qo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ha(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Ti(n[a+1]);n[r+1]=El(m,a),m!==0&&(n[m+1]=Wp(n[m+1],r)),n[a+1]=x1(n[a+1],r)}else n[r+1]=El(a,0),a!==0&&(n[a+1]=Wp(n[a+1],r)),a=r;else n[r+1]=El(u,0),a===0?a=r:n[u+1]=Wp(n[u+1],r),u=r;l&&(n[r+1]=Mg(n[r+1])),PD(n,h,r,!0),PD(n,h,r,!1),P1(e,h,n,r,o),s=El(a,u),o?e.classBindings=s:e.styleBindings=s}function P1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ha(o,e)>=0&&(t[r+1]=xg(t[r+1]))}function PD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ti(i):qo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];k1(u,e)&&(a=!0,n[s+1]=r?xg(l):Mg(l)),s=r?Ti(l):qo(l)}a&&(n[t+1]=r?Mg(i):xg(i))}function k1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ha(n,e)>=0:!1}function Im(n,e,t){let r=xe(),i=dd();if(Ya(r,i,e)){let o=Ut(),s=Qg();Mb(o,s,r,n,e,r[Xe],t,!1)}return Im}function kD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";fm(n,t,o[s],s,r)}function wd(n,e){return O1(n,e,null,!0),wd}function O1(n,e,t,r){let i=xe(),o=Ut(),s=bP(2);if(o.firstUpdatePass&&V1(o,n,s,r),e!==Yo&&Ya(i,s,e)){let a=o.data[Wo()];$1(o,a,i,i[Xe],n,i[s+1]=H1(e,t),r,s)}}function F1(n,e){return e>=n.expandoStartIndex}function V1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Wo()],s=F1(n,t);q1(o,r)&&e===null&&!s&&(e=!1),e=L1(i,o,e,r),N1(i,o,e,t,s,r)}}function L1(n,e,t,r){let i=MP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Kp(null,n,e,t,r),t=Ua(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Kp(i,n,e,t,r),o===null){let u=j1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Kp(null,n,e,u[1],r),u=Ua(u,e.attrs,r),B1(n,e,r,u))}else o=U1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function j1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qo(r)!==0)return n[Ti(r)]}function B1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ti(i)]=r}function U1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ua(r,s,t)}return Ua(r,e.attrs,t)}function Kp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ua(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ua(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),RN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function $1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=R1(l)?OD(u,e,t,i,qo(l),s):void 0;if(!Xl(h)){Xl(o)||M1(l)&&(o=OD(u,null,t,i,a,s));let p=IC(Wo(),t);Bk(r,s,p,i,o)}}function OD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Yo&&(m=p?Qt:void 0);let y=p?Lp(m,r):h===r?m:void 0;if(l&&!Xl(y)&&(y=Lp(u,r)),Xl(y)&&(a=y,s))return a;let b=n[i+1];i=s?Ti(b):qo(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Lp(u,r))}return a}function Xl(n){return n!==void 0}function H1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rt(za(n)))),n}function q1(n,e){return(n.flags&(e?8:16))!==0}function z1(n,e,t,r,i,o){let s=e.consts,a=Ll(s,i),u=yd(e,n,2,r,a);return xb(e,t,u,Ll(s,o)),u.attrs!==null&&Cg(u,u.attrs,!1),u.mergedAttrs!==null&&Cg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function nt(n,e,t,r){let i=xe(),o=Ut(),s=Mr+n,a=i[Xe],u=o.firstCreatePass?z1(s,o,i,e,t,r):o.data[s],l=G1(o,i,u,a,e,n);i[s]=l;let h=zg(u);return qa(u,!0),_b(a,l,u),!w1(u)&&Yg()&&lm(o,i,l,u),mP()===0&&Ci(l,i),yP(),h&&(Tb(o,i,u),bb(o,u,i)),r!==null&&Sb(i,u),nt}function ot(){let n=bt();RC()?DP():(n=n.parent,qa(n,!1));let e=n;wP(e)&&IP(),vP();let t=Ut();return t.firstCreatePass&&(Jg(t,n),mC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&FP(e)&&kD(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&VP(e)&&kD(t,e,xe(),e.stylesWithoutHost,!1),ot}function Ja(n,e,t,r){return nt(n,e,t,r),ot(),Ja}var G1=(n,e,t,r,i,o)=>(Zg(!0),db(r,i,NP()));function Kb(){return xe()}var ed="en-US";var W1=ed;function K1(n){typeof n=="string"&&(W1=n.toLowerCase().replace(/_/g,"-"))}var Q1=(n,e,t)=>{};function er(n,e,t,r){let i=xe(),o=Ut(),s=bt();return Qb(o,i,i[Xe],s,n,e,r),er}function Y1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[kl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Qb(n,e,t,r,i,o,s){let a=zg(r),l=n.firstCreatePass&&fO(n),h=e[ln],p=hO(e),m=!0;if(r.type&3||s){let A=Jt(r,e),M=s?s(A):A,F=p.length,H=s?W=>s(Tn(W[r.index])):r.index,O=null;if(!s&&a&&(O=Y1(n,e,i,r.index)),O!==null){let W=O.__ngLastListenerFn__||O;W.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,m=!1}else{o=VD(r,e,h,o),Q1(A,i,o);let W=t.listen(M,i,o);p.push(o,W),l&&l.push(i,H,F,F+1)}}else o=VD(r,e,h,o);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let M=0;M<A;M+=2){let F=b[M],H=b[M+1],ee=e[F][H].subscribe(o),Y=p.length;p.push(o,ee),l&&l.push(i,r.index,Y,-(Y+1))}}}function FD(n,e,t,r){let i=ye(null);try{return In(6,e,t),t(r)!==!1}catch(o){return Ob(n,o),!1}finally{In(7,e,t),ye(i)}}function VD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?kr(n.index,e):e;gm(s,5);let a=FD(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=FD(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Yb(n=1){return RP(n)}function Pt(n,e=""){let t=xe(),r=Ut(),i=n+Mr,o=r.firstCreatePass?yd(r,i,1,e,null):r.data[i],s=Z1(r,t,o,e,n);t[i]=s,Yg()&&lm(r,t,s,o),qa(o,!1)}var Z1=(n,e,t,r,i)=>(Zg(!0),Dk(e[Xe],r));function Em(n){return Id("",n,""),Em}function Id(n,e,t){let r=xe(),i=A1(r,n,e,t);return i!==Yo&&pO(r,Wo(),i),Id}function Dm(n,e,t){zb(e)&&(e=e());let r=xe(),i=dd();if(Ya(r,i,e)){let o=Ut(),s=Qg();Mb(o,s,r,n,e,r[Xe],t,!1)}return Dm}function Zb(n,e){let t=zb(n);return t&&n.set(e),t}function Cm(n,e){let t=xe(),r=Ut(),i=bt();return Qb(r,t,t[Xe],i,n,e),Cm}function J1(n,e,t){let r=Ut();if(r.firstCreatePass){let i=xr(n);Rg(t,r.data,r.blueprint,i,!0),Rg(e,r.data,r.blueprint,i,!1)}}function Rg(n,e,t,r,i){if(n=Dt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Rg(n[o],e,t,r,i);else{let o=Ut(),s=xe(),a=bt(),u=Oo(n)?n:Dt(n.provide),l=hC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Oo(n)||!n.multi){let y=new Di(l,i,Ie),b=Yp(u,e,i?h:h+m,p);b===-1?(lg(Ul(a,s),o,u),Qp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Yp(u,e,h+m,p),b=Yp(u,e,h,h+m),A=y>=0&&t[y],M=b>=0&&t[b];if(i&&!M||!i&&!A){lg(Ul(a,s),o,u);let F=tF(i?eF:X1,t.length,i,r,l);!i&&M&&(t[b].providerFactory=F),Qp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=Jb(t[i?b:y],l,!i&&r);Qp(o,n,y>-1?y:b,F)}!i&&r&&M&&t[b].componentProviders++}}}function Qp(n,e,t,r){let i=Oo(e),o=JN(e);if(i||o){let u=(o?Dt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Jb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Yp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function X1(n,e,t,r){return Ng(this.multi,[])}function eF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=jo(t,t[de],this.providerFactory.index,r);o=a.slice(0,s),Ng(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Ng(i,o);return o}function Ng(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function tF(n,e,t,r,i){let o=new Di(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,Jb(o,i,r&&!t),o}function Xa(n,e=[]){return t=>{t.providersResolver=(r,i)=>J1(r,i?i(n):n,e)}}var nF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cC(!1,t.type),i=r.length>0?_d([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(V(jt))})}}return n})();function Xb(n){Ka("NgStandalone"),n.getStandaloneInjector=e=>e.get(nF).getOrCreateStandaloneInjector(n)}var Dl=null;function rF(n){Dl!==null&&(n.defaultEncapsulation!==Dl.defaultEncapsulation||n.preserveWhitespaces!==Dl.preserveWhitespaces)||(Dl=n)}var Yn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},e0=new Yn("18.2.13");var Ed=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var bm=new q(""),eu=new q(""),Dd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Tm||(iF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(V(pe),V(Cd),V(eu))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Cd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Tm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function iF(n){Tm=n}var Tm;function Mi(n){return!!n&&typeof n.then=="function"}function t0(n){return!!n&&typeof n.subscribe=="function"}var bd=new q(""),n0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(bd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Mi(o))t.push(o);else if(t0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Sm=new q("");function oF(){xE(()=>{throw new Q(600,!1)})}function sF(n){return n.isBoundToModule}var aF=10;function uF(n,e,t){try{let r=t();return Mi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function r0(n,e){return Array.isArray(e)?e.reduce(r0,n):L(L({},n),e)}var Fr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(ik),this.afterRenderManager=B(Wb),this.zonelessEnabled=B(ym),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ne,this.afterTick=new Ne,this.componentTypes=[],this.components=[],this.isStable=B(Qo).hasPendingTasks.pipe(Z(t=>!t)),this._injector=B(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Kl;if(!this._injector.get(n0).done){let m=!i&&oC(t),y=!1;throw new Q(405,y)}let s;i?s=t:s=this._injector.get(Uo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=sF(s)?void 0:this._injector.get(Rr),u=r||s.selector,l=s.create(Bt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(bm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Al(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get($o,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<aF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)cF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Al(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Sm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Al(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Al(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function cF(n,e,t,r){if(!t&&!cd(n))return;Lb(n,e,t&&!r?0:1)}var Pg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Td=(()=>{class n{compileModuleSync(t){return new Jl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=sC(t),o=lb(i.declarations).reduce((s,a)=>{let u=Ar(a);return u&&s.push(new Ho(u)),s},[]);return new Pg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lF=new q("");function dF(n,e,t){let r=new Jl(t);return Promise.resolve(r)}function LD(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var hF=(()=>{class n{constructor(){this.zone=B(pe),this.changeDetectionScheduler=B(Bo),this.applicationRef=B(Fr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(ce(L({},i0()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:ko,multi:!0,useFactory:()=>{let r=B(hF,{optional:!0});return()=>r.initialize()}},{provide:ko,multi:!0,useFactory:()=>{let r=B(pF);return()=>{r.initialize()}}},e===!0?{provide:$b,useValue:!0}:[],{provide:Hb,useValue:t??ZC}]}function i0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var pF=(()=>{class n{constructor(){this.subscription=new Le,this.initialized=!1,this.zone=B(pe),this.pendingTasks=B(Qo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gF=(()=>{class n{constructor(){this.appRef=B(Fr),this.taskService=B(Qo),this.ngZone=B(pe),this.zonelessEnabled=B(ym),this.disableScheduling=B($b,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Le,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(Hb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ql||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?_D:JC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_D(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mF(){return typeof $localize<"u"&&$localize.locale||ed}var Am=new q("",{providedIn:"root",factory:()=>B(Am,ue.Optional|ue.SkipSelf)||mF()});var td=new q("");function Cl(n){return!n.moduleRef}function yF(n){let e=Cl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Cl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Cl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(td);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(td);s.add(o),n.moduleRef.onDestroy(()=>{Al(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return uF(r,t,()=>{let o=e.get(n0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Am,ed);if(K1(s||ed),Cl(n)){let a=e.get(Fr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return vF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function vF(n,e){let t=n.injector.get(Fr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var o0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>rk(r?.ngZone,ce(L({},i0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[fF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Bo,useExisting:gF}],u=y1(t.moduleType,this.injector,a);return yF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=r0({},r);return dF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(td,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(V(Bt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Oa=null,s0=new q("");function _F(n){if(Oa&&!Oa.get(s0,!1))throw new Q(400,!1);oF(),Oa=n;let e=n.get(o0);return EF(n),e}function Mm(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=a0();if(!s||s.injector.get(s0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):_F(wF(a,r))}return IF(i)}}function wF(n=[],e){return Bt.create({name:e,providers:[{provide:sd,useValue:"platform"},{provide:td,useValue:new Set([()=>Oa=null])},...n]})}function IF(n){let e=a0();if(!e)throw new Q(401,!1);return e}function a0(){return Oa?.get(o0)??null}function EF(n){n.get(im,null)?.forEach(t=>t())}function xm(){return!1}var xi=(()=>{class n{static{this.__NG_ELEMENT_ID__=DF}}return n})();function DF(n){return CF(bt(),xe(),(n&16)===16)}function CF(n,e,t){if(ud(n)&&!t){let r=kr(n.index,e);return new bi(r,r)}else if(n.type&175){let r=e[bn];return new bi(r,e)}return null}var kg=class{constructor(){}supports(e){return Gb(e)}create(e){return new Og(e)}},bF=(n,e)=>e,Og=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<jD(r,i,o)?t:r,a=jD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Gb(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,v1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Fg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new nd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fg=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Vg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},nd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Vg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function BD(){return new Rm([new kg])}var Rm=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:BD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||BD()),deps:[[n,new Bg,new zo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();var u0=Mm(null,"core",[]),c0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(V(Fr))}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({})}}return n})();function Vr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function tu(n,e){Ka("NgSignals");let t=SE(n);return e?.equal&&(t[qn].equal=e.equal),t}function tr(n){let e=ye(null);try{return n()}finally{ye(e)}}function l0(n){let e=Ar(n);if(!e)return null;let t=new Ho(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var p0=null;function An(){return p0}function g0(n){p0??=n}var Sd=class{};var Ot=new q(""),Om=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(TF),providedIn:"platform"})}}return n})(),m0=new q(""),TF=(()=>{class n extends Om{constructor(){super(),this._doc=B(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return An().getBaseHref(this._doc)}onPopState(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=An().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Fm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function d0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function nr(n){return n&&n[0]!=="?"?"?"+n:n}var rr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(Vm),providedIn:"root"})}}return n})(),y0=new q(""),Vm=(()=>{class n extends rr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+nr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(Om),V(y0,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),v0=(()=>{class n extends rr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Fm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+nr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(V(Om),V(y0,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Zo=(()=>{class n{constructor(t){this._subject=new Ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=MF(d0(h0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nr(r))}normalize(t){return n.stripTrailingSlash(AF(this._basePath,h0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=nr}static{this.joinWithSlash=Fm}static{this.stripTrailingSlash=d0}static{this.\u0275fac=function(r){return new(r||n)(V(rr))}}static{this.\u0275prov=K({token:n,factory:()=>SF(),providedIn:"root"})}}return n})();function SF(){return new Zo(V(rr))}function AF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function h0(n){return n.replace(/\/index.html$/,"")}function MF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function _0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Nm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},w0=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Nm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),f0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);f0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ie(Wa),Ie(mm),Ie(Rm))}}static{this.\u0275dir=mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function f0(n,e){n.context.$implicit=e.item}var Md=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({})}}return n})(),Lm="browser",xF="server";function RF(n){return n===Lm}function Ri(n){return n===xF}var I0=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>RF(B(Nt))?new Pm(B(Ot),window):new km})}}return n})(),Pm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=NF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function NF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var km=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ad=class{};var Um=class extends Sd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$m=class n extends Um{static makeCurrent(){g0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=kF();return t==null?null:OF(t)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _0(document.cookie,e)}},nu=null;function kF(){return nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null}function OF(n){return new URL(n,document.baseURI).pathname}var Hm=class{addToWindow(e){cn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Q(5103,!1);return o},cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),cn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=cn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};cn.frameworkStabilizers||(cn.frameworkStabilizers=[]),cn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?An().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},FF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),qm=new q(""),T0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(V(qm),V(pe))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),xd=class{constructor(e){this._doc=e}},jm="ng-app-id",S0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ri(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${jm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(jm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(jm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(V(Ot),V(fd),V(om,8),V(Nt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gm=/%COMP%/g,A0="%COMP%",VF=`_nghost-${A0}`,LF=`_ngcontent-${A0}`,jF=!0,BF=new q("",{providedIn:"root",factory:()=>jF});function UF(n){return LF.replace(Gm,n)}function $F(n){return VF.replace(Gm,n)}function M0(n,e){return e.map(t=>t.replace(Gm,n))}var D0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ri(a),this.defaultRenderer=new ru(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=ce(L({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Rd?i.applyToHost(t):i instanceof iu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Dn.Emulated:o=new Rd(u,l,r,this.appId,h,s,a,p);break;case Dn.ShadowDom:return new zm(u,l,t,r,s,a,this.nonce,p);default:o=new iu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(V(T0),V(S0),V(fd),V(BF),V(Ot),V(Nt),V(pe),V(om))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),ru=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Bm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(C0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(C0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Bm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Bm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,r,i&Qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function C0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var zm=class extends ru{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=M0(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},iu=class extends ru{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?M0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rd=class extends iu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=UF(l),this.hostAttr=$F(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},HF=(()=>{class n extends xd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(V(Ot))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),b0=["alt","control","meta","shift"],qF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GF=(()=>{class n extends xd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),b0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=qF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),b0.forEach(s=>{if(s!==i){let a=zF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(V(Ot))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function WF(){$m.makeCurrent()}function KF(){return new Kn}function QF(){return ob(document),document}var YF=[{provide:Nt,useValue:Lm},{provide:im,useValue:WF,multi:!0},{provide:Ot,useFactory:QF,deps:[]}],x0=Mm(u0,"browser",YF),ZF=new q(""),JF=[{provide:eu,useClass:Hm,deps:[]},{provide:bm,useClass:Dd,deps:[pe,Cd,eu]},{provide:Dd,useClass:Dd,deps:[pe,Cd,eu]}],XF=[{provide:sd,useValue:"root"},{provide:Kn,useFactory:KF,deps:[]},{provide:qm,useClass:HF,multi:!0,deps:[Ot,pe,Nt]},{provide:qm,useClass:GF,multi:!0,deps:[Ot]},D0,S0,T0,{provide:$o,useExisting:D0},{provide:Ad,useClass:FF,deps:[]},[]],R0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:fd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(V(ZF,12))}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({providers:[...XF,...JF],imports:[Md,c0]})}}return n})();var N0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(V(Ot))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",vu=Symbol("RouteTitle"),Zm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rs(n){return new Zm(n)}function eV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mn(n[t],e[t]))return!1;return!0}function Mn(n,e){let t=n?Jm(n):void 0,r=e?Jm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!q0(n[i],e[i]))return!1;return!0}function Jm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function q0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function z0(n){return n.length>0?n[n.length-1]:null}function Br(n){return xp(n)?n:Mi(n)?ve(Promise.resolve(n)):X(n)}var nV={exact:W0,subset:K0},G0={exact:rV,subset:iV,ignored:()=>!0};function k0(n,e,t){return nV[t.paths](n.root,e.root,t.matrixParams)&&G0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rV(n,e){return Mn(n,e)}function W0(n,e,t){if(!Pi(n.segments,e.segments)||!kd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!W0(n.children[r],e.children[r],t))return!1;return!0}function iV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>q0(n[t],e[t]))}function K0(n,e,t){return Q0(n,e,e.segments,t)}function Q0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Pi(i,t)||e.hasChildren()||!kd(i,t,r))}else if(n.segments.length===t.length){if(!Pi(n.segments,t)||!kd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!K0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Pi(n.segments,i)||!kd(n.segments,i,r)||!n.children[oe]?!1:Q0(n.children[oe],e,o,r)}}function kd(n,e,t){return e.every((r,i)=>G0[t](n[i].parameters,r.parameters))}var or=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){return aV.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Od(this)}},Ni=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rs(this.parameters),this._parameterMap}toString(){return Z0(this)}};function oV(n,e){return Pi(n,e)&&n.every((t,r)=>Mn(t.parameters,e[r].parameters))}function Pi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var _u=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new is,providedIn:"root"})}}return n})(),is=class{parse(e){let t=new ey(e);return new or(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ou(e.root,!0)}`,r=lV(e.queryParams),i=typeof e.fragment=="string"?`#${uV(e.fragment)}`:"";return`${t}${r}${i}`}},aV=new is;function Od(n){return n.segments.map(e=>Z0(e)).join("/")}function ou(n,e){if(!n.hasChildren())return Od(n);if(e){let t=n.children[oe]?ou(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ou(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sV(n,(r,i)=>i===oe?[ou(n.children[oe],!1)]:[`${i}:${ou(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Od(n)}/${t[0]}`:`${Od(n)}/(${t.join("//")})`}}function Y0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nd(n){return Y0(n).replace(/%3B/gi,";")}function uV(n){return encodeURI(n)}function Xm(n){return Y0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(n){return decodeURIComponent(n)}function O0(n){return Fd(n.replace(/\+/g,"%20"))}function Z0(n){return`${Xm(n.path)}${cV(n.parameters)}`}function cV(n){return Object.entries(n).map(([e,t])=>`;${Xm(e)}=${Xm(t)}`).join("")}function lV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Nd(t)}=${Nd(i)}`).join("&"):`${Nd(t)}=${Nd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dV=/^[^\/()?;#]+/;function Wm(n){let e=n.match(dV);return e?e[0]:""}var hV=/^[^\/()?;=#]+/;function fV(n){let e=n.match(hV);return e?e[0]:""}var pV=/^[^=?&#]+/;function gV(n){let e=n.match(pV);return e?e[0]:""}var mV=/^[^&#]+/;function yV(n){let e=n.match(mV);return e?e[0]:""}var ey=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=Wm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Ni(Fd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Wm(this.remaining);i&&(r=i,this.capture(r))}e[Fd(t)]=Fd(r)}parseQueryParam(e){let t=gV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=yV(this.remaining);s&&(r=s,this.capture(r))}let i=O0(t),o=O0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function J0(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function X0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=X0(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return vV(t)}function vV(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function ki(n){return n instanceof or}function _V(n,e,t=null,r=null){let i=eT(n);return tT(i,e,t,r)}function eT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=J0(r);return e??i}function tT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Km(i,i,i,t,r);let o=wV(e);if(o.toRoot())return Km(i,i,new Ee([],{}),t,r);let s=IV(o,i,n),a=s.processChildren?uu(s.segmentGroup,s.index,o.commands):rT(s.segmentGroup,s.index,o.commands);return Km(i,s.segmentGroup,a,t,r)}function Vd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function du(n){return typeof n=="object"&&n!=null&&n.outlets}function Km(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=nT(n,e,t);let a=J0(X0(s));return new or(a,o,i)}function nT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=nT(o,e,t)}),new Ee(n.segments,r)}var Ld=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vd(r[0]))throw new Q(4003,!1);let i=r.find(du);if(i&&i!==z0(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wV(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ld(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ld(t,e,r)}var es=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function IV(n,e,t){if(n.isAbsolute)return new es(e,!0,0);if(!t)return new es(e,!1,NaN);if(t.parent===null)return new es(t,!0,0);let r=Vd(n.commands[0])?0:1,i=t.segments.length-1+r;return EV(t,i,n.numberOfDoubleDots)}function EV(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new es(r,!1,i-o)}function DV(n){return du(n[0])?n[0].outlets:{[oe]:n}}function rT(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return uu(n,e,t);let r=CV(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),uu(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?ty(n,e,t):r.match?uu(n,0,i):ty(n,e,t)}function uu(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=DV(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=uu(n.children[oe],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=rT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function CV(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(du(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!V0(u,l,s))return o;r+=2}else{if(!V0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ty(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(du(o)){let u=bV(o.outlets);return new Ee(r,u)}if(i===0&&Vd(t[0])){let u=n.segments[e];r.push(new Ni(u.path,F0(t[0]))),i++;continue}let s=du(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Vd(a)?(r.push(new Ni(s,F0(a))),i+=2):(r.push(new Ni(s,{})),i++)}return new Ee(r,{})}function bV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ty(new Ee([],{}),0,r))}),e}function F0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function V0(n,e,t){return n==t.path&&Mn(e,t.parameters)}var cu="imperative",st=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(st||{}),Xt=class{constructor(e,t){this.id=e,this.url=t}},os=class extends Xt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xn=class extends Xt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ht=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ht||{}),jd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jd||{}),ir=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Xt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},hu=class extends Xt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bd=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ny=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ry=class extends Xt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iy=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oy=class extends Xt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sy=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ay=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uy=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cy=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ly=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dy=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},fu=class{},ss=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TV(n,e){return n.providers&&!n._injector&&(n._injector=_d(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hn(n){return n.outlet||oe}function SV(n,e){let t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}function wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hy=class{get injector(){return wu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Iu(this.rootInjector),this.attachRef=null}},Iu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(V(jt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$d=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=fy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=fy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=py(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return py(e,this._root).map(t=>t.value)}};function fy(n,e){if(n===e.value)return e;for(let t of e.children){let r=fy(n,t);if(r)return r}return null}function py(n,e){if(n===e.value)return[e];for(let t of e.children){let r=py(n,t);if(r.length)return r.unshift(e),r}return[]}var $t=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Xo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Hd=class extends $d{constructor(e,t){super(e),this.snapshot=t,Dy(this,e)}toString(){return this.snapshot.toString()}};function iT(n){let e=AV(n),t=new ut([new Ni("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new Oi(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Hd(new $t(a,[]),e)}function AV(n){let e={},t={},r={},i="",o=new ts([],e,r,i,t,oe,n,null,{});return new zd("",new $t(o,[]))}var Oi=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[vu]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&sT(i)&&(r.resolve[vu]=i.title),r}var ts=class{get title(){return this.data?.[vu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},zd=class extends $d{constructor(e,t){super(t),this.url=e,Dy(this,t)}toString(){return oT(this._root)}};function Dy(n,e){e.value._routerState=n,e.children.forEach(t=>Dy(n,t))}function oT(n){let e=n.children.length>0?` { ${n.children.map(oT).join(", ")} } `:"";return`${n.value}${e}`}function Qm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mn(e.params,t.params)||n.paramsSubject.next(t.params),tV(e.url,t.url)||n.urlSubject.next(t.url),Mn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gy(n,e){let t=Mn(n.params,e.params)&&oV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||gy(n.parent,e.parent))}function sT(n){return typeof n.title=="string"||n.title===null}var Cy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.parentContexts=B(Iu),this.location=B(Wa),this.changeDetector=B(xi),this.inputBinder=B(Yd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new my(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pr]})}}return n})(),my=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oi?this.route:e===Iu?this.childContexts:this.parent.get(e,t)}},Yd=new q(""),L0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xa([r.queryParams,r.params,r.data]).pipe(je(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?X(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=l0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function MV(n,e,t){let r=pu(n,e._root,t?t._root:void 0);return new Hd(r,e)}function pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xV(n,e,t);return new $t(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pu(n,a)),s}}let r=RV(e.value),i=e.children.map(o=>pu(n,o));return new $t(r,i)}}function xV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return pu(n,r,i);return pu(n,r)})}function RV(n){return new Oi(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var gu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},aT="ngNavigationCancelingError";function Gd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uT(!1,Ht.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function uT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[aT]=!0,t.cancellationCode=e,t}function NV(n){return cT(n)&&ki(n.url)}function cT(n){return!!n&&n[aT]}var PV=(n,e,t,r)=>Z(i=>(new yy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),yy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Xo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Xo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Qm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Qm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Wd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ns=class{constructor(e,t){this.component=e,this.route=t}};function kV(n,e,t){let r=n._root,i=e?e._root:null;return su(r,i,t,[r.value])}function OV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function us(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qD(n)?n:e.get(n):r}function su(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xo(e);return n.children.forEach(s=>{FV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lu(a,t.getContext(s),i)),i}function FV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=VV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Wd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?su(n,e,a?a.children:null,r,i):su(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ns(a.outlet.component,s))}else s&&lu(e,a,i),i.canActivateChecks.push(new Wd(r)),o.component?su(n,null,a?a.children:null,r,i):su(n,null,t,r,i);return i}function VV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Pi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(n.url,e.url)||!Mn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gy(n,e)||!Mn(n.queryParams,e.queryParams);case"paramsChange":default:return!gy(n,e)}}function lu(n,e,t){let r=Xo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lu(s,e.children.getContext(o),t):lu(s,null,t):lu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ns(e.outlet.component,i)):t.canDeactivateChecks.push(new ns(null,i)):t.canDeactivateChecks.push(new ns(null,i))}function Eu(n){return typeof n=="function"}function LV(n){return typeof n=="boolean"}function jV(n){return n&&Eu(n.canLoad)}function BV(n){return n&&Eu(n.canActivate)}function UV(n){return n&&Eu(n.canActivateChild)}function $V(n){return n&&Eu(n.canDeactivate)}function HV(n){return n&&Eu(n.canMatch)}function lT(n){return n instanceof Gn||n?.name==="EmptyError"}var Pd=Symbol("INITIAL_VALUE");function as(){return je(n=>xa(n.map(e=>e.pipe(Wn(1),vi(Pd)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===Pd)return Pd;if(t===!1||qV(t))return t}return!0}),ct(e=>e!==Pd),Wn(1)))}function qV(n){return ki(n)||n instanceof gu}function zV(n,e){return ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(ce(L({},t),{guardsResult:!0})):GV(s,r,i,n).pipe(ze(a=>a&&LV(a)?WV(r,o,n,e):X(a)),Z(a=>ce(L({},t),{guardsResult:a})))})}function GV(n,e,t,r){return ve(n).pipe(ze(i=>JV(i.component,i.route,t,e,r)),Wt(i=>i!==!0,!0))}function WV(n,e,t,r){return ve(e).pipe(mi(i=>Co(QV(i.route.parent,r),KV(i.route,r),ZV(n,i.path,t),YV(n,i.route,t))),Wt(i=>i!==!0,!0))}function KV(n,e){return n!==null&&e&&e(new ly(n)),X(!0)}function QV(n,e){return n!==null&&e&&e(new uy(n)),X(!0)}function YV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>gl(()=>{let s=wu(e)??t,a=us(o,s),u=BV(a)?a.canActivate(e,n):Sn(s,()=>a(e,n));return Br(u).pipe(Wt())}));return X(i).pipe(as())}function ZV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>OV(s)).filter(s=>s!==null).map(s=>gl(()=>{let a=s.guards.map(u=>{let l=wu(s.node)??t,h=us(u,l),p=UV(h)?h.canActivateChild(r,n):Sn(l,()=>h(r,n));return Br(p).pipe(Wt())});return X(a).pipe(as())}));return X(o).pipe(as())}function JV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=wu(e)??i,l=us(a,u),h=$V(l)?l.canDeactivate(n,e,t,r):Sn(u,()=>l(n,e,t,r));return Br(h).pipe(Wt())});return X(s).pipe(as())}function XV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=us(s,n),u=jV(a)?a.canLoad(e,t):Sn(n,()=>a(e,t));return Br(u)});return X(o).pipe(as(),dT(r))}function dT(n){return Cp(Je(e=>{if(typeof e!="boolean")throw Gd(n,e)}),Z(e=>e===!0))}function eL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=us(s,n),u=HV(a)?a.canMatch(e,t):Sn(n,()=>a(e,t));return Br(u)});return X(o).pipe(as(),dT(r))}var mu=class{constructor(e){this.segmentGroup=e||null}},yu=class extends Error{constructor(e){super(),this.urlTree=e}};function Jo(n){return Do(new mu(n))}function tL(n){return Do(new Q(4e3,!1))}function nL(n){return Do(uT(!1,Ht.GuardRejected))}var vy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[oe])return tL(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:A}=i,M=Sn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof or)throw new yu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new yu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new or(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},_y={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rL(n,e,t,r,i){let o=hT(n,e,t);return o.matched?(r=TV(e,r),eL(r,e,t,i).pipe(Z(s=>s===!0?o:L({},_y)))):X(o)}function hT(n,e,t){if(e.path==="**")return iL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},_y):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eV)(t,n,e);if(!i)return L({},_y);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function iL(n){return{matched:!0,parameters:n.length>0?z0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function j0(n,e,t,r){return t.length>0&&aL(n,t,r)?{segmentGroup:new Ee(e,sL(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&uL(n,t,r)?{segmentGroup:new Ee(n.segments,oL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function oL(n,e,t,r){let i={};for(let o of t)if(Zd(n,e,o)&&!r[hn(o)]){let s=new Ee([],{});i[hn(o)]=s}return L(L({},r),i)}function sL(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&hn(r)!==oe){let i=new Ee([],{});t[hn(r)]=i}return t}function aL(n,e,t){return t.some(r=>Zd(n,e,r)&&hn(r)!==oe)}function uL(n,e,t){return t.some(r=>Zd(n,e,r))}function Zd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cL(n,e,t){return e.length===0&&!n.children[t]}var wy=class{};function lL(n,e,t,r,i,o,s="emptyOnly"){return new Iy(n,e,t,r,i,s,o).recognize()}var dL=31,Iy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new vy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=j0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:t,rootSnapshot:r})=>{let i=new $t(r,t),o=new zd("",i),s=_V(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ts([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(Z(r=>({children:r,rootSnapshot:t})),Er(r=>{if(r instanceof yu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Z(s=>s instanceof $t?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ve(o).pipe(mi(s=>{let a=r.children[s],u=SV(t,s);return this.processSegmentGroup(e,u,a,s,i)}),yi((s,a)=>(s.push(...a),s)),Dr(null),Op(),ze(s=>{if(s===null)return Jo(r);let a=fT(s);return hL(a),X(a)}))}processSegment(e,t,r,i,o,s,a){return ve(t).pipe(mi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Er(l=>{if(l instanceof mu)return X(null);throw l}))),Wt(u=>!!u),Er(u=>{if(lT(u))return cL(r,i,o)?X(new wy):Jo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return hn(r)!==s&&(s===oe||!Zd(i,o,r))?Jo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Jo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=hT(t,i,o);if(!u)return Jo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dL&&(this.allowRedirects=!1));let y=new ts(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,B0(i),hn(i),i.component??i._loadedComponent??null,i,U0(i)),b=qd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(ze(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=rL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(je(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new ts(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,B0(r),hn(r),r.component??r._loadedComponent??null,r,U0(r)),A=qd(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:F}=j0(t,m,y,l);if(F.length===0&&M.hasChildren())return this.processChildren(h,l,M,b).pipe(Z(O=>new $t(b,O)));if(l.length===0&&F.length===0)return X(new $t(b,[]));let H=hn(r)===o;return this.processSegment(h,l,M,F,H?oe:o,!0,b).pipe(Z(O=>new $t(b,O instanceof $t?[O]:[])))}))):Jo(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):XV(e,t,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):nL(t))):X({routes:[],injector:e})}};function hL(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function fL(n){let e=n.value.routeConfig;return e&&e.path===""}function fT(n){let e=[],t=new Set;for(let r of n){if(!fL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=fT(r.children);e.push(new $t(r.value,i))}return e.filter(r=>!t.has(r))}function B0(n){return n.data||{}}function U0(n){return n.resolve||{}}function pL(n,e,t,r,i,o){return ze(s=>lL(n,e,t,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:u})=>ce(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function gL(n,e){return ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of pT(u))s.add(l);let a=0;return ve(s).pipe(mi(u=>o.has(u)?mL(u,r,n,e):(u.data=qd(u,u.parent,n).resolve,X(void 0))),Je(()=>a++),bo(1),ze(u=>a===s.size?X(t):Et))})}function pT(n){let e=n.children.map(t=>pT(t)).flat();return[n,...e]}function mL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!sT(i)&&(o[vu]=i.title),yL(o,n,e,r).pipe(Z(s=>(n._resolvedData=s,n.data=qd(n,n.parent,t).resolve,null)))}function yL(n,e,t,r){let i=Jm(n);if(i.length===0)return X({});let o={};return ve(i).pipe(ze(s=>vL(n[s],e,t,r).pipe(Wt(),Je(a=>{if(a instanceof gu)throw Gd(new is,a);o[s]=a}))),bo(1),Pp(o),Er(s=>lT(s)?Et:Do(s)))}function vL(n,e,t,r){let i=wu(e)??r,o=us(n,i),s=o.resolve?o.resolve(e,t):Sn(i,()=>o(e,t));return Br(s)}function Ym(n){return je(e=>{let t=n(e);return t?ve(t).pipe(Z(()=>e)):X(e)})}var gT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[vu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(_L),providedIn:"root"})}}return n})(),_L=(()=>{class n extends gT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(V(N0))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Du=new q("",{providedIn:"root",factory:()=>({})}),wL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Nr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Xb],decls:1,vars:0,template:function(r,i){r&1&&Ja(0,"router-outlet")},dependencies:[Cy],encapsulation:2})}}return n})();function by(n){let e=n.children&&n.children.map(by),t=e?ce(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=wL),t}var Kd=new q(""),Ty=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Td)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Br(t.loadComponent()).pipe(Z(mT),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ra(()=>{this.componentLoaders.delete(t)})),i=new _o(r,()=>new Ne).pipe(vo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=IL(r,this.compiler,t,this.onLoadEndListener).pipe(Ra(()=>{this.childrenLoaders.delete(r)})),s=new _o(o,()=>new Ne).pipe(vo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IL(n,e,t,r){return Br(n.loadChildren()).pipe(Z(mT),ze(i=>i instanceof Ba||Array.isArray(i)?X(i):ve(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Kd,[],{optional:!0,self:!0}).flat()),{routes:s.map(by),injector:o}}))}function EL(n){return n&&typeof n=="object"&&"default"in n}function mT(n){return EL(n)?n.default:n}var Sy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(DL),providedIn:"root"})}}return n})(),DL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yT=new q(""),vT=new q("");function CL(n,e,t){let r=n.get(vT),i=n.get(Ot);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),bL(n))),{onViewTransitionCreated:u}=r;return u&&Sn(n,()=>u({transition:a,from:e,to:t})),s})}function bL(n){return new Promise(e=>{wm({read:()=>setTimeout(e)},{injector:n})})}var TL=new q(""),Ay=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ne,this.transitionAbortSubject=new Ne,this.configLoader=B(Ty),this.environmentInjector=B(jt),this.urlSerializer=B(_u),this.rootContexts=B(Iu),this.location=B(Zo),this.inputBindingEnabled=B(Yd,{optional:!0})!==null,this.titleStrategy=B(gT),this.options=B(Du,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(Sy),this.createViewTransition=B(yT,{optional:!0}),this.navigationErrorHandler=B(TL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new sy(i)),r=i=>this.events.next(new ay(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ce(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ct(o=>o.id!==0),Z(o=>ce(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),je(o=>{let s=!1,a=!1;return X(o).pipe(je(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ht.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ce(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Lr(u.id,this.urlSerializer.serialize(u.rawUrl),p,jd.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(je(p=>{let m=this.transitions?.getValue();return this.events.next(new os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),pL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ce(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Bd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:A}=u,M=new os(p,this.urlSerializer.serialize(m),y,b);this.events.next(M);let F=iT(this.rootComponentType).snapshot;return this.currentTransition=o=ce(L({},u),{targetSnapshot:F,urlAfterRedirects:m,extras:ce(L({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let p="";return this.events.next(new Lr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,jd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),Je(u=>{let l=new ny(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Z(u=>(this.currentTransition=o=ce(L({},u),{guards:kV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),zV(this.environmentInjector,u=>this.events.next(u)),Je(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Gd(this.urlSerializer,u.guardsResult);let l=new ry(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ct(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ht.GuardRejected),!1)),Ym(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(Je(l=>{let h=new iy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),je(l=>{let h=!1;return X(l).pipe(gL(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ht.NoDataFromResolver)}}))}),Je(l=>{let h=new oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ym(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Je(m=>{h.component=m}),Z(()=>{})));for(let m of h.children)p.push(...l(m));return p};return xa(l(u.targetSnapshot.root)).pipe(Dr(null),Wn(1))}),Ym(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ve(h).pipe(Z(()=>o)):X(o)}),Z(u=>{let l=MV(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ce(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Je(()=>{this.events.next(new fu)}),PV(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Wn(1),Je({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Vp(this.transitionAbortSubject.pipe(Je(u=>{throw u}))),Ra(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ht.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Er(u=>{if(a=!0,cT(u))this.events.next(new ir(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),NV(u)?this.events.next(new ss(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new hu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Sn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof gu){let{message:p,cancellationCode:m}=Gd(this.urlSerializer,h);this.events.next(new ir(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new ss(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new ir(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SL(n){return n!==cu}var AL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(ML),providedIn:"root"})}}return n})(),Ey=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},ML=(()=>{class n extends Ey{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_T=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(xL),providedIn:"root"})}}return n})(),xL=(()=>{class n extends _T{constructor(){super(...arguments),this.location=B(Zo),this.urlSerializer=B(_u),this.options=B(Du,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(Sy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof os)this.stateMemento=this.createStateMemento();else if(t instanceof Lr)this.rawUrlTree=r.initialUrl;else if(t instanceof Bd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof fu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ir&&(t.code===Ht.GuardRejected||t.code===Ht.NoDataFromResolver)?this.restoreHistory(r):t instanceof hu?this.restoreHistory(r,!0):t instanceof xn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof or?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),au=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(au||{});function wT(n,e){n.events.pipe(ct(t=>t instanceof xn||t instanceof ir||t instanceof hu||t instanceof Lr),Z(t=>t instanceof xn||t instanceof Lr?au.COMPLETE:(t instanceof ir?t.code===Ht.Redirect||t.code===Ht.SupersededByNewNavigation:!1)?au.REDIRECTING:au.FAILED),ct(t=>t!==au.REDIRECTING),Wn(1)).subscribe(()=>{e()})}function RL(n){throw n}var NL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(Ed),this.stateManager=B(_T),this.options=B(Du,{optional:!0})||{},this.pendingTasks=B(Qo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(Ay),this.urlSerializer=B(_u),this.location=B(Zo),this.urlHandlingStrategy=B(Sy),this._events=new Ne,this.errorHandler=this.options.errorHandler||RL,this.navigated=!1,this.routeReuseStrategy=B(AL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(Kd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Yd,{optional:!0}),this.eventsSubscription=new Le,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ir&&r.code!==Ht.Redirect&&r.code!==Ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xn)this.navigated=!0;else if(r instanceof ss){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SL(i.source)},s);this.scheduleNavigation(a,cu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}OL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(by),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=eT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return tT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ki(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cu,null,r)}navigate(t,r={skipLocationChange:!1}){return kL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},NL):r===!1?i=L({},PL):i=r,ki(t))return k0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return k0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return wT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function OL(n){return!(n instanceof fu)&&!(n instanceof ss)}var IT=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ne,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof xn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ki(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:ub(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ki(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ie(jr),Ie(Oi),em("tabindex"),Ie(Ai),Ie(Or),Ie(rr))}}static{this.\u0275dir=mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&er("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Za("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vr],replaceUrl:[2,"replaceUrl","replaceUrl",Vr],routerLink:"routerLink"},standalone:!0,features:[vm,Pr]})}}return n})();var Qd=class{};var FL=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof xn),mi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=_d(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ve(i).pipe(Ir())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=X(null);let o=i.pipe(ze(s=>s===null?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ve([o,s]).pipe(Ir())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(V(jr),V(Td),V(jt),V(Qd),V(Ty))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ET=new q(""),VL=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Lr&&t.code===jd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ud&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ud(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Ib()}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function LL(n){return n.routerState.root}function Cu(n,e){return{\u0275kind:n,\u0275providers:e}}function jL(){let n=B(Bt);return e=>{let t=n.get(Fr);if(e!==t.components[0])return;let r=n.get(jr),i=n.get(DT);n.get(My)===1&&r.initialNavigation(),n.get(CT,null,ue.Optional)?.setUpPreloading(),n.get(ET,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var DT=new q("",{factory:()=>new Ne}),My=new q("",{providedIn:"root",factory:()=>1});function BL(){return Cu(2,[{provide:My,useValue:0},{provide:bd,multi:!0,deps:[Bt],useFactory:e=>{let t=e.get(m0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(jr),o=e.get(DT);wT(i,()=>{r(!0)}),e.get(Ay).afterPreactivation=()=>(r(!0),o.closed?X(void 0):o),i.initialNavigation()}))}}])}function UL(){return Cu(3,[{provide:bd,multi:!0,useFactory:()=>{let e=B(jr);return()=>{e.setUpLocationChangeListener()}}},{provide:My,useValue:2}])}var CT=new q("");function $L(n){return Cu(0,[{provide:CT,useExisting:FL},{provide:Qd,useExisting:n}])}function HL(){return Cu(8,[L0,{provide:Yd,useExisting:L0}])}function qL(n){let e=[{provide:yT,useValue:CL},{provide:vT,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Cu(9,e)}var $0=new q("ROUTER_FORROOT_GUARD"),zL=[Zo,{provide:_u,useClass:is},jr,Iu,{provide:Oi,useFactory:LL,deps:[jr]},Ty,[]],xy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[zL,[],{provide:Kd,multi:!0,useValue:t},{provide:$0,useFactory:QL,deps:[[jr,new zo,new Bg]]},{provide:Du,useValue:r||{}},r?.useHash?WL():KL(),GL(),r?.preloadingStrategy?$L(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?YL(r):[],r?.bindToComponentInputs?HL().\u0275providers:[],r?.enableViewTransitions?qL().\u0275providers:[],ZL()]}}static forChild(t){return{ngModule:n,providers:[{provide:Kd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(V($0,8))}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({})}}return n})();function GL(){return{provide:ET,useFactory:()=>{let n=B(I0),e=B(pe),t=B(Du),r=B(Ay),i=B(_u);return t.scrollOffset&&n.setOffset(t.scrollOffset),new VL(i,r,n,e,t)}}}function WL(){return{provide:rr,useClass:v0}}function KL(){return{provide:rr,useClass:Vm}}function QL(n){return"guarded"}function YL(n){return[n.initialNavigation==="disabled"?UL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BL().\u0275providers:[]]}var H0=new q("");function ZL(){return[{provide:H0,useFactory:jL},{provide:Sm,multi:!0,useExisting:H0}]}var XL="firebase",ej="10.14.1";wr(XL,ej,"app");var cs=new Yn("ANGULARFIRE2_VERSION");var tj=(n,e)=>{let t=e?[e]:vE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fi=class{constructor(){return tj(nj)}},nj="app-check";function Ry(){}var Jd=class{zone;delegate;constructor(e,t=Ap){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Ny=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ry,{},Ry,Ry)),t.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Jd(Zone.current)),this.insideAngular=t.run(()=>new Jd(Zone.current,Ma)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(pe))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ft(n){return ij(rj())(n)}function ij(n){return function(t){return t=t.lift(new Ny(n.ngZone)),t.pipe(sn(n.outsideAngular),Gt(n.insideAngular))}}var aj=new Map,uj={activated:!1,tokenObservers:[]},cj={initialized:!1,enabled:!1};function fn(n){return aj.get(n)||Object.assign({},uj)}function xT(){return cj}var lj="https://content-firebaseappcheck.googleapis.com/v1";var dj="exchangeDebugToken",TT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},r8=24*60*60*1e3;var ky=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new cp,this.pending.promise.catch(t=>{}),yield hj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new cp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function hj(n){return new Promise(e=>{setTimeout(e,n)})}var fj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ur=new mE("appCheck","AppCheck",fj);function RT(n){if(!fn(n).activated)throw Ur.create("use-before-activation",{appName:n.name})}function NT(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Ur.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ur.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ur.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ur.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function PT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lj}/projects/${t}/apps/${r}:${dj}?key=${i}`,body:{debug_token:e}}}var pj="firebase-app-check-database",gj=1,Oy="firebase-app-check-store";var eh=null;function mj(){return eh||(eh=new Promise((n,e)=>{try{let t=indexedDB.open(pj,gj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ur.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Oy,{keyPath:"compositeKey"})}}}catch(t){e(Ur.create("storage-open",{originalErrorMessage:t?.message}))}}),eh)}function yj(n,e){return vj(_j(n),e)}function vj(n,e){return N(this,null,function*(){let r=(yield mj()).transaction(Oy,"readwrite"),o=r.objectStore(Oy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ur.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function _j(n){return`${n.options.appId}-${n.name}`}var Fy=new jc("@firebase/app-check");function Py(n,e){return Lc()?yj(n,e).catch(t=>{Fy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kT(){return xT().enabled}function OT(){return N(this,null,function*(){let n=xT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var wj={error:"UNKNOWN_ERROR"};function Ij(n){return fE.encodeString(JSON.stringify(n),!1)}function Vy(n,e=!1){return N(this,null,function*(){let t=n.app;RT(t);let r=fn(t),i=r.token,o;if(i&&!bu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(bu(u)?i=u:yield Py(t,void 0))}if(!e&&i&&bu(i))return{token:i.token};let s=!1;if(kT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NT(PT(t,yield OT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Py(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Fy.warn(u.message):Fy.error(u),o=u}let a;return i?o?bu(i)?a={token:i.token,internalError:o}:a=AT(o):(a={token:i.token},r.token=i,yield Py(t,i)):a=AT(o),s&&bj(t,a),a})}function Ej(n){return N(this,null,function*(){let e=n.app;RT(e);let{provider:t}=fn(e);if(kT()){let r=yield OT(),{token:i}=yield NT(PT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Dj(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&bu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ST(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ST(n))}function FT(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ST(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=Cj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Cj(n){let{app:e}=n;return new ky(()=>N(this,null,function*(){let t=fn(e),r;if(t.token?r=yield Vy(n,!0):r=yield Vy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TT.RETRIAL_MIN_WAIT,TT.RETRIAL_MAX_WAIT)}function bj(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bu(n){return n.expireTimeMillis-Date.now()>0}function AT(n){return{token:Ij(wj),error:n}}var Ly=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)FT(this.app,t.next);return Promise.resolve()}};function Tj(n,e){return new Ly(n,e)}function Sj(n){return{getToken:e=>Vy(n,e),getLimitedUseToken:()=>Ej(n),addTokenListener:e=>Dj(n,"INTERNAL",e),removeTokenListener:e=>FT(n.app,e)}}var Aj="@firebase/app-check",Mj="0.8.8";var xj="app-check",MT="app-check-internal";function Rj(){Da(new hi(xj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Tj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MT).initialize()})),Da(new hi(MT,n=>{let e=n.getProvider("app-check").getImmediate();return Sj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),wr(Aj,Mj)}Rj();var Nj=["localhost","0.0.0.0","127.0.0.1"],g8=typeof window<"u"&&Nj.includes(window.location.hostname);var Pj="firebase",kj="10.14.1";Mt.registerVersion(Pj,kj,"app-compat");var Oj=["ngOnDestroy"],jT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Oj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var th=class{constructor(e){return e}},ls=new q("angularfire2.app.options"),ds=new q("angularfire2.app.name");function Tu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Mt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Mt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;Fj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new th(s)}var Fj=(n,...e)=>{xm()&&typeof console<"u"&&console[n](...e)},Vj={provide:th,useFactory:Tu,deps:[ls,pe,[new zo,ds]]},BT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ls,useValue:t},{provide:ds,useValue:r}]}}constructor(t){Mt.registerVersion("angularfire",cs.full,"core"),Mt.registerVersion("angularfire",cs.full,"app-compat"),Mt.registerVersion("angular",e0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(V(Nt))};static \u0275mod=tt({type:n});static \u0275inj=et({providers:[Vj]})}return n})();function nh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Lj(i,s)||(LT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${jj?" You may need to reload as Firebase is not HMR aware.":""}`),LT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Lj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var jj=typeof module<"u"&&!!module.hot,LT=(n,...e)=>{xm()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var jy=new q("angularfire2.auth.use-emulator"),By=new q("angularfire2.auth.settings"),Uy=new q("angularfire2.auth.tenant-id"),$y=new q("angularfire2.auth.langugage-code"),Hy=new q("angularfire2.auth.use-device-language"),qy=new q("angularfire.auth.persistence"),zy=(n,e,t,r,i,o,s,a)=>nh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),UT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let b=new Ne,A=X(void 0).pipe(Gt(s.outsideAngular),je(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Z(()=>Tu(t,o,r)),Z(M=>zy(M,o,a,l,h,p,u,m)),yl({bufferSize:1,refCount:!1}));if(Ri(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{A.pipe(Wt()).subscribe();let M=A.pipe(je(O=>O.getRedirectResult().then(W=>W,()=>null)),Ft,yl({bufferSize:1,refCount:!1})),F=A.pipe(je(O=>new le(W=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(ee=>W.next(ee),ee=>W.error(ee),()=>W.complete()))})))),H=A.pipe(je(O=>new le(W=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(ee=>W.next(ee),ee=>W.error(ee),()=>W.complete()))}))));this.authState=M.pipe(vl(F),sn(s.outsideAngular),Gt(s.insideAngular)),this.user=M.pipe(vl(H),sn(s.outsideAngular),Gt(s.insideAngular)),this.idToken=this.user.pipe(je(O=>O?ve(O.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(je(O=>O?ve(O.getIdTokenResult()):X(null))),this.credential=Np(M,b,this.authState.pipe(ct(O=>!O))).pipe(Z(O=>O?.user?O:null),sn(s.outsideAngular),Gt(s.insideAngular))}return jT(this,A,o,{spy:{apply:(M,F,H)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&H.then(O=>b.next(O))}}})}static \u0275fac=function(r){return new(r||n)(V(ls),V(ds,8),V(Nt),V(pe),V(Xd),V(jy,8),V(By,8),V(Uy,8),V($y,8),V(Hy,8),V(qy,8),V(Fi,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var $T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HT={};var $r,Gy;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)_[Un-2]=arguments[Un];return v.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=v+(T^w&(D^T))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+E[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+E[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+E[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+E[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+E[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+E[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+E[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+E[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+E[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+E[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+E[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+E[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+E[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+E[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+E[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+E[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<v;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<v;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==v||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return M(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return M(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(A(this))return"-"+M(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var D=W(w,v).g;w=F(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=F(this,I),A(I)?-1:b(I)?0:1};function M(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=v;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,v){return I.add(M(v))}n.j=function(I){if(b(this)||b(I))return p;if(A(this))return A(I)?M(this).j(M(I)):M(M(this).j(I));if(A(I))return M(this.j(M(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Un=I.i(D)>>>16,ra=I.i(D)&65535;w[2*E+2*D]+=_*ra,H(w,2*E+2*D),w[2*E+2*D+1]+=T*ra,H(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Un,H(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Un,H(w,2*E+2*D+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function H(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function O(I,v){this.g=I,this.h=v}function W(I,v){if(b(v))throw Error("division by zero");if(b(I))return new O(p,p);if(A(I))return v=W(M(I),v),new O(M(v.g),M(v.h));if(A(v))return v=W(I,M(v)),new O(M(v.g),v.h);if(30<I.g.length){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=v;0>=E.l(I);)w=ee(w),E=ee(E);var D=Y(w,1),T=Y(E,1);for(E=Y(E,2),w=Y(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Y(E,1),w=Y(w,1)}return v=F(I,D.j(v)),new O(D,v)}for(D=p;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(v);A(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(v);b(T)&&(T=m),D=D.add(T),I=F(I,_)}return new O(D,I)}n.A=function(I){return W(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Y(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<v?I.i(T+w)>>>v|I.i(T+w+1)<<32-v:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gy=HT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,$r=HT.Integer=s}).apply(typeof $T<"u"?$T:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={};var Wy,Uj,hs,Ky,Su,ih,Qy,Yy,Zy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,x){for(var j=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)j[Ce-2]=arguments[Ce];return d.prototype[C].apply(g,j)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,x=g.length||0;c.length=C+x;for(let j=0;j<x;j++)c[C+j]=g[j]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function O(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var ee=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Y(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Vf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=ra.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ra=new F(()=>new nR,c=>c.reset());class nR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ia,oa=!1,Vf=new Un,cI=()=>{let c=a.Promise.resolve(void 0);ia=()=>{c.then(rR)}};var rR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=ra;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}oa=!1};function mr(){this.s=this.s,this.C=this.C}mr.prototype.s=!1,mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var iR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function sa(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{W(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:oR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&sa.aa.h.call(this)}}b(sa,ht);var oR={2:"touch",3:"pen",4:"mouse"};sa.prototype.h=function(){sa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var aa="closure_listenable_"+(1e6*Math.random()|0),sR=0;function aR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++sR,this.da=this.fa=!1}function wc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ic(c){this.src=c,this.g={},this.h=0}Ic.prototype.add=function(c,d,f,g,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=jf(c,d,g,C);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new aR(d,this.src,x,!!g,C),d.fa=f,c.push(d)),d};function Lf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&(wc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function jf(c,d,f,g){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var Bf="closure_lm_"+(1e6*Math.random()|0),Uf={};function lI(c,d,f,g,C){if(g&&g.once)return hI(c,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)lI(c,d[x],f,g,C);return null}return f=zf(f),c&&c[aa]?c.K(d,f,l(g)?!!g.capture:!!g,C):dI(c,d,f,!1,g,C)}function dI(c,d,f,g,C,x){if(!d)throw Error("Invalid event type");var j=l(C)?!!C.capture:!!C,Ce=Hf(c);if(Ce||(c[Bf]=Ce=new Ic(c)),f=Ce.add(d,f,g,j,x),f.proxy)return f;if(g=uR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)iR||(C=j),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(pI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function uR(){function c(f){return d.call(c.src,c.listener,f)}let d=cR;return c}function hI(c,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)hI(c,d[x],f,g,C);return null}return f=zf(f),c&&c[aa]?c.L(d,f,l(g)?!!g.capture:!!g,C):dI(c,d,f,!0,g,C)}function fI(c,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)fI(c,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=zf(f),c&&c[aa]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=jf(x,f,g,C),-1<f&&(wc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=Hf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=jf(d,f,g,C)),(f=-1<c?d[c]:null)&&$f(f))}function $f(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[aa])Lf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(pI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Hf(d))?(Lf(f,c),f.h==0&&(f.src=null,d[Bf]=null)):wc(c)}}}function pI(c){return c in Uf?Uf[c]:Uf[c]="on"+c}function cR(c,d){if(c.da)c=!0;else{d=new sa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&$f(c),c=f.call(g,d)}return c}function Hf(c){return c=c[Bf],c instanceof Ic?c:null}var qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function zf(c){return typeof c=="function"?c:(c[qf]||(c[qf]=function(d){return c.handleEvent(d)}),c[qf])}function ft(){mr.call(this),this.i=new Ic(this),this.M=this,this.F=null}b(ft,mr),ft.prototype[aa]=!0,ft.prototype.removeEventListener=function(c,d,f,g){fI(this,c,d,f,g)};function _t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var C=d;d=new ht(g,c),E(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var j=d.g=f[x];C=Ec(j,g,!0,d)&&C}if(j=d.g=c,C=Ec(j,g,!0,d)&&C,C=Ec(j,g,!1,d)&&C,f)for(x=0;x<f.length;x++)j=d.g=f[x],C=Ec(j,g,!1,d)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)wc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ec(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var j=d[x];if(j&&!j.da&&j.capture==f){var Ce=j.listener,at=j.ha||j.src;j.fa&&Lf(c.i,j),C=Ce.call(at,g)!==!1&&C}}return C&&!g.defaultPrevented}function gI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function mI(c){c.g=gI(()=>{c.g=null,c.i&&(c.i=!1,mI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class lR extends mr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ua(c){mr.call(this),this.h=c,this.g={}}b(ua,mr);var yI=[];function vI(c){Y(c.g,function(d,f){this.g.hasOwnProperty(f)&&$f(d)},c),c.g={}}ua.prototype.N=function(){ua.aa.N.call(this),vI(this)},ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gf=a.JSON.stringify,dR=a.JSON.parse,hR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wf(){}Wf.prototype.h=null;function _I(c){return c.h||(c.h=c.i())}function wI(){}var ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kf(){ht.call(this,"d")}b(Kf,ht);function Qf(){ht.call(this,"c")}b(Qf,ht);var ui={},II=null;function Dc(){return II=II||new ft}ui.La="serverreachability";function EI(c){ht.call(this,ui.La,c)}b(EI,ht);function la(c){let d=Dc();_t(d,new EI(d))}ui.STAT_EVENT="statevent";function DI(c,d){ht.call(this,ui.STAT_EVENT,c),this.stat=d}b(DI,ht);function wt(c){let d=Dc();_t(d,new DI(d,c))}ui.Ma="timingevent";function CI(c,d){ht.call(this,ui.Ma,c),this.size=d}b(CI,ht);function da(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ha(){this.g=!0}ha.prototype.xa=function(){this.g=!1};function fR(c,d,f,g,C,x){c.info(function(){if(c.g)if(x)for(var j="",Ce=x.split("&"),at=0;at<Ce.length;at++){var we=Ce[at].split("=");if(1<we.length){var pt=we[0];we=we[1];var gt=pt.split("_");j=2<=gt.length&&gt[1]=="type"?j+(pt+"="+we+"&"):j+(pt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+j})}function pR(c,d,f,g,C,x,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+j})}function co(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+mR(c,f)+(g?" "+g:"")})}function gR(c,d){c.info(function(){return"TIMEOUT: "+d})}ha.prototype.info=function(){};function mR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return Gf(f)}catch{return d}}var Cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yf;function bc(){}b(bc,Wf),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},Yf=new bc;function yr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ua(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new TI}function TI(){this.i=null,this.g="",this.h=!1}var SI={},Zf={};function Jf(c,d,f){c.L=1,c.v=Mc($n(d)),c.m=f,c.P=!0,AI(c,null)}function AI(c,d){c.F=Date.now(),Tc(c),c.A=$n(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),$I(f.i,"t",g),c.C=0,f=c.j.J,c.h=new TI,c.g=sE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new lR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(yI[0]=C.toString()),C=yI);for(var x=0;x<C.length;x++){var j=lI(f,C[x],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),la(),fR(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Hn(this.g);var d=this.g.Ba();let fo=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||QI(this.g)))){this.J||gt!=4||d==7||(d==8||0>=fo?la(3):la(2)),Xf(this);var f=this.g.Z();this.X=f;t:if(MI(this)){var g=QI(this.g);c="";var C=g.length,x=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),fa(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,pR(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,at=this.g;if((Ce=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ce)){var we=Ce;break t}}we=null}if(f=we)co(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ep(this,f);else{this.o=!1,this.s=3,wt(12),ci(this),fa(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<j.length;)if(rn=yR(this,j),rn==Zf){gt==4&&(this.s=4,wt(14),f=!1),co(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==SI){this.s=4,wt(15),co(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else co(this.i,this.l,rn,null),ep(this,rn);if(MI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||j.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)co(this.i,this.l,j,"[Invalid Chunked Response]"),ci(this),fa(this);else if(0<j.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),sp(pt),pt.M=!0,wt(11))}}else co(this.i,this.l,j,null),ep(this,j);gt==4&&ci(this),this.o&&!this.J&&(gt==4?nE(this.j,this):(this.o=!1,Tc(this)))}else kR(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ci(this),fa(this)}}}catch{}finally{}};function MI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function yR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Zf:(f=Number(d.substring(f,g)),isNaN(f)?SI:(g+=1,g+f>d.length?Zf:(d=d.slice(g,g+f),c.C=g+f,d)))}yr.prototype.cancel=function(){this.J=!0,ci(this)};function Tc(c){c.S=Date.now()+c.I,xI(c,c.I)}function xI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=da(m(c.ba,c),d)}function Xf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(gR(this.i,this.A),this.L!=2&&(la(),wt(17)),ci(this),this.s=2,fa(this)):xI(this,this.S-c)};function fa(c){c.j.G==0||c.J||nE(c.j,c)}function ci(c){Xf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,vI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ep(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||tp(f.h,c))){if(!c.K&&tp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)kc(f),Nc(f);else break e;op(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=da(m(f.Za,f),6e3));if(1>=PI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else di(f,11)}else if((c.K||f.g==c)&&kc(f),!H(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let pt=we[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=we[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let fo=we[5];fo!=null&&typeof fo=="number"&&0<fo&&(g=1.5*fo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let rn=c.g;if(rn){let Fc=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fc){var x=g.h;x.g||Fc.indexOf("spdy")==-1&&Fc.indexOf("quic")==-1&&Fc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(np(x,x.h),x.h=null))}if(g.D){let ap=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;ap&&(g.ya=ap,Ae(g.I,g.D,ap))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=oE(g,g.J?g.ia:null,g.W),j.K){kI(g.h,j);var Ce=j,at=g.L;at&&(Ce.I=at),Ce.B&&(Xf(Ce),Tc(Ce)),g.g=j}else eE(g);0<f.i.length&&Pc(f)}else we[0]!="stop"&&we[0]!="close"||di(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?di(f,7):ip(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}la(4)}catch{}}var vR=class{constructor(c,d){this.g=c,this.map=d}};function RI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function PI(c){return c.h?1:c.g?c.g.size:0}function tp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function np(c,d){c.g?c.g.add(d):c.h=d}function kI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}RI.prototype.cancel=function(){if(this.i=OI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function OI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function _R(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function wR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function FI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=wR(c),g=_R(c),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],c)}var VI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var x=c[f].substring(0,g);C=c[f].substring(g+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof li){this.h=c.h,Sc(this,c.j),this.o=c.o,this.g=c.g,Ac(this,c.s),this.l=c.l;var d=c.i,f=new ma;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),LI(this,f),this.m=c.m}else c&&(d=String(c).match(VI))?(this.h=!1,Sc(this,d[1]||"",!0),this.o=pa(d[2]||""),this.g=pa(d[3]||"",!0),Ac(this,d[4]),this.l=pa(d[5]||"",!0),LI(this,d[6]||"",!0),this.m=pa(d[7]||"")):(this.h=!1,this.i=new ma(null,this.h))}li.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ga(d,jI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ga(d,jI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ga(f,f.charAt(0)=="/"?CR:DR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ga(f,TR)),c.join("")};function $n(c){return new li(c)}function Sc(c,d,f){c.j=f?pa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ac(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function LI(c,d,f){d instanceof ma?(c.i=d,SR(c.i,c.h)):(f||(d=ga(d,bR)),c.i=new ma(d,c.h))}function Ae(c,d,f){c.i.set(d,f)}function Mc(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function pa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ga(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,ER),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ER(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jI=/[#\/\?@]/g,DR=/[#\?:]/g,CR=/[#\?]/g,bR=/[#\?@]/g,TR=/#/g;function ma(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&IR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ma.prototype,n.add=function(c,d){vr(this),this.i=null,c=lo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function BI(c,d){vr(c),d=lo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function UI(c,d){return vr(c),d=lo(c,d),c.g.has(d)}n.forEach=function(c,d){vr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){vr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(c){vr(this);let d=[];if(typeof c=="string")UI(this,c)&&(d=d.concat(this.g.get(lo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return vr(this),this.i=null,c=lo(this,c),UI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $I(c,d,f){BI(c,d),0<f.length&&(c.i=null,c.g.set(lo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var C=x;j[g]!==""&&(C+="="+encodeURIComponent(String(j[g]))),c.push(C)}}return this.i=c.join("&")};function lo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function SR(c,d){d&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(BI(this,g),$I(this,C,f))},c)),c.j=d}function AR(c,d){let f=new ha;if(a.Image){let g=new Image;g.onload=y(_r,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(_r,f,"TestLoadImage: error",!1,d,g),g.onabort=y(_r,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(_r,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function MR(c,d){let f=new ha,g=new AbortController,C=setTimeout(()=>{g.abort(),_r(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?_r(f,"TestPingServer: ok",!0,d):_r(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),_r(f,"TestPingServer: error",!1,d)})}function _r(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function xR(){this.g=new hR}function RR(c,d,f){let g=f||"";try{FI(c,function(C,x){let j=C;l(C)&&(j=Gf(C)),d.push(g+x+"="+encodeURIComponent(j))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ya(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ya,Wf),ya.prototype.g=function(){return new xc(this.l,this.j)},ya.prototype.i=function(c){return function(){return c}}({});function xc(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(xc,ft),n=xc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,_a(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;HI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function HI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?va(this):_a(this),this.readyState==3&&HI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,va(this))},n.Qa=function(c){this.g&&(this.response=c,va(this))},n.ga=function(){this.g&&va(this)};function va(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_a(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function _a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qI(c){let d="";return Y(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function rp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=qI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ae(c,d,f))}function Ve(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ve,ft);var NR=/^https?$/i,PR=["POST","PUT"];n=Ve.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yf.g(),this.v=this.o?_I(this.o):_I(Yf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){zI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of f)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{KI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){zI(this,x)}};function zI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,GI(c),Rc(c)}function GI(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Rc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),Ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?WI(this):this.bb())},n.bb=function(){WI(this)};function WI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)gI(c.Ea,0,c);else if(_t(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var C=String(c.D).match(VI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!NR.test(C?C.toLowerCase():"")}f=g}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var x=2<Hn(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",GI(c)}}finally{Rc(c)}}}}function Rc(c,d){if(c.g){KI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=g}catch{}}}function KI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),dR(d)}};function QI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kR(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(H(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function YI(c){this.Aa=0,this.i=[],this.j=new ha,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,c),this.cb=wa("retryDelaySeedMs",1e4,c),this.Wa=wa("forwardChannelMaxRetries",2,c),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new RI(c&&c.concurrentRequestLimit),this.Da=new xR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=YI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){wt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=oE(this,null,this.W),Pc(this)};function ip(c){if(ZI(c),c.G==3){var d=c.U++,f=$n(c.I);if(Ae(f,"SID",c.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),Ia(c,f),d=new yr(c,c.j,d),d.L=2,d.v=Mc($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=sE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tc(d)}iE(c)}function Nc(c){c.g&&(sp(c),c.g.cancel(),c.g=null)}function ZI(c){Nc(c),c.u&&(a.clearTimeout(c.u),c.u=null),kc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Pc(c){if(!NI(c.h)&&!c.s){c.s=!0;var d=c.Ga;ia||cI(),oa||(ia(),oa=!0),Vf.add(d,c),c.B=0}}function OR(c,d){return PI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=da(m(c.Ga,c,d),rE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new yr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=XI(this,C,d),f=$n(this.I),Ae(f,"RID",c),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Ia(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(qI(x)))+"&"+d:this.m&&rp(f,this.m,x)),np(this.h,C),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),C.T=!0,Jf(C,f,null)):Jf(C,f,d),this.G=2}}else this.G==3&&(c?JI(this,c):this.i.length==0||NI(this.h)||JI(this))};function JI(c,d){var f;d?f=d.l:f=c.U++;let g=$n(c.I);Ae(g,"SID",c.K),Ae(g,"RID",f),Ae(g,"AID",c.T),Ia(c,g),c.m&&c.o&&rp(g,c.m,c.o),f=new yr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=XI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),np(c.h,f),Jf(f,g,d)}function Ia(c,d){c.H&&Y(c.H,function(f,g){Ae(d,g,f)}),c.l&&FI({},function(f,g){Ae(d,g,f)})}function XI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let j=["count="+f];x==-1?0<f?(x=C[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let Ce=!0;for(let at=0;at<f;at++){let we=C[at].g,pt=C[at].map;if(we-=x,0>we)x=Math.max(0,C[at].g-100),Ce=!1;else try{RR(pt,j,"req"+we+"_")}catch{g&&g(pt)}}if(Ce){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function eE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ia||cI(),oa||(ia(),oa=!0),Vf.add(d,c),c.v=0}}function op(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=da(m(c.Fa,c),rE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,tE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=da(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Nc(this),tE(this))};function sp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tE(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$n(c.qa);Ae(d,"RID","rpc"),Ae(d,"SID",c.K),Ae(d,"AID",c.T),Ae(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(d,"TO",c.ja),Ae(d,"TYPE","xmlhttp"),Ia(c,d),c.m&&c.o&&rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Mc($n(d)),f.m=null,f.P=!0,AI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Nc(this),op(this),wt(19))};function kc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nE(c,d){var f=null;if(c.g==d){kc(c),sp(c),c.g=null;var g=2}else if(tp(c.h,d))f=d.D,kI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Dc(),_t(g,new CI(g,f)),Pc(c)}else eE(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&OR(c,d)||g==2&&op(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:di(c,5);break;case 4:di(c,10);break;case 3:di(c,6);break;default:di(c,2)}}}function rE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function di(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new li(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(g,"https"),Mc(g),C?AR(g.toString(),f):MR(g.toString(),f)}else wt(2);c.G=0,c.l&&c.l.sa(d),iE(c),ZI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function iE(c){if(c.G=0,c.ka=[],c.l){let d=OI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function oE(c,d,f){var g=f instanceof li?$n(f):new li(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ac(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new li(null);g&&Sc(x,g),d&&(x.g=d),C&&Ac(x,C),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",c.la),Ia(c,g),g}function sE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ve(new ya({eb:f})):new Ve(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function aE(){}n=aE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Oc(){}Oc.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){ft.call(this),this.g=new YI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ho(this)}b(Lt,ft),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){ip(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Gf(c),c=f);d.i.push(new vR(d.Ya++,c)),d.G==3&&Pc(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,ip(this.g),delete this.g,Lt.aa.N.call(this)};function uE(c){Kf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(uE,Kf);function cE(){Qf.call(this),this.status=1}b(cE,Qf);function ho(c){this.g=c}b(ho,aE),ho.prototype.ua=function(){_t(this.g,"a")},ho.prototype.ta=function(c){_t(this.g,new uE(c))},ho.prototype.sa=function(c){_t(this.g,new cE)},ho.prototype.ra=function(){_t(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Zy=sr.createWebChannelTransport=function(){return new Oc},Yy=sr.getStatEventTarget=function(){return Dc()},Qy=sr.Event=ui,ih=sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cc.NO_ERROR=0,Cc.TIMEOUT=8,Cc.HTTP_ERROR=6,Su=sr.ErrorCode=Cc,bI.COMPLETE="complete",Ky=sr.EventType=bI,wI.EventType=ca,ca.OPEN="a",ca.CLOSE="b",ca.ERROR="c",ca.MESSAGE="d",ft.prototype.listen=ft.prototype.K,hs=sr.WebChannel=wI,Uj=sr.FetchXmlHttpFactory=ya,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,Wy=sr.XhrIo=Ve}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});var qT="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Hs="10.14.0";var Qr=new jc("@firebase/firestore");function ys(){return Qr.logLevel}function WS(n){Qr.setLogLevel(n)}function k(n,...e){if(Qr.logLevel<=_n.DEBUG){let t=e.map(nw);Qr.debug(`Firestore (${Hs}): ${n}`,...t)}}function Ue(n,...e){if(Qr.logLevel<=_n.ERROR){let t=e.map(nw);Qr.error(`Firestore (${Hs}): ${n}`,...t)}}function pn(n,...e){if(Qr.logLevel<=_n.WARN){let t=e.map(nw);Qr.warn(`Firestore (${Hs}): ${n}`,...t)}}function nw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: `+n;throw Ue(e),new Error(e)}function G(n,e){n||z()}function KS(n,e){n||z()}function U(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends gE{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ph=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},iv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ov=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new ph(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new Qe(e)}},sv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},av=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new sv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new uv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function $j(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var gh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=$j(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function Ts(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function QS(n){return n+"\0"}var Oe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Oe(0,0))}static max(){return new n(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends mh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Hj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=class n extends mh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Hj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var Ss=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function lv(n){return n.fields.find(e=>e.kind===2)}function Li(n){return n.fields.filter(e=>e.kind!==2)}Ss.UNKNOWN_ID=-1;var Ds=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ju=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,tn.min())}};function YS(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new tn(i,$.empty(),e)}function ZS(n){return new tn(n.readTime,n.key,-1)}var tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),$.empty(),-1)}static max(){return new n(J.max(),$.empty(),-1)}};function rw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var JS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function oi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==JS)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var vh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new qi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=iw(r.target.error);this.V.reject(new qi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new qi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new hv(t)}},Yr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ea())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),ji(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lc())return!1;if(n.v())return!0;let e=Ea(),t=n.S(e),r=0<t&&t<10,i=XS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=vh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function XS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var dv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ji(this.B.delete())}},qi=class extends P{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function si(n){return n.name==="IndexedDbTransactionError"}var hv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ji(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),ji(this.store.add(e))}get(e){return ji(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),ji(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),ji(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=iw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new dv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ji(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=iw(r.target.error);t(i)}})}var zT=!1;function iw(n){let e=Yr.S(Ea());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zT||(zT=!0,setTimeout(()=>{throw r},0)),r}}return n}var fv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){si(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield oi(t)}yield this.X(6e4)}))}},pv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=ZS(o);rw(s,r)>0&&(r=s)}),new tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var qt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sc(n){return n==null}function Bu(n){return n===0&&1/n==-1/0}function eA(n){return typeof n=="number"&&Number.isInteger(n)&&!Bu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Tt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GT(e)),e=qj(n.get(t),e);return GT(e)}function qj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function GT(n){return n+""}function Rn(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new me(r)}var WT=["userId","batchId"];function ch(n,e){return[n,Tt(e)]}function tA(n,e,t){return[n,Tt(e),t]}var zj={},Gj=["prefixPath","collectionGroup","readTime","documentId"],Wj=["prefixPath","collectionGroup","documentId"],Kj=["collectionGroup","readTime","prefixPath","documentId"],Qj=["canonicalId","targetId"],Yj=["targetId","path"],Zj=["path","targetId"],Jj=["collectionId","parent"],Xj=["indexId","uid"],e2=["uid","sequenceNumber"],t2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n2=["indexId","uid","orderedDocumentKey"],r2=["userId","collectionPath","documentId"],i2=["userId","collectionPath","largestBatchId"],o2=["userId","collectionGroup","largestBatchId"],nA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s2=[...nA,"documentOverlays"],rA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iA=rA,ow=[...iA,"indexConfiguration","indexState","indexEntries"],a2=ow,u2=[...ow,"globals"];var Uu=class extends yh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=U(n);return Yr.F(t._e,e)}function KT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function no(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Es(this.root,e,this.comparator,!1)}getReverseIterator(){return new Es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Es(this.root,e,this.comparator,!0)}},Es=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Te=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _h(this.data.getIterator())}getIteratorFrom(e){return new _h(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_h=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function fs(n){return n.hasNext()?n.getNext():void 0}var zt=class n{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new n([])}unionWith(e){let t=new Te($e.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ts(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var wh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function sA(){return typeof atob<"u"}var qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var c2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(n){if(G(!!n),typeof n=="string"){let e=0,t=c2.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(n.seconds),nanos:Pe(n.nanos)}}function Pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zr(n){return typeof n=="string"?qe.fromBase64String(n):qe.fromUint8Array(n)}function hf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function sw(n){let e=n.mapValue.fields.__previous_value__;return hf(e)?sw(e):e}function $u(n){let e=cr(n.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var gv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Jr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Wr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lh={nullValue:"NULL_VALUE"};function zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hf(n)?4:aA(n)?9007199254740991:ff(n)?10:11:z()}function Fn(n,e){if(n===e)return!0;let t=zi(n);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $u(n).isEqual($u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=cr(i.timestampValue),a=cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Zr(i.bytesValue).isEqual(Zr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?Bu(s)===Bu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ts(n.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(KT(s)!==KT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Hu(n,e){return(n.values||[]).find(t=>Fn(t,e))!==void 0}function Xr(n,e){if(n===e)return 0;let t=zi(n),r=zi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return QT(n.timestampValue,e.timestampValue);case 4:return QT($u(n),$u(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Zr(o),u=Zr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Pe(o.latitude),Pe(s.latitude));return a!==0?a:re(Pe(o.longitude),Pe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return YT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,A=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:YT(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Wr.mapValue&&s===Wr.mapValue)return 0;if(o===Wr.mapValue)return 1;if(s===Wr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=re(u[p],h[p]);if(m!==0)return m;let y=Xr(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function QT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=cr(n),r=cr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function YT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function As(n){return mv(n)}function mv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=cr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Zr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=mv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${mv(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Gi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yv(n){return!!n&&"integerValue"in n}function qu(n){return!!n&&"arrayValue"in n}function ZT(n){return!!n&&"nullValue"in n}function JT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return no(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ku(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var uA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function l2(n){return"nullValue"in n?lh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gi(Jr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ff(n)?uA:{mapValue:{}}:z()}function d2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gi(Jr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?uA:"mapValue"in n?ff(n)?{mapValue:{}}:Wr:z()}function XT(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eS(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=$e.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ku(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){no(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ku(this.value))}};function cA(n){let e=[];return no(n.fields,(t,r)=>{let i=new $e([t]);if(dh(r)){let o=cA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zt(e)}var Ye=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vn=class{constructor(e,t){this.position=e,this.inclusive=t}};function tS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Xr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fn(n.position[t],e.position[t]))return!1;return!0}var Wi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function h2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ih=class{},fe=class n extends Ih{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wv(e,t,r):t==="array-contains"?new Dv(e,r):t==="in"?new Eh(e,r):t==="not-in"?new Cv(e,r):t==="array-contains-any"?new bv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Iv(e,r):new Ev(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Xr(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class n extends Ih{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ms(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ms(n){return n.op==="and"}function vv(n){return n.op==="or"}function aw(n){return lA(n)&&Ms(n)}function lA(n){for(let e of n.filters)if(e instanceof De)return!1;return!0}function _v(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+As(n.value);if(aw(n))return n.filters.map(e=>_v(e)).join(",");{let e=n.filters.map(t=>_v(t)).join(",");return`${n.op}(${e})`}}function dA(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(n,e):n instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dA(s,i.filters[a]),!0):!1}(n,e):void z()}function hA(n,e){let t=n.filters.concat(e);return De.create(t,n.op)}function fA(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${As(t.value)}`}(n):n instanceof De?function(t){return t.op.toString()+" {"+t.getFilters().map(fA).join(" ,")+"}"}(n):"Filter"}var wv=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Iv=class extends fe{constructor(e,t){super(e,"in",t),this.keys=pA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Ev=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=pA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function pA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Dv=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return qu(t)&&Hu(t.arrayValue,this.value)}},Eh=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}},Cv=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Hu(this.value.arrayValue,t)}},bv=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!qu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}};var Tv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Sv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Tv(n,e,t,r,i,o,s)}function Ki(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_v(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>As(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>As(r)).join(",")),e.ue=t}return e.ue}function ac(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nS(n.startAt,e.startAt)&&nS(n.endAt,e.endAt)}function Dh(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ch(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function rS(n,e,t){let r=lh,i=!0;for(let o of Ch(n,e)){let s=lh,a=!0;switch(o.op){case"<":case"<=":s=l2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=lh}XT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];XT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function iS(n,e,t){let r=Wr,i=!0;for(let o of Ch(n,e)){let s=Wr,a=!0;switch(o.op){case">=":case">":s=d2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wr}eS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];eS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function gA(n,e,t,r,i,o,s,a){return new gn(n,e,t,r,i,o,s,a)}function qs(n){return new gn(n)}function oS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uw(n){return n.collectionGroup!==null}function Cs(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Te($e.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wi(o,r))}),t.has($e.keyField().canonicalString())||e.ce.push(new Wi($e.keyField(),r))}return e.ce}function St(n){let e=U(n);return e.le||(e.le=f2(e,Cs(n))),e.le}function f2(n,e){if(n.limitType==="F")return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wi(i.field,o)});let t=n.endAt?new Vn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vn(n.startAt.position,n.startAt.inclusive):null;return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Av(n,e){let t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bh(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uc(n,e){return ac(St(n),St(e))&&n.limitType===e.limitType}function mA(n){return`${Ki(St(n))}|lt:${n.limitType}`}function vs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fA(i)).join(", ")}]`),sc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>As(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>As(i)).join(",")),`Target(${r})`}(St(n))}; limitType=${n.limitType})`}function cc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Cs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=tS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Cs(r),i)||r.endAt&&!function(s,a,u){let l=tS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Cs(r),i))}(n,e)}function yA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vA(n){return(e,t)=>{let r=!1;for(let i of Cs(n)){let o=p2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function p2(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Xr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Ln=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return oA(this.inner)}size(){return this.innerSize}};var g2=new Re($.comparator);function Vt(){return g2}var _A=new Re($.comparator);function Nu(...n){let e=_A;for(let t of n)e=e.insert(t.key,t);return e}function wA(n){let e=_A;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return Ou()}function IA(){return Ou()}function Ou(){return new Ln(n=>n.toString(),(n,e)=>n.isEqual(e))}var m2=new Re($.comparator),y2=new Te($.comparator);function ie(...n){let e=y2;for(let t of n)e=e.add(t);return e}var v2=new Te(re);function cw(){return v2}function lw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function EA(n){return{integerValue:""+n}}function DA(n,e){return eA(e)?EA(e):lw(n,e)}var xs=class{constructor(){this._=void 0}};function _2(n,e,t){return n instanceof ei?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hf(o)&&(o=sw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof lr?bA(n,e):n instanceof dr?TA(n,e):function(i,o){let s=CA(i,o),a=sS(s)+sS(i.Pe);return yv(s)&&yv(i.Pe)?EA(a):lw(i.serializer,a)}(n,e)}function w2(n,e,t){return n instanceof lr?bA(n,e):n instanceof dr?TA(n,e):t}function CA(n,e){return n instanceof ti?function(r){return yv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ei=class extends xs{},lr=class extends xs{constructor(e){super(),this.elements=e}};function bA(n,e){let t=SA(e);for(let r of n.elements)t.some(i=>Fn(i,r))||t.push(r);return{arrayValue:{values:t}}}var dr=class extends xs{constructor(e){super(),this.elements=e}};function TA(n,e){let t=SA(e);for(let r of n.elements)t=t.filter(i=>!Fn(i,r));return{arrayValue:{values:t}}}var ti=class extends xs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function sS(n){return Pe(n.integerValue||n.doubleValue)}function SA(n){return qu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Qi=class{constructor(e,t){this.field=e,this.transform=t}};function I2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof lr&&i instanceof lr||r instanceof dr&&i instanceof dr?Ts(r.elements,i.elements,Fn):r instanceof ti&&i instanceof ti?Fn(r.Pe,i.Pe):r instanceof ei&&i instanceof ei}(n.transform,e.transform)}var Mv=class{constructor(e,t){this.version=e,this.transformResults=t}},Be=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Rs=class{};function AA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ri(n.key,Be.none()):new ni(n.key,n.data,Be.none());{let t=n.data,r=vt.empty(),i=new Te($e.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mn(n.key,r,new zt(i.toArray()),Be.none())}}function E2(n,e,t){n instanceof ni?function(i,o,s){let a=i.value.clone(),u=uS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mn?function(i,o,s){if(!hh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=uS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(MA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Fu(n,e,t,r){return n instanceof ni?function(o,s,a,u){if(!hh(o.precondition,s))return a;let l=o.value.clone(),h=cS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof mn?function(o,s,a,u){if(!hh(o.precondition,s))return a;let l=cS(o.fieldTransforms,u,s),h=s.data;return h.setAll(MA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return hh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function D2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=CA(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function aS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ts(r,i,(o,s)=>I2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ni=class extends Rs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends Rs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function uS(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,w2(s,a,t[i]))}return r}function cS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,_2(o,s,e))}return r}var ri=class extends Rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zu=class extends Rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Gu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&E2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=IA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=AA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,(t,r)=>aS(t,r))&&Ts(this.baseMutations,e.baseMutations,(t,r)=>aS(t,r))}},xv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return m2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Wu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,ge;function xA(n){switch(n){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function RA(n){if(n===void 0)return Ue("GRPC error has no .code"),R.UNKNOWN;switch(n){case We.OK:return R.OK;case We.CANCELLED:return R.CANCELLED;case We.UNKNOWN:return R.UNKNOWN;case We.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case We.INTERNAL:return R.INTERNAL;case We.UNAVAILABLE:return R.UNAVAILABLE;case We.UNAUTHENTICATED:return R.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case We.NOT_FOUND:return R.NOT_FOUND;case We.ALREADY_EXISTS:return R.ALREADY_EXISTS;case We.PERMISSION_DENIED:return R.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case We.ABORTED:return R.ABORTED;case We.OUT_OF_RANGE:return R.OUT_OF_RANGE;case We.UNIMPLEMENTED:return R.UNIMPLEMENTED;case We.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var lS=null;function NA(){return new TextEncoder}var C2=new $r([4294967295,4294967295],0);function dS(n){let e=NA().encode(n),t=new Gy;return t.update(e),new Uint8Array(t.digest())}function hS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $r([t,r],0),new $r([i,o],0)]}var Nv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hi(`Invalid padding: ${t}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=$r.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply($r.fromNumber(r)));return i.compare(C2)===1&&(i=new $r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=dS(e),[r,i]=hS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=dS(e),[r,i]=hS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ku=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Re(re),Vt(),ie())}},Qu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var bs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Th=class{constructor(e,t){this.targetId=e,this.me=t}},Sh=class{constructor(e,t,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ah=class{constructor(){this.fe=0,this.ge=pS(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Qu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=pS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,G(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Pv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vt(),this.qe=fS(),this.Qe=new Re(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Dh(o))if(r===0){let s=new $(o.path);this.Ue(t,s,Ye.newNoDocument(s,J.min()))}else G(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}lS?.et(function(h,p,m,y,b){var A,M,F,H,O,W;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Y=p.unchangedNames;return Y&&(ee.bloomFilter={applied:b===0,hashCount:(A=Y?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(H=(F=(M=Y?.bits)===null||M===void 0?void 0:M.bitmap)===null||F===void 0?void 0:F.length)!==null&&H!==void 0?H:0,padding:(W=(O=Y?.bits)===null||O===void 0?void 0:O.padding)!==null&&W!==void 0?W:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Zr(r).toUint8Array()}catch(u){if(u instanceof wh)return pn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Nv(s,i,o)}catch(u){return pn(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Dh(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Ye.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ku(e,t,this.Qe,this.ke,r);return this.ke=Vt(),this.qe=fS(),this.Qe=new Re(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ah,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Te(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ah),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function fS(){return new Re($.comparator)}function pS(){return new Re($.comparator)}var b2={asc:"ASCENDING",desc:"DESCENDING"},T2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S2={and:"AND",or:"OR"},kv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ov(n,e){return n.useProto3Json||sc(e)?e:{value:e}}function Ns(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function A2(n,e){return Ns(n,e.toTimestamp())}function He(n){return G(!!n),J.fromTimestamp(function(t){let r=cr(t);return new Oe(r.seconds,r.nanos)}(n))}function dw(n,e){return Fv(n,e).canonicalString()}function Fv(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kA(n){let e=me.fromString(n);return G(qA(e)),e}function Yu(n,e){return dw(n.databaseId,e.path)}function kn(n,e){let t=kA(e);if(t.get(1)!==n.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(VA(t))}function OA(n,e){return dw(n.databaseId,e)}function FA(n){let e=kA(n);return e.length===4?me.emptyPath():VA(e)}function Vv(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VA(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function gS(n,e,t){return{name:Yu(n,e),fields:t.value.mapValue.fields}}function LA(n,e,t){let r=kn(n,e.name),i=He(e.updateTime),o=e.createTime?He(e.createTime):J.min(),s=new vt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function M2(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=He(i.found.updateTime),a=i.found.createTime?He(i.found.createTime):J.min(),u=new vt({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=kn(r,i.missing),s=He(i.readTime);return Ye.newNoDocument(o,s)}(n,e):z()}function x2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(G(h===void 0||typeof h=="string"),qe.fromBase64String(h||"")):(G(h===void 0||h instanceof Buffer||h instanceof Uint8Array),qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:RA(l.code);return new P(h,l.message||"")}(s);t=new Sh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=He(r.document.updateTime),s=r.document.createTime?He(r.document.createTime):J.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=Ye.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new bs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?He(r.readTime):J.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];t=new bs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new bs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Rv(i,o),a=r.targetId;t=new Th(a,s)}}return t}function Zu(n,e){let t;if(e instanceof ni)t={update:gS(n,e.key,e.value)};else if(e instanceof ri)t={delete:Yu(n,e.key)};else if(e instanceof mn)t={update:gS(n,e.key,e.data),updateMask:F2(e.fieldMask)};else{if(!(e instanceof zu))return z();t={verify:Yu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ei)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ti)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:A2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Lv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Be.updateTime(He(o.updateTime)):o.exists!==void 0?Be.exists(o.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),u=new ei;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new lr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new dr(h)}else"increment"in a?u=new ti(s,a.increment):z();let l=$e.fromServerFormat(a.fieldPath);return new Qi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new zt(l.map(h=>$e.fromServerFormat(h)))}(e.updateMask);return new mn(i,o,s,t,r)}return new ni(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new ri(i,t)}if(e.verify){let i=kn(n,e.verify);return new zu(i,t)}return z()}function R2(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?He(i.updateTime):He(o);return s.isEqual(J.min())&&(s=He(o)),new Mv(s,i.transformResults||[])}(t,e))):[]}function jA(n,e){return{documents:[OA(n,e.path)]}}function BA(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OA(n,i);let o=function(l){if(l.length!==0)return HA(De.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:_s(m.field),direction:P2(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ov(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function UA(n){let e=FA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=$A(p);return m instanceof De&&aw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Wi(ws(b.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,sc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Vn(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Vn(y,m)}(t.endAt)),gA(e,i,s,o,a,"F",u,l)}function N2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $A(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ws(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ws(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ws(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ws(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(ws(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return De.create(t.compositeFilter.filters.map(r=>$A(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function P2(n){return b2[n]}function k2(n){return T2[n]}function O2(n){return S2[n]}function _s(n){return{fieldPath:n.canonicalString()}}function ws(n){return $e.fromServerFormat(n.fieldPath)}function HA(n){return n instanceof fe?function(t){if(t.op==="=="){if(JT(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NAN"}};if(ZT(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JT(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NOT_NAN"}};if(ZT(t.value))return{unaryFilter:{field:_s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(t.field),op:k2(t.op),value:t.value}}}(n):n instanceof De?function(t){let r=t.getFilters().map(i=>HA(i));return r.length===1?r[0]:{compositeFilter:{op:O2(t.op),filters:r}}}(n):z()}function F2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ps=class n{constructor(e,t,r,i,o=J.min(),s=J.min(),a=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Mh=class{constructor(e){this.ct=e}};function V2(n,e){let t;if(e.document)t=LA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Zi(e.noDocument.readTime);t=Ye.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Zi(e.unknownDocument.version);t=Ye.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Oe(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),t}function mS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Yu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ns(o,s.version.toTimestamp()),createTime:Ns(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yi(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Yi(e.version)}}return r}function xh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(n){let e=new Oe(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Bi(n,e){let t=(e.baseMutations||[]).map(o=>Lv(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Lv(n.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new Gu(e.batchId,i,t,r)}function Pu(n){let e=Zi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zi(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),St(qs(FA(o.documents[0])))}(n.query):function(o){return St(UA(o))}(n.query),new Ps(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qe.fromBase64String(n.resumeToken))}function zA(n,e){let t=Yi(e.snapshotVersion),r=Yi(e.lastLimboFreeSnapshotVersion),i;i=Dh(e.target)?jA(n.ct,e.target):BA(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ki(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hw(n){let e=UA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bh(e,e.limit,"L"):e}function Jy(n,e){return new Wu(e.largestBatchId,Lv(n.ct,e.overlayMutation))}function yS(n,e){let t=e.path.lastSegment();return[n,Tt(e.path.popLast()),t]}function vS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yi(r.readTime),documentKey:Tt(r.documentKey.path),largestBatchId:r.largestBatchId}}var jv=class{getBundleMetadata(e,t){return _S(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Zi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return _S(e).put(function(i){return{bundleId:i.id,createTime:Yi(He(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return wS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:hw(o.bundledQuery),readTime:Zi(o.readTime)}}(r)})}saveNamedQuery(e,t){return wS(e).put(function(i){return{name:i.name,readTime:Yi(He(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function _S(n){return it(n,"bundles")}function wS(n){return it(n,"namedQueries")}var Rh=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Au(e).get(yS(this.userId,t)).next(r=>r?Jy(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Wu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Tt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Au(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nn(),o=Tt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Au(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Jy(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Jy(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Au(e).put(function(i,o,s){let[a,u,l]=yS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Au(n){return it(n,"documentOverlays")}var Bv=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?qe.fromUint8Array(r):qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ar=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=cr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Zr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?aA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ff(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Pe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ar.vt=new ar;function L2(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function IS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=L2(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Uv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=IS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=IS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},$v=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Hv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ui=class{constructor(){this.jt=new Uv,this.Ht=new $v(this.jt),this.Jt=new Hv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var $i=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Hr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=ES(n.arrayValue,e.arrayValue),t!==0?t:(t=ES(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function ES(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Nh=class{constructor(e){this.Xt=new Te((t,r)=>$e.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(G(e.collectionGroup===this.collectionId),this.nn)return!1;let t=lv(e);if(t!==void 0&&!this.sn(t))return!1;let r=Li(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Te($e.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ds(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ds(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ds(r.field,r.dir==="asc"?0:1)));return new Ss(Ss.UNKNOWN_ID,this.collectionId,t,ju.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function GA(n){var e,t;if(G(n instanceof fe||n instanceof De),n instanceof fe){if(n instanceof Eh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return De.create(i,"or")}return n}let r=n.filters.map(i=>GA(i));return De.create(r,n.op)}function j2(n){if(n.getFilters().length===0)return[];let e=Gv(GA(n));return G(WA(e)),qv(e)||zv(e)?[e]:e.getFilters()}function qv(n){return n instanceof fe}function zv(n){return n instanceof De&&aw(n)}function WA(n){return qv(n)||zv(n)||function(t){if(t instanceof De&&vv(t)){for(let r of t.getFilters())if(!qv(r)&&!zv(r))return!1;return!0}return!1}(n)}function Gv(n){if(G(n instanceof fe||n instanceof De),n instanceof fe)return n;if(n.filters.length===1)return Gv(n.filters[0]);let e=n.filters.map(r=>Gv(r)),t=De.create(e,n.op);return t=Ph(t),WA(t)?t:(G(t instanceof De),G(Ms(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>fw(r,i)))}function fw(n,e){let t;return G(n instanceof fe||n instanceof De),G(e instanceof fe||e instanceof De),t=n instanceof fe?e instanceof fe?function(i,o){return De.create([i,o],"and")}(n,e):DS(n,e):e instanceof fe?DS(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),Ms(i)&&Ms(o))return hA(i,o.getFilters());let s=vv(i)?i:o,a=vv(i)?o:i,u=s.filters.map(l=>fw(l,a));return De.create(u,"or")}(n,e),Ph(t)}function DS(n,e){if(Ms(e))return hA(e,n.getFilters());{let t=e.filters.map(r=>fw(n,r));return De.create(t,"or")}}function Ph(n){if(G(n instanceof fe||n instanceof De),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return Ph(e[0]);if(lA(n))return n;let t=e.map(i=>Ph(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof De&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,n.op)}var Wv=class{constructor(){this.un=new Ju}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(tn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(tn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Ju=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Te(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(me.comparator)).toArray()}};var oh=new Uint8Array(0),Kv=class{constructor(e,t){this.databaseId=t,this.cn=new Ju,this.ln=new Ln(r=>Ki(r),(r,i)=>ac(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Tt(i)};return CS(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[QS(t),""],!1,!0);return CS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rn(s.parent))}return r})}addFieldIndex(e,t){let r=Mu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=gs(e);return o.next(a=>{s.put(vS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Mu(e),i=gs(e),o=ps(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Mu(e),r=ps(e),i=gs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Nh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ps(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(u)} to execute ${Ki(t)}`);let h=function(O,W){let ee=lv(W);if(ee===void 0)return null;for(let Y of Ch(O,ee.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,u),p=function(O,W){let ee=new Map;for(let Y of Li(W))for(let I of Ch(O,Y.fieldPath))switch(I.op){case"==":case"in":ee.set(Y.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Y.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,u),m=function(O,W){let ee=[],Y=!0;for(let I of Li(W)){let v=I.kind===0?rS(O,I.fieldPath,O.startAt):iS(O,I.fieldPath,O.startAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Vn(ee,Y)}(l,u),y=function(O,W){let ee=[],Y=!0;for(let I of Li(W)){let v=I.kind===0?iS(O,I.fieldPath,O.endAt):rS(O,I.fieldPath,O.endAt);ee.push(v.value),Y&&(Y=v.inclusive)}return new Vn(ee,Y)}(l,u),b=this.In(u,l,m),A=this.In(u,l,y),M=this.Tn(u,l,p),F=this.En(u.indexId,h,b,m.inclusive,A,y.inclusive,M);return S.forEach(F,H=>r.G(H,t.limit).next(O=>{O.forEach(W=>{let ee=$.fromSegments(W.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=j2(De.create(e.filters,"and")).map(r=>Sv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):oh,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new $i(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new $i(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Nh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Te($e.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ui;for(let i of Li(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ar.vt.It(o,s)}return r.zt()}dn(e){let t=new Ui;return ar.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ui;return ar.vt.It(Gi(this.databaseId,t),r.Yt(function(o){let s=Li(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ui);let o=0;for(let s of Li(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&qu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);ar.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ui;u.seed(a.zt()),ar.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Mu(e),i=gs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new ju(p.sequenceNumber,new tn(Zi(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):ju.empty(),y=h.fields.map(([b,A])=>new Ds($e.fromServerFormat(b),A));return new Ss(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Mu(e),o=gs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(vS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return ps(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ps(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ps(e),o=new Te(Hr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new $i(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Te(Hr),i=this.Vn(t,e);if(i==null)return r;let o=lv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(qu(s))for(let a of s.arrayValue.values||[])r=r.add(new $i(t.indexId,e.key,this.dn(a),i))}else r=r.add(new $i(t.indexId,e.key,oh,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),A=fs(y),M=fs(b);for(;A||M;){let F=!1,H=!1;if(A&&M){let O=h(A,M);O<0?H=!0:O>0&&(F=!0)}else A!=null?H=!0:F=!0;F?(p(M),M=fs(b)):H?(m(A),A=fs(y)):(A=fs(y),M=fs(b))}}(i,o,Hr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return gs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Hr(s,a)).filter((s,a,u)=>!a||Hr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Hr(s,e),u=Hr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,oh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,oh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Hr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bS)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(bS)}};function CS(n){return it(n,"collectionParents")}function ps(n){return it(n,"indexEntries")}function Mu(n){return it(n,"indexConfiguration")}function gs(n){return it(n,"indexState")}function bS(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;rw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new tn(e.readTime,e.documentKey,t)}var TS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function KA(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{G(a===1)}));let l=[];for(let h of t.mutations){let p=tA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function kh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var Oh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Is(e),s=qr(e);return s.add({}).next(a=>{G(typeof a=="number");let u=new Gu(a,t,r,i),l=function(y,b,A){let M=A.baseMutations.map(H=>Zu(y.ct,H)),F=A.mutations.map(H=>Zu(y.ct,H));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:F}}(this.serializer,this.userId,u),h=[],p=new Te((m,y)=>re(m.canonicalString(),y.canonicalString()));for(let m of i){let y=tA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,zj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return qr(e).get(t).next(r=>r?(G(r.userId===this.userId),Bi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return qr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(G(a.batchId>=r),o=Bi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return qr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Bi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ch(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Is(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return qr(e).get(p).next(y=>{if(!y)throw z();G(y.userId===this.userId),o.push(Bi(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re),i=[];return t.forEach(o=>{let s=ch(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Is(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,A=Rn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ch(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Te(re);return Is(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,b=Rn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(qr(e).get(o).next(s=>{if(s===null)throw z();G(s.userId===this.userId),r.push(Bi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return KA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Is(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Rn(o[1]);i.push(u)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return QA(e,this.userId,t)}Nn(e){return YA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function QA(n,e,t){let r=ch(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Is(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function qr(n){return it(n,"mutations")}function Is(n){return it(n,"documentMutations")}function YA(n){return it(n,"mutationQueues")}var ks=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Qv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ks(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>J.fromTimestamp(new Oe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ms(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ms(e).J((s,a)=>{let u=Pu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ms(e).J((r,i)=>{let o=Pu(i);t(o)})}qn(e){return SS(e).get("targetGlobalKey").next(t=>(G(t!==null),t))}Qn(e,t){return SS(e).put("targetGlobalKey",t)}Kn(e,t){return ms(e).put(zA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ki(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ms(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Pu(a);ac(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=zr(e);return t.forEach(s=>{let a=Tt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=zr(e);return S.forEach(t,o=>{let s=Tt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=zr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zr(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=Rn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Tt(t.path),i=IDBKeyRange.bound([r],[QS(r)],!1,!0),o=0;return zr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ms(e).get(t).next(r=>r?Pu(r):null)}};function ms(n){return it(n,"targets")}function SS(n){return it(n,"targetGlobal")}function zr(n){return it(n,"targetDocuments")}function AS([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Yv=class{constructor(e){this.Un=e,this.buffer=new Te(AS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();AS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Zv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){si(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield oi(t)}yield this.Hn(3e5)}))}},Jv=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(qt.oe);let r=new Yv(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(TS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ys()<=_n.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function B2(n,e){return new Jv(n,e)}var Xv=class{constructor(e,t){this.db=e,this.garbageCollector=B2(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return sh(e,r)}removeReference(e,t,r){return sh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sh(e,t)}nr(e,t){return function(i,o){let s=!1;return YA(i).Y(a=>QA(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),zr(e).delete(function(p){return[0,Tt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sh(e,t)}tr(e,t){let r=zr(e),i,o=qt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==qt.oe&&t(new $(Rn(i)),o),o=l,i=u):o=qt.oe}).next(()=>{o!==qt.oe&&t(new $(Rn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function sh(n,e){return zr(n).put(function(r,i){return{targetId:0,path:Tt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Fh=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var e_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vi(e).put(r)}removeEntry(e,t,r){return Vi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xh(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ye.newInvalidDocument(t);return Vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Ye.newInvalidDocument(t)};return Vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(t))},(i,o)=>{r={document:this.ir(t,o),size:kh(o)}}).next(()=>r)}getEntries(e,t){let r=Vt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Vt(),i=new Re($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,kh(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Te(RS);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(xu(i.first()),xu(i.last())),s=i.getIterator(),a=s.getNext();return Vi(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&RS(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(xu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),xh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Vt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(cc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Vt(),s=xS(t,r),a=xS(t,tn.max());return Vi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new t_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return MS(e).get("remoteDocumentGlobalKey").next(t=>(G(!!t),t))}rr(e,t){return MS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=V2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Ye.newInvalidDocument(e)}};function ZA(n){return new e_(n)}var t_=class extends Fh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ln(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Te((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=mS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=kh(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=mS(this.cr.serializer,s.convertToNoDocument(J.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function MS(n){return it(n,"remoteDocumentGlobal")}function Vi(n){return it(n,"remoteDocumentsV14")}function xu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xS(n,e){let t=e.documentKey.path.toArray();return[n,xh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var n_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Vh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fu(r.mutation,i,zt.empty(),Oe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vt(),s=Ou(),a=function(){return Ou()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Fu(h.mutation,l,h.mutation.getFieldMask(),Oe.now())):s.set(l.key,zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new n_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ou(),i=new Re((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||zt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=IA();h.forEach(m=>{if(!o.has(m)){let y=AA(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Nn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:a,changes:wA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=Nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Nu();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new gn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Ye.newInvalidDocument(h)))});let a=Nu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Fu(h.mutation,l,zt.empty(),Oe.now()),cc(t,l)&&(a=a.insert(u,l))}),a})}};var r_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:He(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:hw(i.bundledQuery),readTime:He(i.readTime)}}(t)),S.resolve()}};var i_=class{constructor(){this.overlays=new Re($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Re((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Nn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var o_=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Xu=class{constructor(){this.Tr=new Te(Ke.Er),this.dr=new Te(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ke(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new me([])),r=new Ke(t,e),i=new Ke(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new me([])),r=new Ke(t,e),i=new Ke(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ke(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var s_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Te(Ke.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Gu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(re);return t.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new $(o),0),a=new Te(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Ke(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ke(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var a_=class{constructor(e){this.Mr=e,this.docs=function(){return new Re($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||rw(ZS(h),r)<=0||(i.has(h.key)||cc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new u_(this)}getSize(e){return S.resolve(this.size)}},u_=class extends Fh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var c_=class{constructor(e){this.persistence=e,this.Nr=new Ln(t=>Ki(t),ac),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xu,this.targetCount=0,this.kr=ks.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ks(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Lh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new qt(0),this.Kr=!1,this.Kr=!0,this.$r=new o_,this.referenceDelegate=e(this),this.Ur=new c_(this),this.indexManager=new Wv,this.remoteDocumentCache=function(i){return new a_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mh(t),this.Gr=new r_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new i_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new s_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new l_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},l_=class extends yh{constructor(e){super(),this.currentSequenceNumber=e}},jh=class n{constructor(e){this.persistence=e,this.Jr=new Xu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var d_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new vh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WT,{unique:!0}),u.createObjectStore("documentMutations")}(e),NS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),NS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WT,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:r2});l.createIndex("collectionPathOverlayIndex",i2,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",o2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Gj});l.createIndex("documentKeyIndex",Wj),l.createIndex("collectionGroupIndex",Kj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Xj}).createIndex("sequenceNumberIndex",e2,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:t2}).createIndex("documentKeyIndex",n2,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=kh(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{G(u.userId===o.userId);let l=Bi(this.serializer,u);return KA(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new me(s),l=function(p){return[0,Tt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Tt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Jj});let r=t.store("collectionParents"),i=new Ju,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Tt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new me(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Rn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Pu(i),s=zA(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(me.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=ZA(this.serializer),o=new Lh(jh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();Bi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new Qe(l),p=Rh.lt(this.serializer,h),m=o.getIndexManager(h),y=Oh.lt(h,this.serializer,m,o.referenceDelegate);return new Vh(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Uu(t,qt.oe),u).next()})})}};function NS(n){n.createObjectStore("targetDocuments",{keyPath:Yj}).createIndex("documentTargetsIndex",Zj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qj,{unique:!0}),n.createObjectStore("targetGlobal")}var Xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",h_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xv(this,i),this.Ai=t+"main",this.serializer=new Mh(u),this.Ri=new Yr(this.Ai,this.hi,new d_(this.serializer)),this.$r=new Bv,this.Ur=new Qv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZA(this.serializer),this.Gr=new jv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Xy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new qt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(si(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ru(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return ah(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ru(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Xy);return!1}}return!(!this.networkEnabled||!this.inForeground)||ah(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Uu(e,qt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ah(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Oh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Rh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?u2:u===16?a2:u===15?ow:u===14?iA:u===13?rA:u===12?s2:u===11?nA:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Uu(a,this.Qr?this.Qr.next():qt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(R.FAILED_PRECONDITION,JS);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ru(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,Xy)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put("owner",t)}static D(){return Yr.D()}bi(e){let t=Ru(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;lp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ru(n){return it(n,"owner")}function ah(n){return it(n,"clientMetadata")}function pw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var f_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var p_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lp()?8:XS(Ea())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new p_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ys()<=_n.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",vs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ys()<=_n.DEBUG&&k("QueryEngine","Query:",vs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ys()<=_n.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",vs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,St(t))):S.resolve())}Yi(e,t){if(oS(t))return S.resolve(null);let r=St(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=bh(t,null,"F"),r=St(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,bh(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return oS(t)||i.isEqual(J.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ys()<=_n.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vs(t)),this.rs(e,s,t,YS(i,-1)).next(a=>a))})}ts(e,t){let r=new Te(vA(e));return t.forEach((i,o)=>{cc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ys()<=_n.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",vs(t)),this.Ji.getDocumentsMatchingQuery(e,t,tn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var g_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Re(re),this._s=new Ln(o=>Ki(o),ac),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function JA(n,e,t,r){return new g_(n,e,t,r)}function XA(n,e){return N(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function U2(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let M=l.docVersions.get(b);G(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eM(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function $2(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(qe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,F){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=Vt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(tM(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function tM(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function H2(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Os(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ps(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Fs(n,e,t){return N(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!si(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Uh(n,e,t){let r=U(n),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,St(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:J.min(),t?o:ie())).next(a=>(iM(r,yA(e),a),{documents:a,Ts:o})))}function nM(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function rM(n,e){let t=U(n),r=t.us.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,YS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(iM(t,e,i),i))}function iM(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function q2(n,e,t,r){return N(this,null,function*(){let i=U(n),o=ie(),s=Vt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Os(i,function(h){return St(qs(me.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>tM(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function z2(r,i){return N(this,arguments,function*(n,e,t=ie()){let o=yield Os(n,St(hw(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=He(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function PS(n,e){return`firestore_clients_${n}_${e}`}function kS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ev(n,e){return`firestore_targets_${n}_${e}`}var $h=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ue("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=cw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=eA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},m_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}},ec=class{constructor(){this.activeTargetIds=cw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Lu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Re(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=PS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ec),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(PS(this.persistenceKey,r));if(i){let o=Hh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(ev(this.persistenceKey,e));if(i){let o=Vu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ev(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=qt.oe;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){Ue("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==qt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new $h(this.currentUser,e,t,r),o=kS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=kS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=ev(this.persistenceKey,e),o=new Vu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Hh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return $h.Rs(new Qe(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Vu.Rs(i,t)}Ls(e){return m_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=cw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},qh=class{constructor(){this.so=new ec,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ec,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var y_=class{_o(e){}shutdown(){}};var zh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uh=null;function tv(){return uh===null?uh=function(){return 268435456+Math.round(2147483648*Math.random())}():uh++,"0x"+uh.toString(16)}var G2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var v_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",__=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=tv(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw pn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=G2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=tv();return new Promise((s,a)=>{let u=new Wy;u.setWithCredentials(!0),u.listenOnce(Ky.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Su.NO_ERROR:let h=u.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Su.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:let p=u.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(M){let F=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(F)>=0?F:R.UNKNOWN}(y.status);a(new P(b,y.message))}else a(new P(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=tv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Zy(),a=Yy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,b=new v_({Io:M=>{y?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,F,H)=>{M.listen(F,O=>{try{H(O)}catch(W){setTimeout(()=>{throw W},0)}})};return A(p,hs.EventType.OPEN,()=>{y||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,hs.EventType.CLOSE,()=>{y||(y=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,hs.EventType.ERROR,M=>{y||(y=!0,pn(yt,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new P(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,hs.EventType.MESSAGE,M=>{var F;if(!y){let H=M.data[0];G(!!H);let O=H,W=O.error||((F=O[0])===null||F===void 0?void 0:F.error);if(W){k(yt,`RPC '${e}' stream ${i} received error:`,W);let ee=W.status,Y=function(w){let E=We[w];if(E!==void 0)return RA(E)}(ee),I=W.message;Y===void 0&&(Y=R.INTERNAL,I="Unknown error status: "+ee+" with message "+W.message),y=!0,b.So(new P(Y,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,H),b.bo(H)}}),A(a,Qy.STAT_EVENT,M=>{M.stat===ih.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===ih.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function oM(){return typeof window<"u"?window:null}function fh(){return typeof document<"u"?document:null}function lc(n){return new kv(n,!0)}var tc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Gh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ue(t.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},w_=class extends Gh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=x2(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?He(s.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Vv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Dh(u)?{documents:jA(o,u)}:{query:BA(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PA(o,s.resumeToken);let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Ns(o,s.snapshotVersion.toTimestamp());let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=N2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Vv(this.serializer),t.removeTarget=e,this.a_(t)}},I_=class extends Gh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=R2(e.writeResults,e.commitTime),r=He(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Vv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Zu(this.serializer,r))};this.a_(t)}};var E_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Fv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Fv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},D_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ue(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var C_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){ai(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=U(u);l.L_.add(4),yield zs(l),l.q_.set("Unknown"),l.L_.delete(4),yield dc(l)})}(this))}))}),this.q_=new D_(r,i)}};function dc(n){return N(this,null,function*(){if(ai(n))for(let e of n.B_)yield e(!0)})}function zs(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function pf(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),yw(t)?mw(t):Ws(t).r_()&&gw(t,e))}function Vs(n,e){let t=U(n),r=Ws(t);t.N_.delete(e),r.r_()&&sM(t,e),t.N_.size===0&&(r.r_()?r.o_():ai(t)&&t.q_.set("Unknown"))}function gw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ws(n).A_(e)}function sM(n,e){n.Q_.xe(e),Ws(n).R_(e)}function mw(n){n.Q_=new Pv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ws(n).start(),n.q_.v_()}function yw(n){return ai(n)&&!Ws(n).n_()&&n.N_.size>0}function ai(n){return U(n).L_.size===0}function aM(n){n.Q_=void 0}function W2(n){return N(this,null,function*(){n.q_.set("Online")})}function K2(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{gw(n,e)})})}function Q2(n,e){return N(this,null,function*(){aM(n),yw(n)?(n.q_.M_(e),mw(n)):n.q_.set("Unknown")})}function Y2(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Sh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wh(n,r)}else if(e instanceof bs?n.Q_.Ke(e):e instanceof Th?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield eM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(qe.EMPTY_BYTE_STRING,h.snapshotVersion)),sM(o,u);let p=new Ps(h.target,u,l,h.sequenceNumber);gw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Wh(n,r)}})}function Wh(n,e,t){return N(this,null,function*(){if(!si(e))throw e;n.L_.add(1),yield zs(n),n.q_.set("Offline"),t||(t=()=>eM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield dc(n)}))})}function uM(n,e){return e().catch(t=>Wh(n,t,e))}function Gs(n){return N(this,null,function*(){let e=U(n),t=ii(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Z2(e);)try{let i=yield H2(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,J2(e,i)}catch(i){yield Wh(e,i)}cM(e)&&lM(e)})}function Z2(n){return ai(n)&&n.O_.length<10}function J2(n,e){n.O_.push(e);let t=ii(n);t.r_()&&t.V_&&t.m_(e.mutations)}function cM(n){return ai(n)&&!ii(n).n_()&&n.O_.length>0}function lM(n){ii(n).start()}function X2(n){return N(this,null,function*(){ii(n).p_()})}function eB(n){return N(this,null,function*(){let e=ii(n);for(let t of n.O_)e.m_(t.mutations)})}function tB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=xv.from(r,e,t);yield uM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gs(n)})}function nB(n,e){return N(this,null,function*(){e&&ii(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return xA(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();ii(r).s_(),yield uM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gs(r)}})}(n,e)),cM(n)&&lM(n)})}function OS(n,e){return N(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ai(t);t.L_.add(3),yield zs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield dc(t)})}function b_(n,e){return N(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield dc(t)):e||(t.L_.add(2),yield zs(t),t.q_.set("Unknown"))})}function Ws(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new w_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:W2.bind(null,n),Ro:K2.bind(null,n),mo:Q2.bind(null,n),d_:Y2.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),yw(n)?mw(n):n.q_.set("Unknown")):(yield n.K_.stop(),aM(n))}))),n.K_}function ii(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new I_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:X2.bind(null,n),mo:nB.bind(null,n),f_:eB.bind(null,n),g_:tB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Gs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var T_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ks(n,e){if(Ue("AsyncQueue",`${e}: ${n}`),si(n))return new P(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Kh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=Nu(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qh=class{constructor(){this.W_=new Re($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ls=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Kh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var S_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},A_=class{constructor(){this.queries=FS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=FS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(R.ABORTED,"Firestore shutting down"))}};function FS(){return new Ln(n=>mA(n),uc)}function vw(n,e){return N(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new S_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ks(s,`Initialization of query '${vs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&ww(t)})}function _w(n,e){return N(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function rB(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&ww(t)}function iB(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function ww(n){n.Y_.forEach(e=>{e.next()})}var M_,VS;(VS=M_||(M_={})).ea="default",VS.Cache="cache";var nc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==M_.Cache}};var x_=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Yh=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?LA(this.serializer,e.document,!1):Ye.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return He(e)}},R_=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Yh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield q2(this.localStore,new Yh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield z2(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function dM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Zh=class{constructor(e){this.key=e}},Jh=class{constructor(e){this.key=e}},Xh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=vA(e),this.Ra=new Kh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Qh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=cc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ls(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Jh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Zh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},N_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},P_=class{constructor(e){this.key=e,this.va=!1}},k_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ln(a=>mA(a),uc),this.Ma=new Map,this.xa=new Set,this.Oa=new Re($.comparator),this.Na=new Map,this.La=new Xu,this.Ba={},this.ka=new Map,this.qa=ks.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function oB(n,e,t=!0){return N(this,null,function*(){let r=gf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield hM(r,e,t,!0),i})}function sB(n,e){return N(this,null,function*(){let t=gf(n);yield hM(t,e,!0,!1)})}function hM(n,e,t,r){return N(this,null,function*(){let i=yield Os(n.localStore,St(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Iw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&pf(n.remoteStore,i),a})}function Iw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,F,H){return N(this,null,function*(){let O=M.view.ma(F);O.ns&&(O=yield Uh(A.localStore,M.query,!1).then(({documents:I})=>M.view.ma(I,O)));let W=H&&H.targetChanges.get(M.targetId),ee=H&&H.targetMismatches.get(M.targetId)!=null,Y=M.view.applyChanges(O,A.isPrimaryClient,W,ee);return O_(A,M.targetId,Y.wa),Y.snapshot})}(n,p,m,y);let o=yield Uh(n.localStore,e,!0),s=new Xh(e,o.Ts),a=s.ma(o.documents),u=Qu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);O_(n,t,l.wa);let h=new N_(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function aB(n,e,t){return N(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!uc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vs(r.remoteStore,i.targetId),js(r,i.targetId)}).catch(oi))):(js(r,i.targetId),yield Fs(r.localStore,i.targetId,!0))})}function uB(n,e){return N(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vs(t.remoteStore,r.targetId))})}function cB(n,e,t){return N(this,null,function*(){let r=bw(n);try{let i=yield function(s,a){let u=U(s),l=Oe.now(),h=a.reduce((y,b)=>y.add(b.key),ie()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Vt(),A=ie();return u.cs.getEntries(y,h).next(M=>{b=M,b.forEach((F,H)=>{H.isValidDocument()||(A=A.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(M=>{p=M;let F=[];for(let H of a){let O=D2(H,p.get(H.key).overlayedDocument);O!=null&&F.push(new mn(H.key,O,cA(O.value.mapValue),Be.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(M=>{m=M;let F=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,F)})}).then(()=>({batchId:m.batchId,changes:wA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Re(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield pr(r,i.changes),yield Gs(r.remoteStore)}catch(i){let o=Ks(i,"Failed to persist write");t.reject(o)}})}function fM(n,e){return N(this,null,function*(){let t=U(n);try{let r=yield $2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?G(s.va):i.removedDocuments.size>0&&(G(s.va),s.va=!1))}),yield pr(t,r,e)}catch(r){yield oi(r)}})}function LS(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&ww(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lB(n,e,t){return N(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Re($.comparator);s=s.insert(o,Ye.newNoDocument(o,J.min()));let a=ie().add(o),u=new Ku(J.min(),new Map,new Re(re),s,a);yield fM(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Cw(r)}else yield Fs(r.localStore,e,!1).then(()=>js(r,e,t)).catch(oi)})}function dB(n,e){return N(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield U2(t.localStore,e);Dw(t,r,null),Ew(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield pr(t,i)}catch(i){yield oi(i)}})}function hB(n,e,t){return N(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(G(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Dw(r,e,t),Ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield pr(r,i)}catch(i){yield oi(i)}})}function fB(n,e){return N(this,null,function*(){let t=U(n);ai(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ks(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Ew(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Dw(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function js(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||pM(n,r)})}function pM(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Vs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cw(n))}function O_(n,e,t){for(let r of t)r instanceof Zh?(n.La.addReference(r.key,e),pB(n,r)):r instanceof Jh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||pM(n,r.key)):z()}function pB(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cw(n))}function Cw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(me.fromString(e)),r=n.qa.next();n.Na.set(r,new P_(t)),n.Oa=n.Oa.insert(t,r),pf(n.remoteStore,new Ps(St(qs(t.path)),r,"TargetPurposeLimboResolution",qt.oe))}}function pr(n,e,t){return N(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=f_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!si(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function gB(n,e){return N(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield XA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pr(t,r.hs)}})}function mB(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function yB(n,e){return N(this,null,function*(){let t=U(n),r=yield Uh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&O_(t,e.targetId,i.wa),i})}function vB(n,e){return N(this,null,function*(){let t=U(n);return rM(t.localStore,e).then(r=>pr(t,r))})}function _B(n,e,t,r){return N(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Gs(i.remoteStore):t==="acknowledged"||t==="rejected"?(Dw(i,e,r||null),Ew(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield pr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function wB(n,e){return N(this,null,function*(){let t=U(n);if(gf(t),bw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jS(t,r.toArray());t.Qa=!0,yield b_(t.remoteStore,!0);for(let o of i)pf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(js(t,s),Fs(t.localStore,s,!0))),Vs(t.remoteStore,s)}),yield i,yield jS(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Vs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Re($.comparator)}(t),t.Qa=!1,yield b_(t.remoteStore,!1)}})}function jS(n,e,t){return N(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Os(r.localStore,St(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield yB(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield nM(r.localStore,s);a=yield Os(r.localStore,l),yield Iw(r,gM(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function gM(n){return gA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function IB(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function EB(n,e,t,r){return N(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield rM(i.localStore,yA(o[0])),a=Ku.createSynthesizedRemoteEventForCurrentChange(e,t==="current",qe.EMPTY_BYTE_STRING);yield pr(i,s,a);break}case"rejected":yield Fs(i.localStore,e,!0),js(i,e,r);break;default:z()}})}function DB(n,e,t){return N(this,null,function*(){let r=gf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield nM(r.localStore,i),s=yield Os(r.localStore,o);yield Iw(r,gM(o),s.targetId,!1,s.resumeToken),pf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Fs(r.localStore,i,!1).then(()=>{Vs(r.remoteStore,i),js(r,i)}).catch(oi))}})}function gf(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lB.bind(null,e),e.Ca.d_=rB.bind(null,e.eventManager),e.Ca.$a=iB.bind(null,e.eventManager),e}function bw(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hB.bind(null,e),e}function CB(n,e,t){let r=U(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=U(y),M=He(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",F=>A.Gr.getBundleMetadata(F,b.id)).then(F=>!!F&&F.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(dM(u));let l=new R_(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield pr(o,p.Ia,void 0),yield function(y,b){let A=U(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return pn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var F_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=lc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return JA(this.persistence,new Bh,t.initialUser,this.serializer)}Ga(t){return new Lh(jh.Zr,this.serializer)}Wa(t){return new qh}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var ef=class n extends F_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield up(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield bw(this.Ja.syncEngine),yield Gs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return JA(this.persistence,new Bh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Zv(r,e.asyncQueue,t)}Ha(e,t){let r=new pv(t,this.persistence);return new fv(e.asyncQueue,r)}Ga(e){let t=pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new h_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oM(),fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new qh}},V_=class n extends ef{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield up(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Lu&&(this.sharedClientState.syncEngine={no:_B.bind(null,t),ro:EB.bind(null,t),io:DB.bind(null,t),Qi:IB.bind(null,t),eo:vB.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield wB(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=oM();if(!Lu.D(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Tw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gB.bind(null,this.syncEngine),yield b_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new A_}()}createDatastore(t){let r=lc(t.databaseInfo.databaseId),i=function(s){return new __(s)}(t.databaseInfo);return function(s,a,u,l){return new E_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new C_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>LS(this.syncEngine,r,0),function(){return zh.D()?new zh:new y_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new k_(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield zs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function BS(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Bs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ue("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var L_=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new x_(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var j_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=U(i),a={documents:o.map(p=>Yu(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=M2(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());G(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ri(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new zu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=U(r),s={writes:i.map(a=>Zu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?Be.exists(!1):Be.updateTime(t):Be.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(t)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var B_=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new tc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new j_(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!sc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xA(t)}return!1}};var U_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ks(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield XA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function US(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Sw(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OS(e.remoteStore,i)),n._onlineComponents=e})}function Sw(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pn("Error using user provided cache. Falling back to memory cache: "+t),yield nv(n,new F_)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield nv(n,new F_);return n._offlineComponents})}function mf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield US(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield US(n,new Tw))),n._onlineComponents})}function mM(n){return Sw(n).then(e=>e.persistence)}function Aw(n){return Sw(n).then(e=>e.localStore)}function yM(n){return mf(n).then(e=>e.remoteStore)}function Mw(n){return mf(n).then(e=>e.syncEngine)}function bB(n){return mf(n).then(e=>e.datastore)}function Us(n){return N(this,null,function*(){let e=yield mf(n),t=e.eventManager;return t.onListen=oB.bind(null,e.syncEngine),t.onUnlisten=aB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uB.bind(null,e.syncEngine),t})}function TB(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield mM(n),t=yield yM(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),dc(o)}(t)}))}function SB(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield mM(n),t=yield yM(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=U(i);o.L_.add(0),yield zs(o),o.q_.set("Offline")})}(t)}))}function AB(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ks(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Aw(n),e,t)})),t.promise}function vM(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Bs({next:m=>{h.Za(),s.enqueueAndForget(()=>_w(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new nc(qs(a.path),h,{includeMetadataChanges:!0,_a:!0});return vw(o,p)}(yield Us(n),n.asyncQueue,e,t,r)})),r.promise}function MB(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Uh(i,o,!0),u=new Xh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ks(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Aw(n),e,t)})),t.promise}function _M(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Bs({next:m=>{h.Za(),s.enqueueAndForget(()=>_w(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new nc(a,h,{includeMetadataChanges:!0,_a:!0});return vw(o,p)}(yield Us(n),n.asyncQueue,e,t,r)})),r.promise}function xB(n,e){let t=new Bs(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Us(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Us(n),t)}))}}function RB(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?NA().encode(s):s,function(h,p){return new L_(h,p)}(function(h,p){if(h instanceof Uint8Array)return BS(h,p);if(h instanceof ArrayBuffer)return BS(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,lc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){CB(yield Mw(n),i,r)}))}function NB(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Aw(n),e)}))}function wM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $S=new Map;function xw(n,e,t){if(!t)throw new P(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rw(n,e,t,r){if(e===!0&&r===!0)throw new P(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HS(n){if(!$.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qS(n){if($.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yf(n);throw new P(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IM(n,e){if(e<=0)throw new P(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var tf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ji=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rv;switch(r.type){case"firstParty":return new av(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$S.get(t);r&&(k("ComponentProvider","Removing Datastore"),$S.delete(t),r.terminate())}(this),Promise.resolve()}};function EM(n,e,t,r={}){var i;let o=(n=_e(n,Ji))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Qe.MOCK_USER;else{a=pE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qe(l)}n._authCredentials=new iv(new ph(a,u))}}var lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Se=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends lt{constructor(e,t,r){super(e,t,qs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Nw(n,e,...t){if(n=ke(n),xw("collection","path",e),n instanceof Ji){let r=me.fromString(e,...t);return qS(r),new On(n,null,r)}{if(!(n instanceof Se||n instanceof On))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return qS(r),new On(n.firestore,null,r)}}function DM(n,e){if(n=_e(n,Ji),xw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lt(n,null,function(r){return new gn(me.emptyPath(),r)}(e))}function hc(n,e,...t){if(n=ke(n),arguments.length===1&&(e=gh.newId()),xw("doc","path",e),n instanceof Ji){let r=me.fromString(e,...t);return HS(r),new Se(n,null,new $(r))}{if(!(n instanceof Se||n instanceof On))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return HS(r),new Se(n.firestore,n instanceof On?n.converter:null,new $(r))}}function Pw(n,e){return n=ke(n),e=ke(e),(n instanceof Se||n instanceof On)&&(e instanceof Se||e instanceof On)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kw(n,e){return n=ke(n),e=ke(e),n instanceof lt&&e instanceof lt&&n.firestore===e.firestore&&uc(n._query,e._query)&&n.converter===e.converter}var nf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tc(this,"async_queue_retry"),this.Vu=()=>{let r=fh();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=fh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=fh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!si(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=T_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function $_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var H_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var CM=-1,Fe=class extends Ji{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nf(e),this._firestoreClient=void 0,yield e}})}};function dt(n){if(n._terminated)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bM(n),n._firestoreClient}function bM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new gv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wM(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function TM(n,e){pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return AM(n,Tw.provider,{build:r=>new ef(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function SM(n){return N(this,null,function*(){pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();AM(n,Tw.provider,{build:t=>new V_(t,e.cacheSizeBytes)})})}function AM(n,e,t){if((n=_e(n,Fe))._firestoreClient||n._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},bM(n)}function MM(n){if(n._initialized&&!n._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Yr.D())return Promise.resolve();let i=r+"main";yield Yr.delete(i)})}(pw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function xM(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return fB(yield Mw(t),r)})),r.promise}(dt(n=_e(n,Fe)))}function RM(n){return TB(dt(n=_e(n,Fe)))}function NM(n){return SB(dt(n=_e(n,Fe)))}function PM(n,e){let t=dt(n=_e(n,Fe)),r=new H_;return RB(t,n._databaseId,e,r),r}function kM(n,e){return NB(dt(n=_e(n,Fe)),e).then(t=>t?new lt(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qe.fromBase64String(e))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hr=class{constructor(e){this._methodName=e}};var Xi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var rc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var PB=/^__.*__$/,q_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ni(e,this.data,t,this.fieldTransforms)}},rf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function OM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var of=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OM(this.Cu)&&PB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},z_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lc(e)}Qu(e,t,r,i=!1){return new of({Cu:e,methodName:t,qu:r,path:$e.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ro(n){let e=n._freezeSettings(),t=lc(n._databaseId);return new z_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Vw("Data must be an object, but it was:",s,r);let a=LM(r,s),u,l;if(o.merge)u=new zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Y_(e,p,t);if(!s.contains(m))throw new P(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);BM(h,m)||h.push(m)}u=new zt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new q_(new vt(a),u,l)}var ic=class n extends hr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function FM(n,e,t){return new of({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var G_=class n extends hr{_toFieldTransform(e){return new Qi(e.path,new ei)}isEqual(e){return e instanceof n}},W_=class n extends hr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=FM(this,e,!0),r=this.Ku.map(o=>io(o,t)),i=new lr(r);return new Qi(e.path,i)}isEqual(e){return e instanceof n&&dp(this.Ku,e.Ku)}},K_=class n extends hr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=FM(this,e,!0),r=this.Ku.map(o=>io(o,t)),i=new dr(r);return new Qi(e.path,i)}isEqual(e){return e instanceof n&&dp(this.Ku,e.Ku)}},Q_=class n extends hr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ti(e.serializer,DA(e.serializer,this.$u));return new Qi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Ow(n,e,t,r){let i=n.Qu(1,e,t);Vw("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();no(r,(u,l)=>{let h=Lw(e,u,t);l=ke(l);let p=i.Nu(h);if(l instanceof ic)o.push(h);else{let m=io(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new zt(o);return new rf(s,a,i.fieldTransforms)}function Fw(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Y_(e,r,t)],u=[i];if(o.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Y_(e,o[m])),u.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!BM(l,a[m])){let y=a[m],b=u[m];b=ke(b);let A=s.Nu(y);if(b instanceof ic)l.push(y);else{let M=io(b,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new zt(l);return new rf(h,p,s.fieldTransforms)}function VM(n,e,t,r=!1){return io(t,n.Qu(r?4:3,e))}function io(n,e){if(jM(n=ke(n)))return Vw("Unsupported field value:",e,n),LM(n,e);if(n instanceof hr)return function(r,i){if(!OM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=io(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Ns(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ns(i.serializer,o)}}if(r instanceof Xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:PA(i.serializer,r._byteString)};if(r instanceof Se){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return lw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yf(r)}`)}(n,e)}function LM(n,e){let t={};return oA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(n,(r,i)=>{let o=io(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function jM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof Xi||n instanceof jn||n instanceof Se||n instanceof hr||n instanceof rc)}function Vw(n,e,t){if(!jM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Y_(n,e,t){if((e=ke(e))instanceof yn)return e._internalPath;if(typeof e=="string")return Lw(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}var kB=new RegExp("[~\\*/\\[\\]]");function Lw(n,e,t){if(e.search(kB)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yn(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(R.INVALID_ARGUMENT,a+n+u)}function BM(n,e){return n.some(t=>t.isEqual(e))}var eo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_f("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Z_=class extends eo{data(){return super.data()}};function _f(n,e){return typeof e=="string"?Lw(n,e):e instanceof yn?e._internalPath:e._delegate._internalPath}function UM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var oc=class{},to=class extends oc{};function gr(n,e,...t){let r=[];e instanceof oc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof J_).length,a=o.filter(u=>u instanceof af).length;if(s>1||s>0&&a>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var af=class n extends to{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ZM(e._query,t),new lt(e.firestore,e.converter,Av(e._query,t))}_parse(e){let t=ro(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){GS(p,h);let y=[];for(let b of p)y.push(zS(u,o,b));m={arrayValue:{values:y}}}else m=zS(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||GS(p,h),m=VM(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function $M(n,e,t){let r=e,i=_f("where",n);return af._create(i,r,t)}var J_=class n extends oc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:De.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)ZM(s,u),s=Av(s,u)}(e._query,t),new lt(e.firestore,e.converter,Av(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var X_=class n extends to{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wi(o,s)}(e._query,this._field,this._direction);return new lt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function HM(n,e="asc"){let t=e,r=_f("orderBy",n);return X_._create(r,t)}var uf=class n extends to{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new lt(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}};function qM(n){return IM("limit",n),uf._create("limit",n,"F")}function zM(n){return IM("limitToLast",n),uf._create("limitToLast",n,"L")}var cf=class n extends to{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=YM(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function GM(...n){return cf._create("startAt",n,!0)}function WM(...n){return cf._create("startAfter",n,!1)}var lf=class n extends to{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=YM(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function KM(...n){return lf._create("endBefore",n,!1)}function QM(...n){return lf._create("endAt",n,!0)}function YM(n,e,t,r){if(t[0]=ke(t[0]),t[0]instanceof eo)return function(o,s,a,u,l){if(!u)throw new P(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Cs(o))if(p.field.isKeyField())h.push(Gi(s,u.key));else{let m=u.data.field(p.field);if(hf(m))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new P(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Vn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ro(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new P(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!uw(s)&&A.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(me.fromString(A));if(!$.isDocumentKey(M))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let F=new $(M);y.push(Gi(a,F))}else{let M=VM(u,l,A);y.push(M)}}return new Vn(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zS(n,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uw(e)&&t.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!$.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gi(n,new $(r))}if(t instanceof Se)return Gi(n,t._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function GS(n,e){if(!Array.isArray(n)||n.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var $s=class{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return no(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new rc(o)}convertGeoPoint(e){return new Xi(Pe(e.latitude),Pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=sw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){let t=cr(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);G(qA(r));let i=new Jr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ue(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function wf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ew=class extends $s{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};var ur=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nn=class extends eo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Kr=class extends nn{data(e={}){return super.data(e)}},vn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ur(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Kr(this._firestore,this._userDataWriter,r.key,r,new ur(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:OB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function OB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function jw(n,e){return n instanceof nn&&e instanceof nn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vn&&e instanceof vn&&n._firestore===e._firestore&&kw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function JM(n){n=_e(n,Se);let e=_e(n.firestore,Fe);return vM(dt(e),n._key).then(t=>Hw(e,n,t))}var fr=class extends $s{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};function XM(n){n=_e(n,Se);let e=_e(n.firestore,Fe),t=dt(e),r=new fr(e);return AB(t,n._key).then(i=>new nn(e,r,n._key,i,new ur(i!==null&&i.hasLocalMutations,!0),n.converter))}function ex(n){n=_e(n,Se);let e=_e(n.firestore,Fe);return vM(dt(e),n._key,{source:"server"}).then(t=>Hw(e,n,t))}function tx(n){n=_e(n,lt);let e=_e(n.firestore,Fe),t=dt(e),r=new fr(e);return UM(n._query),_M(t,n._query).then(i=>new vn(e,r,n,i))}function nx(n){n=_e(n,lt);let e=_e(n.firestore,Fe),t=dt(e),r=new fr(e);return MB(t,n._query).then(i=>new vn(e,r,n,i))}function rx(n){n=_e(n,lt);let e=_e(n.firestore,Fe),t=dt(e),r=new fr(e);return _M(t,n._query,{source:"server"}).then(i=>new vn(e,r,n,i))}function Bw(n,e,t){n=_e(n,Se);let r=_e(n.firestore,Fe),i=wf(n.converter,e,t);return Qs(r,[vf(ro(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Be.none())])}function Uw(n,e,t,...r){n=_e(n,Se);let i=_e(n.firestore,Fe),o=ro(i),s;return s=typeof(e=ke(e))=="string"||e instanceof yn?Fw(o,"updateDoc",n._key,e,t,r):Ow(o,"updateDoc",n._key,e),Qs(i,[s.toMutation(n._key,Be.exists(!0))])}function ix(n){return Qs(_e(n.firestore,Fe),[new ri(n._key,Be.none())])}function ox(n,e){let t=_e(n.firestore,Fe),r=hc(n),i=wf(n.converter,e);return Qs(t,[vf(ro(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function $w(n,...e){var t,r,i;n=ke(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($_(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Se)l=_e(n.firestore,Fe),h=qs(n._key.path),u={next:p=>{e[s]&&e[s](Hw(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,lt);l=_e(p.firestore,Fe),h=p._query;let m=new fr(l);u={next:y=>{e[s]&&e[s](new vn(l,m,p,y))},error:e[s+1],complete:e[s+2]},UM(n._query)}return function(m,y,b,A){let M=new Bs(A),F=new nc(y,M,b);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return vw(yield Us(m),F)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return _w(yield Us(m),F)}))}}(dt(l),h,a,u)}function sx(n,e){return xB(dt(n=_e(n,Fe)),$_(e)?e:{next:e})}function Qs(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return cB(yield Mw(r),i,o)})),o.promise}(dt(n),e)}function Hw(n,e,t){let r=t.docs.get(e._key),i=new fr(n);return new nn(n,i,e._key,r,new ur(t.hasPendingWrites,t.fromCache),e.converter)}var FB={maxAttempts:5};var df=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,t,r){this._verifyNotCommitted();let i=Gr(e,this._firestore),o=wf(i.converter,t,r),s=vf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Be.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Gr(e,this._firestore),s;return s=typeof(t=ke(t))=="string"||t instanceof yn?Fw(this._dataReader,"WriteBatch.update",o._key,t,r,i):Ow(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Gr(e,this._firestore);return this._mutations=this._mutations.concat(new ri(t._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gr(n,e){if((n=ke(n)).firestore!==e)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var tw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ro(t)}get(t){let r=Gr(t,this._firestore),i=new ew(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new eo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new eo(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Gr(t,this._firestore),s=wf(o.converter,r,i),a=vf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Gr(t,this._firestore),a;return a=typeof(r=ke(r))=="string"||r instanceof yn?Fw(this._dataReader,"Transaction.update",s._key,r,i,o):Ow(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Gr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Gr(e,this._firestore),r=new fr(this._firestore);return super.get(e).then(i=>new nn(this._firestore,r,t._key,i._document,new ur(!1,!1),t.converter))}};function ax(n,e,t){n=_e(n,Fe);let r=Object.assign(Object.assign({},FB),t);return function(o){if(o.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield bB(o);new B_(o.asyncQueue,l,a,s,u).au()})),u.promise}(dt(n),i=>e(new tw(n,i)),r)}function ux(){return new ic("deleteField")}function cx(){return new G_("serverTimestamp")}function lx(...n){return new W_("arrayUnion",n)}function dx(...n){return new K_("arrayRemove",n)}function hx(n){return new Q_("increment",n)}(function(e,t=!0){(function(i){Hs=i})(yE),Da(new hi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fe(new ov(r.getProvider("auth-internal")),new cv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),wr(qT,"4.7.3",e),wr(qT,"4.7.3","esm2017")})();var VB="@firebase/firestore-compat",LB="0.3.38";function Qw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fx(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function px(){if(!sA())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var If=class n{constructor(e){this._delegate=e}static fromBase64String(e){return px(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return fx(),new n(jn.fromUint8Array(e))}toBase64(){return px(),this._delegate.toBase64()}toUint8Array(){return fx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function qw(n){return jB(n,["next","error","complete"])}function jB(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var zw=class{enableIndexedDbPersistence(e,t){return TM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return SM(e._delegate)}clearIndexedDbPersistence(e){return MM(e._delegate)}},Ef=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){EM(this._delegate,e,t,r)}enableNetwork(){return RM(this._delegate)}disableNetwork(){return NM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Rw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return xM(this._delegate)}onSnapshotsInSync(e){return sx(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Js(this,Nw(this._delegate,e))}catch(t){throw At(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,hc(this._delegate,e))}catch(t){throw At(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,DM(this._delegate,e))}catch(t){throw At(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ax(this._delegate,t=>e(new Df(this,t)))}batch(){return dt(this._delegate),new Cf(new df(this._delegate,e=>Qs(this._delegate,e)))}loadBundle(e){return PM(this._delegate,e)}namedQuery(e){return kM(this._delegate,e).then(t=>t?new uo(this,t):null)}},Ys=class extends $s{constructor(e){super(),this.firestore=e}convertBytes(e){return new If(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function BB(n){WS(n)}var Df=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ys(e)}get(e){let t=oo(e);return this._delegate.get(t).then(r=>new so(this._firestore,new nn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=oo(e);return r?(Qw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=oo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=oo(e);return this._delegate.delete(t),this}},Cf=class{constructor(e){this._delegate=e}set(e,t,r){let i=oo(e);return r?(Qw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=oo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=oo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Zs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Kr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ao(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ys(e),t),i.set(t,o)),o}};Zs.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ys(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Se(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Se(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Js(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Js(this.firestore,Nw(this._delegate,e))}catch(t){throw At(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof Se?Pw(this._delegate,e):!1}set(e,t){t=Qw("DocumentReference.set",t);try{return t?Bw(this._delegate,e,t):Bw(this._delegate,e)}catch(r){throw At(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Uw(this._delegate,e):Uw(this._delegate,e,t,...r)}catch(i){throw At(i,"updateDoc()","DocumentReference.update()")}}delete(){return ix(this._delegate)}onSnapshot(...e){let t=gx(e),r=mx(e,i=>new so(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $w(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=XM(this._delegate):e?.source==="server"?t=ex(this._delegate):t=JM(this._delegate),t.then(r=>new so(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function At(n,e,t){return n.message=n.message.replace(e,t),n}function gx(n){for(let e of n)if(typeof e=="object"&&!qw(e))return e;return{}}function mx(n,e){var t,r;let i;return qw(n[0])?i=n[0]:qw(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var so=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jw(this._delegate,e._delegate)}},ao=class extends so{data(e){let t=this._delegate.data(e);return this._delegate._converter||KS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},uo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ys(e)}where(e,t,r){try{return new n(this.firestore,gr(this._delegate,$M(e,t,r)))}catch(i){throw At(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,gr(this._delegate,HM(e,t)))}catch(r){throw At(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,gr(this._delegate,qM(e)))}catch(t){throw At(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,gr(this._delegate,zM(e)))}catch(t){throw At(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,gr(this._delegate,GM(...e)))}catch(t){throw At(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,gr(this._delegate,WM(...e)))}catch(t){throw At(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,gr(this._delegate,KM(...e)))}catch(t){throw At(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,gr(this._delegate,QM(...e)))}catch(t){throw At(t,"endAt()","Query.endAt()")}}isEqual(e){return kw(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=nx(this._delegate):e?.source==="server"?t=rx(this._delegate):t=tx(this._delegate),t.then(r=>new fc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=gx(e),r=mx(e,i=>new fc(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $w(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Gw=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ao(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},fc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ao(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Gw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ao(this._firestore,r))})}isEqual(e){return jw(this._delegate,e._delegate)}},Js=class n extends uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,hc(this._delegate)):new Bn(this.firestore,hc(this._delegate,e))}catch(t){throw At(t,"doc()","CollectionReference.doc()")}}add(e){return ox(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return Pw(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Zs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function oo(n){return _e(n,Se)}var Ww=class n{constructor(...e){this._delegate=new yn(...e)}static documentId(){return new n($e.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Kw=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=cx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=ux();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=lx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=dx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=hx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var UB={Firestore:Ef,GeoPoint:Xi,Timestamp:Oe,Blob:If,Transaction:Df,WriteBatch:Cf,DocumentReference:Bn,DocumentSnapshot:so,Query:uo,QueryDocumentSnapshot:ao,QuerySnapshot:fc,CollectionReference:Js,FieldPath:Ww,FieldValue:Kw,setLogLevel:BB,CACHE_SIZE_UNLIMITED:CM};function $B(n,e){n.INTERNAL.registerComponent(new hi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},UB)))}function HB(n){$B(n,(e,t)=>new Ef(e,t,new zw)),n.registerVersion(VB,LB)}HB(Mt);function qB(n,e=Ma){return new le(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function yx(n,e){return qB(n,e)}function zB(n,e){return yx(n,e).pipe(vi(void 0),Na(),Z(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Jw(n,e){return yx(n,e).pipe(Z(t=>({payload:t,type:"query"})))}var bf=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=Ex(r,t);return new Sf(i,o,this.afs)}snapshotChanges(){return zB(this.ref,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:t})=>e.idField?ce(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ve(this.ref.get(e)).pipe(Ft)}};function Tf(n,e){return Jw(n,e).pipe(vi(void 0),Na(),Z(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function vx(n,e,t){return Tf(n,t).pipe(yi((r,i)=>GB(r,i.map(o=>o.payload),e),[]),kp(),Z(r=>r.map(i=>({type:i.type,payload:i}))))}function GB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=WB(n,r))}),n}function Yw(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function WB(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Yw(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Yw(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Yw(n,e.oldIndex,1);break}return n}function _x(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Sf=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Tf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(vi(void 0),Na(),ct(([r,i])=>i.length>0||!r),Z(([,r])=>r),Ft)}auditTrail(e){return this.stateChanges(e).pipe(yi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=_x(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return Jw(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.payload.docs.map(r=>e.idField?ce(L({},r.data()),{[e.idField]:r.id}):r.data())),Ft)}get(e){return ve(this.query.get(e)).pipe(Ft)}add(e){return this.ref.add(e)}doc(e){return new bf(this.ref.doc(e),this.afs)}},Zw=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Tf(this.query,this.afs.schedulers.outsideAngular).pipe(Ft):Tf(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.filter(r=>e.indexOf(r.type)>-1)),ct(t=>t.length>0),Ft)}auditTrail(e){return this.stateChanges(e).pipe(yi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=_x(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return Jw(this.query,this.afs.schedulers.outsideAngular).pipe(Z(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),Ft)}get(e){return ve(this.query.get(e)).pipe(Ft)}},wx=new q("angularfire2.enableFirestorePersistence"),Ix=new q("angularfire2.firestore.persistenceSettings"),KB=new q("angularfire2.firestore.settings"),QB=new q("angularfire2.firestore.use-emulator");function Ex(n,e=t=>t){return{query:e(n),ref:n}}var Xw=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,b,A,M,F,H){this.schedulers=u;let O=Tu(t,a,r),W=h;p&&zy(O,a,m,b,A,M,y,F),[this.firestore,this.persistenceEnabled$]=nh(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let ee=a.runOutsideAngular(()=>O.firestore());if(o&&ee.settings(o),W&&ee.useEmulator(...W),i&&!Ri(s)){let Y=()=>{try{return ve(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),X(!1)}};return[ee,a.runOutsideAngular(Y)]}else return[ee,X(!1)]},[o,W,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=Ex(i,r),a=this.schedulers.ngZone.run(()=>o);return new Sf(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Zw(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new bf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(V(ls),V(ds,8),V(wx,8),V(KB,8),V(Nt),V(pe),V(Xd),V(Ix,8),V(QB,8),V(UT,8),V(jy,8),V(By,8),V(Uy,8),V($y,8),V(Hy,8),V(qy,8),V(Fi,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Dx=(()=>{class n{constructor(){Mt.registerVersion("angularfire",cs.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wx,useValue:!0},{provide:Ix,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tt({type:n});static \u0275inj=et({providers:[Xw]})}return n})();var Cx=(()=>{class n{constructor(t){this.firestore=t,this.dbPath="metas",this.metasRef=t.collection(this.dbPath)}getMetas(){return this.metasRef}addMeta(t){return this.metasRef.add(t)}deleteMeta(t){return this.metasRef.doc(t).delete()}countMetas(){return this.metasRef.snapshotChanges().pipe(Z(t=>t.length))}static{this.\u0275fac=function(r){return new(r||n)(V(Xw))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Px=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Ai),Ie(Or))}}static{this.\u0275dir=mt({type:n})}}return n})(),JB=(()=>{class n extends Px{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,features:[Xn]})}}return n})(),kx=new q("");var XB={provide:kx,useExisting:Si(()=>Of),multi:!0};function eU(){let n=An()?An().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var tU=new q(""),Of=(()=>{class n extends Px{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!eU())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(Ai),Ie(Or),Ie(tU,8))}}static{this.\u0275dir=mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&er("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Xa([XB]),Xn]})}}return n})();function nU(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var tI=new q(""),Ox=new q("");function rU(n){return nU(n.value)?{required:!0}:null}function bx(n){return null}function Fx(n){return n!=null}function Vx(n){return Mi(n)?ve(n):n}function Lx(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function jx(n,e){return e.map(t=>t(n))}function iU(n){return!n.validate}function Bx(n){return n.map(e=>iU(e)?e:t=>e.validate(t))}function oU(n){if(!n)return null;let e=n.filter(Fx);return e.length==0?null:function(t){return Lx(jx(t,e))}}function nI(n){return n!=null?oU(Bx(n)):null}function sU(n){if(!n)return null;let e=n.filter(Fx);return e.length==0?null:function(t){let r=jx(t,e).map(Vx);return Rp(r).pipe(Z(Lx))}}function rI(n){return n!=null?sU(Bx(n)):null}function Tx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aU(n){return n._rawValidators}function uU(n){return n._rawAsyncValidators}function eI(n){return n?Array.isArray(n)?n:[n]:[]}function Mf(n,e){return Array.isArray(n)?n.includes(e):n===e}function Sx(n,e){let t=eI(e);return eI(n).forEach(i=>{Mf(t,i)||t.push(i)}),t}function Ax(n,e){return eI(e).filter(t=>!Mf(n,t))}var xf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ta=class extends xf{get formDirective(){return null}get path(){return null}},_c=class extends xf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Rf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},U6=ce(L({},cU),{"[class.ng-submitted]":"isSubmitted"}),Ux=(()=>{class n extends Rf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(_c,2))}}static{this.\u0275dir=mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&wd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Xn]})}}return n})(),$x=(()=>{class n extends Rf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ie(ta,10))}}static{this.\u0275dir=mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&wd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Xn]})}}return n})();var pc="VALID",Af="INVALID",Xs="PENDING",gc="DISABLED",na=class{},Nf=class extends na{constructor(e,t){super(),this.value=e,this.source=t}},yc=class extends na{constructor(e,t){super(),this.pristine=e,this.source=t}},vc=class extends na{constructor(e,t){super(),this.touched=e,this.source=t}},ea=class extends na{constructor(e,t){super(),this.status=e,this.source=t}};function Hx(n){return(Ff(n)?n.validators:n)||null}function lU(n){return Array.isArray(n)?nI(n):n||null}function qx(n,e){return(Ff(e)?e.asyncValidators:n)||null}function dU(n){return Array.isArray(n)?rI(n):n||null}function Ff(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function hU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")}function fU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Q(1002,"")})}var Pf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=tu(()=>this.statusReactive()),this.statusReactive=Qa(void 0),this._pristine=tu(()=>this.pristineReactive()),this.pristineReactive=Qa(!0),this._touched=tu(()=>this.touchedReactive()),this.touchedReactive=Qa(!1),this._events=new Ne,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tr(this.statusReactive)}set status(e){tr(()=>this.statusReactive.set(e))}get valid(){return this.status===pc}get invalid(){return this.status===Af}get pending(){return this.status==Xs}get disabled(){return this.status===gc}get enabled(){return this.status!==gc}get pristine(){return tr(this.pristineReactive)}set pristine(e){tr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return tr(this.touchedReactive)}set touched(e){tr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Sx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Sx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ax(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ax(e,this._rawAsyncValidators))}hasValidator(e){return Mf(this._rawValidators,e)}hasAsyncValidator(e){return Mf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new vc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new vc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new yc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new yc(!0,r))}markAsPending(e={}){this.status=Xs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ea(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gc,this.errors=null,this._forEachChild(i=>{i.disable(ce(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nf(this.value,r)),this._events.next(new ea(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pc,this._forEachChild(r=>{r.enable(ce(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pc||this.status===Xs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nf(this.value,t)),this._events.next(new ea(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gc:pc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Vx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ea(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?gc:this.errors?Af:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xs)?Xs:this._anyControlsHaveStatus(Af)?Af:pc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new yc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new vc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ff(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dU(this._rawAsyncValidators)}},kf=class extends Pf{constructor(e,t,r){super(Hx(t),qx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fU(this,!0,e),Object.keys(e).forEach(r=>{hU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var iI=new q("CallSetDisabledState",{providedIn:"root",factory:()=>oI}),oI="always";function pU(n,e){return[...e.path,n]}function zx(n,e,t=oI){Gx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),mU(n,e),vU(n,e),yU(n,e),gU(n,e)}function Mx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gU(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Gx(n,e){let t=aU(n);e.validator!==null?n.setValidators(Tx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=uU(n);e.asyncValidator!==null?n.setAsyncValidators(Tx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Mx(e._rawValidators,i),Mx(e._rawAsyncValidators,i)}function mU(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Wx(n,e)})}function yU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Wx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Wx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vU(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _U(n,e){n==null,Gx(n,e)}function wU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function IU(n){return Object.getPrototypeOf(n.constructor)===JB}function EU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Of?t=o:IU(o)?r=o:i=o}),i||r||t||null}var CU={provide:ta,useExisting:Si(()=>sI)},mc=Promise.resolve(),sI=(()=>{class n extends ta{get submitted(){return tr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=tu(()=>this.submittedReactive()),this.submittedReactive=Qa(!1),this._directives=new Set,this.ngSubmit=new Ge,this.form=new kf({},nI(t),rI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){mc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),zx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){mc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){mc.then(()=>{let r=this._findContainer(t.path),i=new kf({});_U(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){mc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){mc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),EU(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ie(tI,10),Ie(Ox,10),Ie(iI,8))}}static{this.\u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&er("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xa([CU]),Xn]})}}return n})();function xx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Rx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var bU=class extends Pf{constructor(e=null,t,r){super(Hx(t),qx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ff(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Rx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Rx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var TU={provide:_c,useExisting:Si(()=>aI)},Nx=Promise.resolve(),aI=(()=>{class n extends _c{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new bU,this._registered=!1,this.name="",this.update=new Ge,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Nx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Vr(r);Nx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?pU(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ie(ta,9),Ie(tI,10),Ie(Ox,10),Ie(kx,10),Ie(xi,8),Ie(iI,8))}}static{this.\u0275dir=mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xa([TU]),Xn,Pr]})}}return n})(),Kx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var SU=(()=>{class n{constructor(){this._validator=bx}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,features:[Pr]})}}return n})();var AU={provide:tI,useExisting:Si(()=>uI),multi:!0};var uI=(()=>{class n extends SU{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Vr,this.createValidator=t=>rU}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ko(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Za("required",i._enabled?"":null)},inputs:{required:"required"},features:[Xa([AU]),Xn]})}}return n})();var MU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({})}}return n})();var Qx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iI,useValue:t.callSetDisabledState??oI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({imports:[MU]})}}return n})();function RU(n,e){if(n&1){let t=Kb();nt(0,"li",13)(1,"span"),Pt(2),ot(),nt(3,"button",14),er("click",function(){let i=AC(t).$implicit,o=Yb();return MC(o.eliminarMeta(i.id))}),Pt(4,"Eliminar"),ot()()}if(n&2){let t=e.$implicit;Ga(2),Em(t.meta)}}var Yx=(()=>{class n{constructor(t){this.metaService=t,this.meta=[],this.nuevaMeta="",console.log("esta corriendo home.component.ts"+this.metaService),this.metaService.getMetas().snapshotChanges().pipe(Z(r=>r.map(i=>L({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.meta=r,console.log(this.meta)})}agregarMeta(){if(this.nuevaMeta.trim()!==""){let t={meta:this.nuevaMeta};this.metaService.addMeta(t).then(()=>{this.nuevaMeta=""})}}eliminarMeta(t){this.metaService.deleteMeta(t)}ngOnInit(){this.metaService.countMetas().subscribe(t=>{this.metaCount=t})}static{this.\u0275fac=function(r){return new(r||n)(Ie(Cx))}}static{this.\u0275cmp=Nr({type:n,selectors:[["app-home"]],decls:19,vars:3,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-4"],[1,"card","shadow","p-3"],[1,"card-title"],[3,"ngSubmit"],[1,"mb-3"],["for","nuevaMeta",1,"form-label"],["type","text","id","nuevaMeta","name","nuevaMeta","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-pistache"],[1,"col-md-8"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-pistache",3,"click"]],template:function(r,i){r&1&&(nt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),Pt(5,"Agregar Meta Personal"),ot(),nt(6,"form",5),er("ngSubmit",function(){return i.agregarMeta()}),nt(7,"div",6)(8,"label",7),Pt(9,"Nueva meta"),ot(),nt(10,"input",8),Cm("ngModelChange",function(s){return Zb(i.nuevaMeta,s)||(i.nuevaMeta=s),s}),ot()(),nt(11,"button",9),Pt(12,"Agregar"),ot()()()(),nt(13,"div",10)(14,"div",3)(15,"h5",4),Pt(16),ot(),nt(17,"ul",11),_m(18,RU,5,1,"li",12),ot()()()()()),r&2&&(Ga(10),Dm("ngModel",i.nuevaMeta),Ga(6),Id("Mis Metas: (",i.metaCount,")"),Ga(2),Im("ngForOf",i.meta))},dependencies:[w0,Kx,Of,Ux,$x,uI,aI,sI],styles:[".btn-pistache[_ngcontent-%COMP%]{background-color:#98fb98;color:#fff;border:none}.btn-pistache[_ngcontent-%COMP%]:hover{background-color:#90ee90}"]})}}return n})();var Zx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Nr({type:n,selectors:[["app-about"]],decls:6,vars:0,template:function(r,i){r&1&&(nt(0,"h1"),Pt(1,"Luis Alejandro Maguey del Razo"),ot(),nt(2,"h1"),Pt(3,"lmaguey@hotmail.com"),ot(),nt(4,"h1"),Pt(5,"5537069254"),ot())},styles:["h1[_ngcontent-%COMP%]{color:#fff}"]})}}return n})();var NU=[{path:"home",component:Yx},{path:"about",component:Zx},{path:"",redirectTo:"/home",pathMatch:"full"}],Jx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tt({type:n})}static{this.\u0275inj=et({imports:[xy.forRoot(NU),xy]})}}return n})();var Xx=(()=>{class n{constructor(){this.title="lifegoals"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Nr({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"navbar","bg-primary","text-white"],[1,"container-fluid"],[1,"d-flex"],["routerLink","/home",1,"navbar-brand","text-white"],["routerLink","/about",1,"navbar-brand","text-white"]],template:function(r,i){r&1&&(nt(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Pt(4,"Home"),ot(),nt(5,"a",4),Pt(6,"About"),ot()()()(),Ja(7,"router-outlet"))},dependencies:[Cy,IT]})}}return n})();var eR={production:!1,firebase:{apiKey:"AIzaSyA5GBwZVgSiT2csjHrgr7k-W064P-jirVs",authDomain:"lifegoals-2f3e8.firebaseapp.com",projectId:"lifegoals-2f3e8",storageBucket:"lifegoals-2f3e8.firebasestorage.app",messagingSenderId:"726671680006",appId:"1:726671680006:web:a9de95280ecf413b701987"}};var tR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=tt({type:n,bootstrap:[Xx]})}static{this.\u0275inj=et({imports:[R0,Jx,Qx,Md,BT.initializeApp(eR.firebase),Dx]})}}return n})();x0().bootstrapModule(tR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
